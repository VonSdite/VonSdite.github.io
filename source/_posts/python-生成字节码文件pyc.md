---
title: python 运行程序的过程
toc: true
comments: true
categories:
  - Python
tags:
  - Python
abbrlink: 4d1f60ac
date: 2018-11-22 08:27:50
---

# 前言
**Python**程序执行时, 

1. 第一步是将**Python程序**编译成**字节码**(字节码是**源代码底层**的, 与平台无关的表现形式, 实现跨平台的重要特性; 字节码可以提高执行速度, 比起文本文件中的源代码语句, 字节码的运行速度要快得多)。注意, 字节码**不是**机器的二进制代码(例如, Intel芯片的指令), 字节码是**特定于**Python的一种表现形式

2. 第二步是字节码转发到**Python虚拟机(PVM)**中运行(类似**Java虚拟机(JVM)**), **PVM**就是迭代运行**字节码**指令的一个大循环, 一个接一个地完成操作 (PVM不是一个独立的程序, 只是Python系统的一部分)。实际上, PVM循环仍需**解释**字节码

![](/images/2018-11-22-09-06-42.png)

<!-- more -->

**Ps:** **字节码**编译过程是对用户完全隐藏的, 如果Python进程在机器上拥有**写入权限**, 那么它将把程序的字节码保存为一个以`.pyc`为扩展名的文件(`.pyc`表示的是编译过的`.py`源代码 -> `python complied`)。如果Python**没有写入权限**, 程序仍然可以工作, 只是字节码会在**内存**中生成, 并在程序结束时简单地丢弃。

# 字节码的好处

1. **Python**保存**字节码**可以作为一种**启动速度**的优化
如果你在上次保存**字节码**之后没有修改过源代码, **Python**将会加载`.pyc`文件并跳过编译这个步骤。当`Python`必须重编译时, 它会自动检查源文件和字节码的时间戳, 即当你修改并保存了源代码, 下次程序运行时, 字节码将**自动重新创建**

2. 字节码是源代码底层的, 与平台无关的表现形式, **实现跨平台的重要特性**

3. 可以隐藏**源代码**

