---
title: 无线路由器无缝漫游上网探讨
toc: true
comments: true
abbrlink: d0d26fb9
date: 2019-02-02 15:41:35
categories:
  - 网络配置
tags:
  - 网络配置
  - 路由器
---

# 前言
现在做到无缝漫游上网的模式以**AC+(瘦)AP的模式**为主,
> 用到的设备有
> - 企业认证网关(路由功能, AC管理, 认证上网)
> - POE交换机
> - 无线瘦AP

但目前还有很多人利用**多个无线路由器**来做无线wifi覆盖(比如说我自己), 这样做的原因是成本低, 但这样做实际上做不到无缝漫游上网, 原因除了无线路由器本身是普通家用路由器外, 还有其他的因素。

<!-- more -->

# 多个无线路由器的方法
用**多个无线路由器**来做无线wifi覆盖方式: 
> - 统一wifi名称
> - wifi认证一致(加密协议、wifi密码一致等)
> - 信道错开(2.4GHz 选择信道 1、6、11这三个不相互干扰的信道)
> - 不同路由器LAN口设置不同的IP段
> - WAN口设置为动态IP获取

一台主路由器, 交换机, 多个无线路由器
连接图: 
![](/images/2019-02-02-15-51-00.png)
这里的无线路由器所做的wifi覆盖是一个独立的无线网络, 无线路由器自己独立分配IP, 从1到2到3的区域走, 都需要先断开原来的无线路由器连接, 才能再连接下一个无线路由器。这个过程是有一定的时间空隙, 会感觉到断网, 还有可能断开了原来的网络, 不会再连接下一个无线网络可能, 这跟设备有关。
实际上, 手机连wifi, 手机会获取路由器的信息(网关IP, 网关MAC唯一); 而无线路由器也会获取到手机同样信息。不管怎么样, 手机获取一台新接入的无线路由器信息都需要个时间, 虽然不长, 但这似乎不符合无缝漫游上网的条件。

**当然, 就我个人现在的体验来看, 手机和电脑都会自动切换wifi, 确实存在切换过程网络不可用的情况, 但这个时间不会很长, 同时, 一般使用网络中, 我们并不频繁走动, 所以这种方法体验起来还是OK的**

# 另一种方法
在上述方法中, 关闭各路由器的DHCP功能, 使IP分配由同一个主路由器来分配, 保证IP不变, 这是无缝漫游上网的一个条件(这个方法我**未实现**...)

## 欠缺
但无缝漫游上网还有一个最重要的功能, 就是**漫游阀值**。
意思就是①结合无线AP的wifi信号强度; ②还要结合这个区域的在线人数, 以此来设置一个数值

### 欠缺1 家用路由器不能设置信号强度
我们知道无线路由器只有在信号很弱的情况下才断开, 手机正常上网信号是在-75以上强度, 但手机连接路由器wifi可以在-75以下。
当wifi强度在-75以下时, 手机上网就开始不正常了(网速慢, 上网卡), 只有移动到信号弱到很弱后, wifi才会断开。
但是家用无线路由器是**设置不了**在何种信号强度下断开wifi, 即不会在-75的信号强度自己去断开手机连接, 因此它们都没有办法设置漫游阀值
但在**有AC功能的路由器**上就可以设置。
![](/images/2019-02-02-15-54-05.png)

### 欠缺2 家用路由器不能限制在线人数
除了漫游信号阀值还可以**设置无线AP的在线人数**, 人数满了后连接的手机会连接到其他信号稳定的无线AP上人(负载均衡功能)。这个功能家用无线路由器也是没有的。
![](/images/2019-02-02-15-54-08.png)

所以就有一前头说的现在做到无缝漫游上网的模式还是以AC+(瘦)AP的模式为主, 用到的设备有企业认证网关(路由功能, AC管理, 认证上网), POE交换机, 无线瘦AP
![](/images/2019-02-02-15-54-17.png)
