<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Von Sdite</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://vonsdite.cn/"/>
  <updated>2018-12-10T02:47:52.871Z</updated>
  <id>https://vonsdite.cn/</id>
  
  <author>
    <name>Von Sdite</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Linux umaskçš„ä½¿ç”¨</title>
    <link href="https://vonsdite.cn/posts/11eb8483.html"/>
    <id>https://vonsdite.cn/posts/11eb8483.html</id>
    <published>2018-12-10T01:46:42.000Z</published>
    <updated>2018-12-10T02:47:52.871Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="umask"><a href="#umask" class="headerlink" title="umask"></a>umask</h1><p>åœ¨Linuxç³»ç»Ÿä¸‹, åˆ›å»ºä¸€ä¸ªæ–‡ä»¶/ç›®å½•æ—¶, ç³»ç»Ÿéƒ½ä¼šç»™å®ƒèµ‹äºˆä¸€ä¸ªé»˜è®¤çš„æƒé™, è¿™ä¸ªé»˜è®¤æƒé™å°±æ˜¯<code>umask</code>è®¾ç½®çš„ã€‚<br><code>umask</code>è®¾ç½®äº†ç”¨æˆ·åˆ›å»ºæ–‡ä»¶çš„é»˜è®¤æƒé™, å®ƒä¸<code>chmod</code>çš„æ•ˆæœåˆšå¥½ç›¸å, <code>umask</code>è®¾ç½®çš„æ˜¯æƒé™çš„<strong>åç </strong>, ä¹Ÿå«ä½œ<strong>é¢„è®¾æƒé™(æƒé™æ©ç )</strong></p><a id="more"></a><p><br><br>ä½ çš„ç³»ç»Ÿç®¡ç†å‘˜å¿…é¡»è¦ä¸ºä½ è®¾ç½®ä¸€ä¸ªåˆç†çš„ <code>umask</code>å€¼, ä»¥ç¡®ä¿ä½ åˆ›å»ºçš„æ–‡ä»¶å…·æœ‰æ‰€å¸Œæœ›çš„ç¼ºçœæƒé™, é˜²æ­¢å…¶ä»–éåŒç»„ç”¨æˆ·å¯¹ä½ çš„æ–‡ä»¶å…·æœ‰å†™æƒé™ã€‚åœ¨å·²ç»ç™»å½•ä¹‹å, å¯ä»¥æŒ‰ç…§ä¸ªäººçš„åå¥½ä½¿ç”¨<code>umask</code>å‘½ä»¤æ¥æ”¹å˜æ–‡ä»¶åˆ›å»ºçš„ç¼ºçœæƒé™ã€‚ç›¸åº”çš„æ”¹å˜<strong>ç›´åˆ°é€€å‡ºè¯¥shell</strong>æˆ–<strong>ä½¿ç”¨å¦å¤–çš„<code>umask</code>å‘½ä»¤ä¹‹å‰</strong>ä¸€ç›´æœ‰æ•ˆã€‚</p><p><br></p><p>ä¸€èˆ¬æ¥è¯´, <code>umask</code>å‘½ä»¤æ˜¯åœ¨<code>/etc/profile</code>æ–‡ä»¶ä¸­è®¾ç½®çš„, æ¯ä¸ªç”¨æˆ·åœ¨ç™»å½•æ—¶éƒ½ä¼šå¼•ç”¨è¿™ä¸ªæ–‡ä»¶, æ‰€ä»¥å¦‚æœå¸Œæœ›æ”¹å˜æ‰€æœ‰ç”¨æˆ·çš„<code>umask</code>, å¯ä»¥åœ¨è¯¥æ–‡ä»¶ä¸­åŠ å…¥ç›¸åº”çš„æ¡ç›®ã€‚å¦‚æœå¸Œæœ›æ°¸ä¹… æ€§åœ°è®¾ç½®è‡ªå·±çš„<code>umask</code>å€¼, é‚£ä¹ˆå°±æŠŠå®ƒæ”¾åœ¨è‡ªå·±<code>$HOME</code>ç›®å½•ä¸‹çš„<code>.profile</code>æˆ–<code>.bash_profile</code>æ–‡ä»¶ä¸­ã€‚</p><h1 id="umaskçš„ä½¿ç”¨"><a href="#umaskçš„ä½¿ç”¨" class="headerlink" title="umaskçš„ä½¿ç”¨"></a>umaskçš„ä½¿ç”¨</h1><p><code>umask</code>å‘½ä»¤å…è®¸ä½ è®¾å®šæ–‡ä»¶åˆ›å»ºæ—¶çš„ç¼ºçœæ¨¡å¼, å¯¹åº”æ¯ä¸€ç±»ç”¨æˆ·(æ–‡ä»¶å±ä¸»ã€åŒç»„ç”¨æˆ·ã€å…¶ä»–ç”¨æˆ·)å­˜åœ¨ä¸€ä¸ªç›¸åº”çš„<code>umask</code>å€¼ä¸­çš„æ•°å­—ã€‚</p><p><strong>æ³¨æ„:</strong></p><ul><li><strong>å¯¹äºæ–‡ä»¶</strong>æ¥è¯´, æƒé™æ•°å­—çš„<strong>æœ€å¤§å€¼æ˜¯6</strong>ã€‚å› ä¸ºç³»ç»Ÿä¸å…è®¸ä½ åœ¨åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶æ—¶å°±èµ‹äºˆ<strong>å®ƒæ‰§è¡Œæƒé™</strong>, å¿…é¡»åœ¨åˆ›å»ºåç”¨<code>chmod</code>å‘½ä»¤å¢åŠ è¿™ä¸€æƒé™ã€‚</li><li><strong>ç›®å½•</strong>å…è®¸è®¾ç½®<strong>æ‰§è¡Œæƒé™</strong>, è¿™æ ·é’ˆå¯¹ç›®å½•æ¥è¯´, <code>umask</code>ä¸­å„ä¸ªæ•°å­—æœ€å¤§å¯ä»¥åˆ°<strong>7</strong></li></ul><h2 id="æŸ¥çœ‹å½“å‰umask"><a href="#æŸ¥çœ‹å½“å‰umask" class="headerlink" title="æŸ¥çœ‹å½“å‰umask"></a>æŸ¥çœ‹å½“å‰umask</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">umask</span></span><br><span class="line">0002             <span class="comment"># åªçœ‹åå››ä½</span></span><br><span class="line">$ <span class="built_in">umask</span> -S</span><br><span class="line">u=rwx,g=rwx,o=rwx <span class="comment"># å­—ç¬¦å½¢å¼æŸ¥çœ‹</span></span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®umask"><a href="#è®¾ç½®umask" class="headerlink" title="è®¾ç½®umask"></a>è®¾ç½®umask</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">umask</span> nnn   <span class="comment"># nnnä¸º 000-777</span></span><br></pre></td></tr></table></figure><p><img src="/images/2018-12-10-10-38-46.png" alt=""></p><h2 id="è®¡ç®—umaskçš„å€¼"><a href="#è®¡ç®—umaskçš„å€¼" class="headerlink" title="è®¡ç®—umaskçš„å€¼"></a>è®¡ç®—umaskçš„å€¼</h2><p>è®¾ç½®umaskå€¼å, æ€ä¹ˆå¿«é€Ÿå¾—åˆ°åˆ›å»ºæ–‡ä»¶çš„æƒé™å‘¢</p><h3 id="å‡æ³•"><a href="#å‡æ³•" class="headerlink" title="å‡æ³•"></a>å‡æ³•</h3><p>ä¸€ç§æ˜¯ä½¿ç”¨<strong>å‡æ³•</strong>ã€‚<br>è®°ä½æ–‡ä»¶æƒé™æœ€å¤§å€¼æ˜¯6, ç›®å½•æƒé™æœ€å¤§å€¼æ˜¯7,<br>å½“ä½ <code>umask 002</code>, é‚£ä¹ˆ<strong>æ–‡ä»¶</strong>å¾—åˆ°çš„æƒé™å°±æ˜¯ 664, å› ä¸º 6-0=6 6-0=6 6-2=4, <strong>ç›®å½•</strong>åˆ™æ˜¯775</p><h3 id="å¼‚æˆ–"><a href="#å¼‚æˆ–" class="headerlink" title="å¼‚æˆ–"></a>å¼‚æˆ–</h3><p>å¦ä¸€ç§å°±æ˜¯<strong>å¼‚æˆ–</strong>ã€‚<br>è®°ä½æ–‡ä»¶æƒé™æœ€å¤§å€¼6çš„äºŒè¿›åˆ¶æ˜¯110, ç›®å½•æƒé™æœ€å¤§å€¼7çš„äºŒè¿›åˆ¶æ˜¯111,<br>å½“ä½ <code>umask 002</code>, é‚£ä¹ˆ<strong>æ–‡ä»¶</strong>å¾—åˆ°çš„æƒé™å°±æ˜¯ 664, å› ä¸º<strong>äºŒè¿›åˆ¶å¼‚æˆ–</strong>: 000^110=110ã€000^110=110ã€010^110=100, æ‰€ä»¥æƒé™å°±æ˜¯664, <strong>ç›®å½•</strong>åˆ™æ˜¯775</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;umask&quot;&gt;&lt;a href=&quot;#umask&quot; class=&quot;headerlink&quot; title=&quot;umask&quot;&gt;&lt;/a&gt;umask&lt;/h1&gt;&lt;p&gt;åœ¨Linuxç³»ç»Ÿä¸‹, åˆ›å»ºä¸€ä¸ªæ–‡ä»¶/ç›®å½•æ—¶, ç³»ç»Ÿéƒ½ä¼šç»™å®ƒèµ‹äºˆä¸€ä¸ªé»˜è®¤çš„æƒé™, è¿™ä¸ªé»˜è®¤æƒé™å°±æ˜¯&lt;code&gt;umask&lt;/code&gt;è®¾ç½®çš„ã€‚&lt;br&gt;&lt;code&gt;umask&lt;/code&gt;è®¾ç½®äº†ç”¨æˆ·åˆ›å»ºæ–‡ä»¶çš„é»˜è®¤æƒé™, å®ƒä¸&lt;code&gt;chmod&lt;/code&gt;çš„æ•ˆæœåˆšå¥½ç›¸å, &lt;code&gt;umask&lt;/code&gt;è®¾ç½®çš„æ˜¯æƒé™çš„&lt;strong&gt;åç &lt;/strong&gt;, ä¹Ÿå«ä½œ&lt;strong&gt;é¢„è®¾æƒé™(æƒé™æ©ç )&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://vonsdite.cn/categories/Linux/"/>
    
      <category term="Command" scheme="https://vonsdite.cn/categories/Linux/Command/"/>
    
    
      <category term="Linux" scheme="https://vonsdite.cn/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Python æå‡pythoné€Ÿåº¦</title>
    <link href="https://vonsdite.cn/posts/2a5aa04e.html"/>
    <id>https://vonsdite.cn/posts/2a5aa04e.html</id>
    <published>2018-12-08T12:25:14.000Z</published>
    <updated>2018-12-09T04:27:00.558Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¯ä»¥ä½¿ç”¨ <strong>Cython</strong>, <strong>PyPy</strong>æå‡ pythonçš„é€Ÿåº¦</p><a id="more"></a><h1 id="Cython"><a href="#Cython" class="headerlink" title="Cython"></a>Cython</h1><p><strong>Cython</strong>æ˜¯è®©Pythonè„šæœ¬<strong>æ”¯æŒCè¯­è¨€æ‰©å±•</strong>çš„ç¼–è¯‘å™¨, Cythonèƒ½å¤Ÿå°†Python+Cæ··åˆç¼–ç çš„.pyxè„šæœ¬è½¬æ¢ä¸ºCä»£ç , ä¸»è¦ç”¨äºä¼˜åŒ–Pythonè„šæœ¬æ€§èƒ½æˆ–Pythonè°ƒç”¨Cå‡½æ•°åº“ã€‚ç”±äºPythonå›ºæœ‰çš„æ€§èƒ½å·®çš„é—®é¢˜, ç”¨Cæ‰©å±•Pythonæˆä¸ºæé«˜Pythonæ€§èƒ½å¸¸ç”¨æ–¹æ³•, Cythonç®—æ˜¯è¾ƒä¸ºå¸¸è§çš„ä¸€ç§æ‰©å±•æ–¹å¼ã€‚</p><p>æ¨èæ–‡ç« :<br><a href="https://www.jianshu.com/p/fc5025094912" target="_blank" rel="noopener">https://www.jianshu.com/p/fc5025094912</a><br><a href="https://www.cnblogs.com/yafengabc/p/6130849.html" target="_blank" rel="noopener">https://www.cnblogs.com/yafengabc/p/6130849.html</a><br><a href="https://baijiahao.baidu.com/s?id=1606135207446878267&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">https://baijiahao.baidu.com/s?id=1606135207446878267&amp;wfr=spider&amp;for=pc</a><br><a href="https://baijiahao.baidu.com/s?id=1606135207446878267&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">https://baijiahao.baidu.com/s?id=1606135207446878267&amp;wfr=spider&amp;for=pc</a></p><h1 id="CPython-ä¸-PyPy"><a href="#CPython-ä¸-PyPy" class="headerlink" title="CPython ä¸ PyPy"></a>CPython ä¸ PyPy</h1><p>CPython: æ˜¯ç”¨<strong>Cè¯­è¨€å®ç°Python</strong>, æ˜¯ç›®å‰åº”ç”¨æœ€å¹¿æ³›çš„è§£é‡Šå™¨ã€‚æœ€æ–°çš„è¯­è¨€ç‰¹æ€§éƒ½æ˜¯åœ¨è¿™ä¸ªä¸Šé¢å…ˆå®ç°çš„, åŸºæœ¬åŒ…å«äº†æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“æ”¯æŒ, ä½†æ˜¯CPythonæœ‰å‡ ä¸ªç¼ºé™·, ä¸€æ˜¯å…¨å±€é”ä½¿Pythonåœ¨å¤šçº¿ç¨‹æ•ˆèƒ½ä¸Šè¡¨ç°ä¸ä½³, äºŒæ˜¯CPythonæ— æ³•æ”¯æŒJITï¼ˆå³æ—¶ç¼–è¯‘ï¼‰, å¯¼è‡´å…¶æ‰§è¡Œé€Ÿåº¦ä¸åŠJavaå’ŒJavasciptç­‰è¯­è¨€ã€‚äºæ˜¯å‡ºç°äº†Pypyã€‚</p><p>Pypy: æ˜¯ç”¨<strong>Pythonè‡ªèº«å®ç°çš„è§£é‡Šå™¨</strong>ã€‚é’ˆå¯¹CPythonçš„ç¼ºç‚¹è¿›è¡Œäº†å„æ–¹é¢çš„æ”¹è‰¯, æ€§èƒ½å¾—åˆ°å¾ˆå¤§çš„æå‡ã€‚æœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯Pypyé›†æˆäº†JITã€‚ä½†æ˜¯, Pypyæ— æ³•æ”¯æŒå®˜æ–¹çš„C/Python API, å¯¼è‡´æ— æ³•ä½¿ç”¨ä¾‹å¦‚Numpy, Scipyç­‰é‡è¦çš„ç¬¬ä¸‰æ–¹åº“ã€‚è¿™ä¹Ÿæ˜¯ç°åœ¨Pypyæ²¡æœ‰è¢«å¹¿æ³›ä½¿ç”¨çš„åŸå› å§ã€‚</p><h2 id="PyPyä¸CPythonçš„ä¸åŒ"><a href="#PyPyä¸CPythonçš„ä¸åŒ" class="headerlink" title="PyPyä¸CPythonçš„ä¸åŒ"></a>PyPyä¸CPythonçš„ä¸åŒ</h2><ul><li>CPythonæ˜¯ä½¿ç”¨è§£é‡Šæ‰§è¡Œçš„æ–¹å¼, è¿™æ ·çš„å®ç°æ–¹å¼åœ¨æ€§èƒ½ä¸Šæ˜¯å¾ˆå‡„æƒ¨çš„ã€‚</li><li>è€ŒPyPyä½¿ç”¨äº†JIT(å³æ—¶ç¼–è¯‘)æŠ€æœ¯, åœ¨æ€§èƒ½ä¸Šå¾—åˆ°äº†æå‡ã€‚</li></ul><h2 id="Pythonçš„è§£é‡Šå™¨"><a href="#Pythonçš„è§£é‡Šå™¨" class="headerlink" title="Pythonçš„è§£é‡Šå™¨:"></a>Pythonçš„è§£é‡Šå™¨:</h2><ol><li><p>ç”±äºPythonæ˜¯åŠ¨æ€ç¼–è¯‘çš„è¯­è¨€, å’ŒC/C++ã€Javaæˆ–è€…Kotlinç­‰é™æ€è¯­è¨€ä¸åŒ, å®ƒæ˜¯åœ¨è¿è¡Œæ—¶ä¸€å¥ä¸€å¥ä»£ç åœ°è¾¹ç¼–è¯‘è¾¹æ‰§è¡Œçš„, è€ŒJavaæ˜¯æå‰å°†é«˜çº§è¯­è¨€ç¼–è¯‘æˆäº†JVMå­—èŠ‚ç , è¿è¡Œæ—¶ç›´æ¥é€šè¿‡JVMå’Œæœºå™¨æ‰“äº¤é“, æ‰€ä»¥è¿›è¡Œå¯†é›†è®¡ç®—æ—¶è¿è¡Œé€Ÿåº¦è¿œé«˜äºåŠ¨æ€ç¼–è¯‘è¯­è¨€ã€‚</p></li><li><p>PyPy, å®ƒä½¿ç”¨äº†JITï¼ˆå³æ—¶ç¼–è¯‘ï¼‰æŠ€æœ¯, æ··åˆäº†åŠ¨æ€ç¼–è¯‘å’Œé™æ€ç¼–è¯‘çš„ç‰¹æ€§, <strong>ä»ç„¶æ˜¯ä¸€å¥ä¸€å¥ç¼–è¯‘æºä»£ç </strong>, ä½†æ˜¯ä¼šå°†ç¿»è¯‘è¿‡çš„ä»£ç ç¼“å­˜èµ·æ¥ä»¥é™ä½æ€§èƒ½æŸè€—ã€‚ç›¸å¯¹äºé™æ€ç¼–è¯‘ä»£ç , å³æ—¶ç¼–è¯‘çš„ä»£ç å¯ä»¥å¤„ç†å»¶è¿Ÿç»‘å®šå¹¶å¢å¼ºå®‰å…¨æ€§ã€‚ç»å¤§éƒ¨åˆ† Pythonä»£ç éƒ½å¯ä»¥åœ¨PyPyä¸‹è¿è¡Œ, ä½†æ˜¯PyPyå’ŒCPythonæœ‰ä¸€äº›æ˜¯ä¸åŒçš„ã€‚</p></li></ol><h1 id="ä¸€ä¸ªé€Ÿåº¦æ¯”è¾ƒä¾‹å­"><a href="#ä¸€ä¸ªé€Ÿåº¦æ¯”è¾ƒä¾‹å­" class="headerlink" title="ä¸€ä¸ªé€Ÿåº¦æ¯”è¾ƒä¾‹å­"></a>ä¸€ä¸ªé€Ÿåº¦æ¯”è¾ƒä¾‹å­</h1><p>ä½¿ç”¨<strong>C++</strong>å’Œ<strong>Python</strong>åˆ†åˆ«å®ç°ç›®å½•å¤§å°è®¡ç®—çš„ç®—æ³•ã€‚<br>å…¶ä¸­çš„è¦æ±‚æ˜¯:</p><ul><li>è®¡ç®—<strong>å•ä¸ª</strong>ç›®å½•å¤§å°, è¿”å›ä¸€ä¸ª<strong>æ•°å€¼</strong></li><li>è®¡ç®—<strong>ç›®å½•åŠç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•</strong>å¤§å°, è¿”å›ä¸€ä¸ª<strong>mapè¡¨</strong></li></ul><h2 id="ç»“æœæ¯”è¾ƒ"><a href="#ç»“æœæ¯”è¾ƒ" class="headerlink" title="ç»“æœæ¯”è¾ƒ"></a>ç»“æœæ¯”è¾ƒ</h2><h3 id="Pythonçš„è¿è¡Œç»“æœ"><a href="#Pythonçš„è¿è¡Œç»“æœ" class="headerlink" title="Pythonçš„è¿è¡Œç»“æœ"></a>Pythonçš„è¿è¡Œç»“æœ</h3><p><img src="/images/2018-12-09-11-59-04.png" alt=""><br><img src="/images/2018-12-09-12-01-01.png" alt=""><br>å•çº¯çœ‹Pythonçš„ç»“æœ, å¯ä»¥çœ‹å‡ºæ¥<strong>çº¿ç¨‹æ± </strong>çš„ä¼˜åŒ–å¤§å¤§æé«˜äº†é€’å½’è®¡ç®—çš„é€Ÿåº¦, å°†è¿‘æå‡äº†<strong>10å€</strong>çš„æ•ˆç‡</p><h3 id="C-çš„è¿è¡Œç»“æœ"><a href="#C-çš„è¿è¡Œç»“æœ" class="headerlink" title="C++çš„è¿è¡Œç»“æœ"></a>C++çš„è¿è¡Œç»“æœ</h3><p><img src="/images/2018-12-09-12-13-14.png" alt=""><br>é€šè¿‡æ¯”è¾ƒ<strong>å•ä¸ªç›®å½•å¤§å°</strong>è®¡ç®—, C++æ¯”Pythonå¿«äº†è¿‘<strong>5.6å€</strong><br>è€Œ<strong>è®¡ç®—æ‰€æœ‰ç›®å½•å¤§å°</strong>, C++æ¯”Pythonå¿«äº†è¿‘<strong>5.6å€</strong></p><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p><strong>çº¿ç¨‹æ± </strong>çš„æ± å­å¤§å°è®¾ä¸º<strong>5</strong>ã€‚<br>è®¡ç®—çš„ç›®å½•éƒ½æ˜¯<code>E:\1Code\Repositories</code>, <strong>5.8Gçš„å¤§å°</strong><br>ä¸ºäº†é¿å…<strong>å…¨å±€çº¿ç¨‹æ± </strong>å½±å“åˆ°å…¶ä»–å‡½æ•°çš„è¿è¡Œæ•ˆç‡, çº¿ç¨‹æ± å®ç°çš„æ–¹æ³• <strong>å•ç‹¬è¿è¡Œ</strong><br>ä¸¤è€…çš„å®ç°ç®—æ³•éƒ½æ˜¯<strong>ä¸€è‡´</strong>çš„</p><h4 id="Pythonå®ç°äº†4ç§æ–¹æ³•"><a href="#Pythonå®ç°äº†4ç§æ–¹æ³•" class="headerlink" title="Pythonå®ç°äº†4ç§æ–¹æ³•"></a>Pythonå®ç°äº†<strong>4ç§</strong>æ–¹æ³•</h4><ul><li>ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨<code>os.walk</code>çš„ç”Ÿæˆå™¨æ¥éå†è®¡ç®—å•ä¸ªç›®å½•å¤§å°, åä¸º<code>get_dir_size</code></li><li>ç¬¬äºŒç§æ˜¯<strong>é€’å½’è®¡ç®—</strong>å•ä¸ªç›®å½•å¤§å°, åä¸º<code>get_dir_size_recursive</code></li><li>ç¬¬ä¸‰ç§æ˜¯<strong>é€’å½’è®¡ç®—</strong>ç›®å½•åŠç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•å¤§å°, åä¸º<code>get_all_dir_size</code></li><li>ç¬¬å››ç§æ˜¯<strong>çº¿ç¨‹æ± </strong>+<strong>é€’å½’è®¡ç®—</strong>ç›®å½•åŠç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•å¤§å°, åä¸º<code>get_all_dir_size_thread</code></li></ul><h4 id="C-å®ç°äº†2ç§æ–¹æ³•"><a href="#C-å®ç°äº†2ç§æ–¹æ³•" class="headerlink" title="C++å®ç°äº†2ç§æ–¹æ³•"></a>C++å®ç°äº†<strong>2ç§</strong>æ–¹æ³•</h4><ul><li>ç¬¬ä¸€ç§æ˜¯<strong>é€’å½’è®¡ç®—</strong>å•ä¸ªç›®å½•å¤§å°, åä¸º<code>SimpleGetDirectorySizeRecursive</code></li><li>ç¬¬äºŒç§æ˜¯<strong>é€’å½’è®¡ç®—</strong>ç›®å½•åŠç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•å¤§å°, åä¸º<code>SimpleGetDirectorySize</code></li></ul><h2 id="Pythonçš„å®ç°"><a href="#Pythonçš„å®ç°" class="headerlink" title="Pythonçš„å®ç°"></a>Pythonçš„å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> threadpool</span><br><span class="line"><span class="keyword">from</span> os.path <span class="keyword">import</span> join, getsize, isdir, isfile</span><br><span class="line"></span><br><span class="line"><span class="comment"># os.walkåŠ åˆ—è¡¨æ¨å¯¼å¼æ±‚å•ä¸ªç›®å½•çš„å¤§å°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_dir_size</span><span class="params">(dir)</span>:</span></span><br><span class="line">    size = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(dir):</span><br><span class="line">        size += sum([getsize(join(root, name)) <span class="keyword">for</span> name <span class="keyword">in</span> files])</span><br><span class="line">    <span class="keyword">return</span> size</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€’å½’æ±‚å•ä¸ªç›®å½•çš„å¤§å°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_dir_size_recursive</span><span class="params">(dir)</span>:</span></span><br><span class="line">    size = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(dir):</span><br><span class="line">        ff = join(dir, f)</span><br><span class="line">        <span class="keyword">if</span> isdir(ff):</span><br><span class="line">            size += get_dir_size_recursive(ff)</span><br><span class="line">        <span class="keyword">elif</span> isfile(ff):</span><br><span class="line">            size += getsize(ff)</span><br><span class="line">    <span class="keyword">return</span> size</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»æ‰ç›®å½•ä¸­çš„ `:` `\` `/`</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clear_path_format</span><span class="params">(dir)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> dir.replace(<span class="string">':'</span>, <span class="string">''</span>).replace(<span class="string">'\\'</span>, <span class="string">''</span>).replace(<span class="string">'/'</span>, <span class="string">''</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é€’å½’æ±‚ç›®å½•åŠæ‰€æœ‰å­ç›®å½•çš„å¤§å°</span></span><br><span class="line">dir_dict = dict()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_all_dir_size</span><span class="params">(parent_dirs, dir)</span>:</span></span><br><span class="line">    dir_dict[clear_path_format(dir)] = <span class="number">0</span></span><br><span class="line">    size = <span class="number">0</span></span><br><span class="line">    parent_dirs.append(clear_path_format(dir))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(dir):</span><br><span class="line">        ff = join(dir, f)</span><br><span class="line">        <span class="keyword">if</span> isdir(ff):</span><br><span class="line">            get_all_dir_size(parent_dirs, ff)</span><br><span class="line">        <span class="keyword">elif</span> isfile(ff):</span><br><span class="line">            size += getsize(ff)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> size &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">for</span> path <span class="keyword">in</span> parent_dirs:</span><br><span class="line">            dir_dict[path] += size</span><br><span class="line"></span><br><span class="line">dir_dict_thread = dict()</span><br><span class="line">pool = threadpool.ThreadPool(<span class="number">5</span>)</span><br><span class="line">mutex = threading.Lock()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_all_dir_size_thread</span><span class="params">(parent_dirs, dir)</span>:</span></span><br><span class="line">    size = <span class="number">0</span></span><br><span class="line">    parent_dirs.append(clear_path_format(dir))</span><br><span class="line">    <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(dir):</span><br><span class="line">        ff = join(dir, f)</span><br><span class="line">        <span class="keyword">if</span> isdir(ff):</span><br><span class="line">            mutex.acquire()</span><br><span class="line">            pool.putRequest(</span><br><span class="line">                        threadpool.makeRequests(</span><br><span class="line">                            get_all_dir_size_thread,</span><br><span class="line">                            [</span><br><span class="line">                                (</span><br><span class="line">                                    (parent_dirs.copy(), ff),</span><br><span class="line">                                    <span class="keyword">None</span></span><br><span class="line">                                )</span><br><span class="line">                            ]</span><br><span class="line">                        )[<span class="number">0</span>]</span><br><span class="line">                    )</span><br><span class="line">            mutex.release()</span><br><span class="line">        <span class="keyword">elif</span> isfile(ff):</span><br><span class="line">            size += getsize(ff)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> size &gt; <span class="number">0</span>:</span><br><span class="line">        mutex.acquire()</span><br><span class="line">        <span class="keyword">for</span> path <span class="keyword">in</span> parent_dirs:</span><br><span class="line">            dir_dict_thread.setdefault(path, <span class="number">0</span>)</span><br><span class="line">            dir_dict_thread[path] += size</span><br><span class="line">        mutex.release()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    dir = <span class="string">r'E:\1Code\Repositories'</span></span><br><span class="line">    print(<span class="string">'Test "%s" size   ////// just python'</span> %  dir)</span><br><span class="line"></span><br><span class="line">    start = timeit.default_timer()</span><br><span class="line">    size = get_dir_size(dir)</span><br><span class="line">    end = timeit.default_timer()</span><br><span class="line">    print(<span class="string">'get_dir_size:            %fGB-&gt; use time: %fs'</span> % (size / (<span class="number">1</span> &lt;&lt; <span class="number">30</span>), end-start))</span><br><span class="line"></span><br><span class="line">    start = timeit.default_timer()</span><br><span class="line">    size = get_dir_size_recursive(dir)</span><br><span class="line">    end = timeit.default_timer()</span><br><span class="line">    print(<span class="string">'get_dir_size_recursive:  %fGB -&gt; use time: %fs'</span> % (size / (<span class="number">1</span> &lt;&lt; <span class="number">30</span>), end - start))</span><br><span class="line"></span><br><span class="line">    start = timeit.default_timer()</span><br><span class="line">    get_all_dir_size([], dir)</span><br><span class="line">    end = timeit.default_timer()</span><br><span class="line">    print(<span class="string">'get_all_dir_size:        %fGB -&gt; use time: %fs'</span> % (dir_dict[clear_path_format(dir)] / (<span class="number">1</span> &lt;&lt; <span class="number">30</span>), end - start))</span><br><span class="line"></span><br><span class="line">    start = timeit.default_timer()</span><br><span class="line">    get_all_dir_size_thread([], dir)</span><br><span class="line">    pool.wait()</span><br><span class="line">    end = timeit.default_timer()</span><br><span class="line">    print(<span class="string">'get_all_dir_size_thread: %fGB -&gt; use time: %fs'</span> % (dir_dict_thread[clear_path_format(dir)] / (<span class="number">1</span> &lt;&lt; <span class="number">30</span>), end - start))</span><br></pre></td></tr></table></figure><h2 id="C-çš„å®ç°"><a href="#C-çš„å®ç°" class="headerlink" title="C++çš„å®ç°"></a>C++çš„å®ç°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> UNICODE</span></span><br><span class="line"><span class="keyword">typedef</span> wstring tstring;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">string</span> tstring;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> POOL_SIZE 5</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">unordered_map</span>&lt;tstring, ULONGLONG&gt; mapDirSize_simple;<span class="comment">// é€’å½’çš„mapè¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ®æ–‡ä»¶çš„é«˜32ä½å’Œä½32ä½æ±‚å‡ºæ–‡ä»¶çš„å¤§å°</span></span><br><span class="line"><span class="function">ULONGLONG <span class="title">GetFileSize</span><span class="params">(ULONGLONG high, ULONGLONG low)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> ((high &lt;&lt; <span class="number">32</span>) | low);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»æ‰ä¸­æ‰€æœ‰çš„ "/"  "\" ":" </span></span><br><span class="line"><span class="function">tstring <span class="title">ClearPathFormat</span><span class="params">(tstring path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">size_t</span> pos = <span class="number">0</span>;</span><br><span class="line">tstring clear1 = TEXT(<span class="string">"/"</span>);</span><br><span class="line">tstring clear2 = TEXT(<span class="string">"\\"</span>);</span><br><span class="line">tstring clear3 = TEXT(<span class="string">":"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ((pos = path.find(clear1)) != tstring::npos)</span><br><span class="line">&#123;</span><br><span class="line">path.replace(pos, clear1.length(), <span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ((pos = path.find(clear2)) != tstring::npos)</span><br><span class="line">&#123;</span><br><span class="line">path.replace(pos, clear2.length(), <span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ((pos = path.find(clear3)) != tstring::npos)</span><br><span class="line">&#123;</span><br><span class="line">path.replace(pos, clear3.length(), <span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> path;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€å•é€’å½’å¾—ç›®å½•å¤§å°</span></span><br><span class="line"><span class="function">ULONGLONG <span class="title">SimpleGetDirectorySize</span><span class="params">(<span class="built_in">vector</span>&lt;tstring&gt; vecParentPath, tstring lpDirName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ULONGLONG nDirSize = <span class="number">0</span>;<span class="comment">// æ–‡ä»¶å¤¹å¤§å°</span></span><br><span class="line">tstring strDirName = lpDirName;</span><br><span class="line">strDirName += TEXT(<span class="string">"/*.*"</span>);<span class="comment">// ç›®å½•åå­—</span></span><br><span class="line"></span><br><span class="line">HANDLE hFile;</span><br><span class="line">WIN32_FIND_DATA pNextInfo;</span><br><span class="line">hFile = FindFirstFile(strDirName.c_str(), &amp;pNextInfo);</span><br><span class="line"><span class="keyword">if</span> (INVALID_HANDLE_VALUE == hFile)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">vecParentPath.push_back(ClearPathFormat(lpDirName));</span><br><span class="line"><span class="keyword">while</span> (FindNextFile(hFile, &amp;pNextInfo))</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// è·³è¿‡ "." ".." ä¸¤ä¸ªç›®å½•</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">strcmp</span>(pNextInfo.cFileName, <span class="string">"."</span>) || !<span class="built_in">strcmp</span>(pNextInfo.cFileName, <span class="string">".."</span>))</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pNextInfo.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY)</span><br><span class="line">&#123;<span class="comment">// ç›®å½•, é€’å½’ä¸‹å»åŠ </span></span><br><span class="line">tstring strTmp = lpDirName;</span><br><span class="line">strTmp += TEXT(<span class="string">"/"</span>);</span><br><span class="line">strTmp += pNextInfo.cFileName;</span><br><span class="line">SimpleGetDirectorySize(vecParentPath, strTmp.c_str());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;<span class="comment">// æ–‡ä»¶</span></span><br><span class="line">nDirSize += GetFileSize(pNextInfo.nFileSizeHigh, pNextInfo.nFileSizeLow);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (nDirSize)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> parent : vecParentPath)</span><br><span class="line">&#123;</span><br><span class="line">mapDirSize_simple[parent] += nDirSize;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> mapDirSize_simple[ClearPathFormat(lpDirName)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€’å½’å¾—å•ä¸ªç›®å½•å¤§å°</span></span><br><span class="line"><span class="function">ULONGLONG <span class="title">SimpleGetDirectorySizeRecursive</span><span class="params">(LPCSTR lpDirName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ULONGLONG nDirSize = <span class="number">0</span>;<span class="comment">// æ–‡ä»¶å¤¹å¤§å°</span></span><br><span class="line">TCHAR strDirName[<span class="number">1000</span>];</span><br><span class="line"><span class="built_in">memset</span>(strDirName, <span class="number">0</span>, <span class="keyword">sizeof</span>(strDirName));</span><br><span class="line"><span class="built_in">memcpy</span>(strDirName, lpDirName, <span class="built_in">strlen</span>(lpDirName));</span><br><span class="line"><span class="built_in">strcat</span>(strDirName, TEXT(<span class="string">"/*.*"</span>));</span><br><span class="line"></span><br><span class="line">HANDLE hFile;</span><br><span class="line">WIN32_FIND_DATA pNextInfo;</span><br><span class="line">hFile = FindFirstFile(strDirName, &amp;pNextInfo);</span><br><span class="line"><span class="keyword">if</span> (INVALID_HANDLE_VALUE == hFile)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (FindNextFile(hFile, &amp;pNextInfo))</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// è·³è¿‡ "." ".." ä¸¤ä¸ªç›®å½•</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">strcmp</span>(pNextInfo.cFileName, <span class="string">"."</span>) || !<span class="built_in">strcmp</span>(pNextInfo.cFileName, <span class="string">".."</span>))</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pNextInfo.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY)</span><br><span class="line">&#123;<span class="comment">// ç›®å½•, é€’å½’ä¸‹å»åŠ </span></span><br><span class="line">TCHAR strTmp[<span class="number">1000</span>];</span><br><span class="line"><span class="built_in">memset</span>(strTmp, <span class="number">0</span>, <span class="keyword">sizeof</span>(strTmp));</span><br><span class="line"><span class="built_in">memcpy</span>(strTmp, lpDirName, <span class="built_in">strlen</span>(lpDirName));</span><br><span class="line"><span class="built_in">strcat</span>(strTmp, TEXT(<span class="string">"/"</span>));</span><br><span class="line"><span class="built_in">strcat</span>(strTmp, pNextInfo.cFileName);</span><br><span class="line">nDirSize += SimpleGetDirectorySizeRecursive(strTmp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;<span class="comment">// æ–‡ä»¶</span></span><br><span class="line">nDirSize += GetFileSize(pNextInfo.nFileSizeHigh, pNextInfo.nFileSizeLow);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> nDirSize;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">tstring strDirName = TEXT(<span class="string">"E:\\1Code\\Repositories"</span>);</span><br><span class="line"></span><br><span class="line">LARGE_INTEGER t1, t2, tc;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€’å½’è®¡ç®—å•ä¸ªç›®å½•å¤§å°</span></span><br><span class="line">QueryPerformanceFrequency(&amp;tc);</span><br><span class="line">QueryPerformanceCounter(&amp;t1);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; strDirName &lt;&lt; <span class="string">" size: "</span> &lt;&lt; (<span class="keyword">double</span>)SimpleGetDirectorySizeRecursive(strDirName.c_str()) / (<span class="number">1</span> &lt;&lt; <span class="number">30</span>) &lt;&lt; <span class="string">"GB"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">QueryPerformanceCounter(&amp;t2);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Use Time:%fs\n"</span>, (t2.QuadPart - t1.QuadPart)*<span class="number">1.0</span> / tc.QuadPart);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€’å½’è®¡ç®—ç›®å½•å¤§å°</span></span><br><span class="line">QueryPerformanceFrequency(&amp;tc);</span><br><span class="line">QueryPerformanceCounter(&amp;t1);</span><br><span class="line"><span class="built_in">vector</span>&lt;tstring&gt; vecEmpty;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; strDirName &lt;&lt; <span class="string">" size: "</span>&lt;&lt; (<span class="keyword">double</span>)SimpleGetDirectorySize(vecEmpty, strDirName.c_str()) / (<span class="number">1</span> &lt;&lt; <span class="number">30</span>) &lt;&lt; <span class="string">"GB"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">QueryPerformanceCounter(&amp;t2);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Use Time:%fs\n"</span>, (t2.QuadPart - t1.QuadPart)*<span class="number">1.0</span> / tc.QuadPart);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å¯ä»¥ä½¿ç”¨ &lt;strong&gt;Cython&lt;/strong&gt;, &lt;strong&gt;PyPy&lt;/strong&gt;æå‡ pythonçš„é€Ÿåº¦&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="https://vonsdite.cn/categories/Python/"/>
    
      <category term="Cython" scheme="https://vonsdite.cn/categories/Python/Cython/"/>
    
    
      <category term="Python" scheme="https://vonsdite.cn/tags/Python/"/>
    
      <category term="Cython" scheme="https://vonsdite.cn/tags/Cython/"/>
    
  </entry>
  
  <entry>
    <title>Hexo Next ä½¿ç”¨Valineä½œè¯„è®ºç³»ç»Ÿ</title>
    <link href="https://vonsdite.cn/posts/c7d98860.html"/>
    <id>https://vonsdite.cn/posts/c7d98860.html</id>
    <published>2018-12-07T07:29:23.000Z</published>
    <updated>2018-12-08T06:11:32.679Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¹‹å‰åšå®¢ä½¿ç”¨çš„æ˜¯<strong>gitalk</strong>ä½œä¸ºè¯„è®ºç³»ç»Ÿ, ä½†æ˜¯å¯¹äº<strong>å¼ºè¿«ç—‡</strong>, çœ‹åˆ°Githubçš„<code>Recent activity</code>æ»¡æ»¡çš„ä¸€åˆ—<code>Issue</code>, å†…å¿ƒç€å®æœ‰ç‚¹å°éš¾å—ã€‚</p><p>å¦‚æœæƒ³ä½¿ç”¨<strong>gitalk</strong>ä½œä¸ºè¯„è®ºç³»ç»Ÿçš„å¯ä»¥çœ‹<strong><a href="/posts/dd07da63.html">Hexo Next åŠ å…¥è¯„è®ºåŠŸèƒ½gitalk</a></strong><br>è€Œæƒ³ä½¿ç”¨<strong>Valine</strong>ä½œä¸ºè¯„è®ºç³»ç»Ÿ, åˆ™å¯ä»¥å‚è€ƒæ­¤æ–‡</p><a id="more"></a><h1 id="Valine"><a href="#Valine" class="headerlink" title="Valine"></a>Valine</h1><blockquote><p>Valine è¯ç”Ÿäº2017å¹´8æœˆ7æ—¥, æ˜¯ä¸€æ¬¾åŸºäº<code>Leancloud</code>çš„å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„<strong>æ— åç«¯</strong>è¯„è®ºç³»ç»Ÿã€‚<br>ç†è®ºä¸Šæ”¯æŒä½†ä¸é™äºé™æ€åšå®¢, ç›®å‰å·²æœ‰<code>Hexo</code>ã€<code>Jekyll</code>ã€<code>Typecho</code>ã€<code>Hugo</code> ç­‰åšå®¢ç¨‹åºåœ¨ä½¿ç”¨Valineã€‚</p></blockquote><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul><li>å¿«é€Ÿ</li><li>å®‰å…¨</li><li>Emoji ğŸ˜‰</li><li>æ— åç«¯å®ç°</li><li>MarkDown å…¨è¯­æ³•æ”¯æŒ</li><li>è½»é‡æ˜“ç”¨(~15kb gzipped)</li><li>æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡ v1.2.0+</li></ul><h1 id="ä½¿ç”¨Valine"><a href="#ä½¿ç”¨Valine" class="headerlink" title="ä½¿ç”¨Valine"></a>ä½¿ç”¨Valine</h1><p>å¯ä»¥ä¸ŠValineçš„å®˜ç½‘çš„<a href="https://valine.js.org/quickstart.html" target="_blank" rel="noopener">å¿«é€Ÿå¼€å§‹</a>æŸ¥çœ‹å¦‚ä½•é…ç½®</p><p>ä»¥ä¸‹ä¸“é—¨ä»‹ç»<code>Hexo</code>å¦‚ä½•é…ç½®, <strong>Next</strong>ä¸»é¢˜æ˜¯<strong><code>6.0</code>ç‰ˆæœ¬</strong>ä»¥ä¸Šçš„</p><p>å› ä¸ºValineæ˜¯åŸºäº<strong>LeanCloud</strong>çš„, æ‰€ä»¥æˆ‘ä»¬<a href="/posts/c7d98860.html#æ³¨å†ŒLeancloudå¹¶åˆ›å»ºåº”ç”¨">å…ˆæ³¨å†ŒLeancloudå¹¶åˆ›å»ºåº”ç”¨</a></p><h2 id="æ³¨å†ŒLeancloudå¹¶åˆ›å»ºåº”ç”¨"><a href="#æ³¨å†ŒLeancloudå¹¶åˆ›å»ºåº”ç”¨" class="headerlink" title="æ³¨å†ŒLeancloudå¹¶åˆ›å»ºåº”ç”¨"></a>æ³¨å†ŒLeancloudå¹¶åˆ›å»ºåº”ç”¨</h2><ol><li><p>é¦–å…ˆ, å‰å¾€Leancloudå®˜ç½‘<a href="https://leancloud.cn/dashboard/login.html#/signup" target="_blank" rel="noopener">leancloud.cn</a>è¿›è¡Œæ³¨å†Œ, å¹¶ç™»é™†ã€‚</p></li><li><p>ç‚¹å‡»<strong>åˆ›å»ºåº”ç”¨</strong><br><img src="/images/2018-11-19-10-45-53.png" alt=""></p></li><li><p>è¾“å…¥åº”ç”¨çš„åç§°(éšä¾¿èµ·éƒ½è¡Œ), é€‰æ‹©<strong>å¼€å‘ç‰ˆ</strong>, ç‚¹å‡»<strong>åˆ›å»º</strong><br><img src="/images/2018-11-19-10-46-38.png" alt=""></p></li><li><p>åˆ›å»ºæˆåŠŸåç‚¹å‡»å³ä¸Šè§’çš„è®¾ç½®<strong>å°é½¿è½®</strong><br><img src="/images/2018-11-19-10-48-23.png" alt=""></p></li><li><p>åˆ›å»ºåç‚¹å‡»<strong>è®¾ç½®</strong>-ç‚¹å‡»<strong>åº”ç”¨Key</strong>-è·å–<strong>App ID</strong>å’Œ<strong>App Key</strong><br><img src="/images/2018-11-19-10-55-18.png" alt=""></p></li><li><p>å°†è·å–åˆ°çš„<strong>App ID</strong>å’Œ<strong>App Key</strong>è®¾ç½®åˆ°<code>Next</code>ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.yml</code>, å¹¶è®¾ç½®<code>enable: true</code><br><em>é…ç½®æ–‡ä»¶å·²å­˜åœ¨è¿™ä¸ªé…ç½®, åªè¦æŠŠ id å’Œ key åŠ ä¸Šå»å°±å¥½äº†</em></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="comment"># When enable is set to be true, leancloud_visitors is recommended to be closed for the re-initialization problem within different leancloud adk version.</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span> </span><br><span class="line"><span class="attr">  appid:</span> <span class="string">&lt;&lt;your</span> <span class="string">app</span> <span class="string">id&gt;&gt;</span>                    <span class="comment"># your leancloud application appid</span></span><br><span class="line"><span class="attr">  appkey:</span> <span class="string">&lt;&lt;your</span> <span class="string">app</span> <span class="string">key&gt;&gt;</span>                  <span class="comment"># your leancloud application appkey</span></span><br><span class="line"><span class="attr">  notify:</span> <span class="literal">false</span>                             <span class="comment"># mail notifier , https://github.com/xCss/Valine/wiki</span></span><br><span class="line"><span class="attr">  verify:</span> <span class="literal">false</span>                             <span class="comment"># Verification code</span></span><br><span class="line"><span class="attr">  placeholder:</span> <span class="string">ãƒ¾ï¾‰â‰§âˆ€â‰¦)oæ¥å•Š,</span> <span class="string">å¿«æ´»å•Š!</span>        <span class="comment"># comment box placeholder</span></span><br><span class="line"><span class="attr">  avatar:</span> <span class="string">mm</span>                                <span class="comment"># gravatar style</span></span><br><span class="line"><span class="attr">  guest_info:</span> <span class="string">nick,mail,link</span>                <span class="comment"># custom comment header</span></span><br><span class="line"><span class="attr">  pageSize:</span> <span class="number">10</span>                              <span class="comment"># pagination size</span></span><br><span class="line"><span class="attr">  visitor:</span> <span class="literal">false</span>                            <span class="comment"># leancloud-counter-security is not supported for now. When visitor is set to be true, appid and appkey are recommended to be the same as leancloud_visitors' for counter compatibility. Article reading statistic https://valine.js.org/visitor.html</span></span><br></pre></td></tr></table></figure></li><li><p>ç‚¹å‡»<strong>å®‰å…¨ä¸­å¿ƒ</strong>, å¡«å†™è‡ªå·±åšå®¢å¯¹åº”çš„åŸŸåï¼ˆæ³¨æ„åè®®ã€åŸŸåå’Œç«¯å£å·éœ€ä¸¥æ ¼ä¸€è‡´ï¼‰<br><img src="/images/2018-11-19-10-57-01.png" alt=""></p></li></ol><p>è‡³æ­¤å®Œæˆé…ç½®, <code>hexo s</code>å°±å¯ä»¥çœ‹åˆ°æ–‡ç« è¯„è®ºåŒºäº†</p><h2 id="å¼€å¯è¯„è®ºå›å¤é‚®ç®±æé†’"><a href="#å¼€å¯è¯„è®ºå›å¤é‚®ç®±æé†’" class="headerlink" title="å¼€å¯è¯„è®ºå›å¤é‚®ç®±æé†’"></a>å¼€å¯è¯„è®ºå›å¤é‚®ç®±æé†’</h2><p>å‚è€ƒ<a href="https://github.com/xCss/Valine/wiki/Valine-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E9%82%AE%E4%BB%B6%E6%8F%90%E9%86%92%E8%AE%BE%E7%BD%AE" target="_blank" rel="noopener">è¯„è®ºç³»ç»Ÿä¸­çš„é‚®ä»¶æé†’è®¾ç½®</a></p><p>Valineçš„é…ç½®è¦è®¾ç½® <code>notify: true</code> å’Œ <code>verify: true</code><br></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="comment"># When enable is set to be true, leancloud_visitors is recommended to be closed for the re-initialization problem within different leancloud adk version.</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span> </span><br><span class="line"><span class="attr">  appid:</span> <span class="string">&lt;&lt;your</span> <span class="string">app</span> <span class="string">id&gt;&gt;</span>                    <span class="comment"># your leancloud application appid</span></span><br><span class="line"><span class="attr">  appkey:</span> <span class="string">&lt;&lt;your</span> <span class="string">app</span> <span class="string">key&gt;&gt;</span>                  <span class="comment"># your leancloud application appkey</span></span><br><span class="line"><span class="attr">  notify:</span> <span class="literal">true</span>                              <span class="comment"># mail notifier , https://github.com/xCss/Valine/wiki</span></span><br><span class="line"><span class="attr">  verify:</span> <span class="literal">true</span>                              <span class="comment"># Verification code</span></span><br><span class="line"><span class="attr">  placeholder:</span> <span class="string">ãƒ¾ï¾‰â‰§âˆ€â‰¦)oæ¥å•Š,</span> <span class="string">å¿«æ´»å•Š!</span>        <span class="comment"># comment box placeholder</span></span><br><span class="line"><span class="attr">  avatar:</span> <span class="string">mm</span>                                <span class="comment"># gravatar style</span></span><br><span class="line"><span class="attr">  guest_info:</span> <span class="string">nick,mail,link</span>                <span class="comment"># custom comment header</span></span><br><span class="line"><span class="attr">  pageSize:</span> <span class="number">10</span>                              <span class="comment"># pagination size</span></span><br><span class="line"><span class="attr">  visitor:</span> <span class="literal">false</span>                            <span class="comment"># leancloud-counter-security is not supported for now. When visitor is set to be true, appid and appkey are recommended to be the same as leancloud_visitors' for counter compatibility. Article reading statistic https://valine.js.org/visitor.html</span></span><br></pre></td></tr></table></figure><p></p><h2 id="è¯„è®ºæ•°æ®ç®¡ç†"><a href="#è¯„è®ºæ•°æ®ç®¡ç†" class="headerlink" title="è¯„è®ºæ•°æ®ç®¡ç†"></a>è¯„è®ºæ•°æ®ç®¡ç†</h2><p>ç”±äºValine æ˜¯<strong>æ— åç«¯</strong>è¯„è®ºç³»ç»Ÿ, æ‰€ä»¥ä¹Ÿå°±æ²¡æœ‰å¼€å‘è¯„è®ºæ•°æ®ç®¡ç†åŠŸèƒ½ã€‚è¯·<strong>è‡ªè¡Œç™»å½•Leancloudåº”ç”¨ç®¡ç†</strong>ã€‚</p><p>å…·ä½“æ­¥éª¤ï¼š<code>ç™»å½•&gt;é€‰æ‹©ä½ åˆ›å»ºçš„åº”ç”¨&gt;å­˜å‚¨&gt;é€‰æ‹©Class Comment</code>, ç„¶åå°±å¯ä»¥å°½æƒ…çš„å‘æŒ¥ä½ çš„æƒåˆ©å•¦(ï½ï¿£â–½ï¿£)ï½</p><blockquote><p>å½“ç„¶, ä½ ä¹Ÿå¯ä»¥é…åˆ <a href="https://github.com/panjunwen" target="_blank" rel="noopener">@panjunwen</a> å¼€å‘çš„ <a href="https://github.com/panjunwen/Valine-Admin" target="_blank" rel="noopener">Valine-Admin</a> è¿›è¡Œè¯„è®ºæ•°æ®ç®¡ç†</p></blockquote><h1 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h1><p>å¦‚æœä½ æŸä¸€ç¯‡æ–‡ç« ä¸æƒ³æœ‰è¯„è®ºåŠŸèƒ½, ä½ å¯ä»¥åœ¨æ–‡ç« çš„<code>font-matter</code>ä¸­åŠ å…¥ <code>comments: false</code></p><p><img src="/images/2018-12-05-21-19-05.png" alt=""></p><p>å› ä¸ºåŠ å…¥äº†è¯„è®ºåŠŸèƒ½, åœ¨<code>æ ‡ç­¾</code>ã€<code>åˆ†ç±»</code>é¡µé¢éƒ½ä¼šæœ‰ä¸ªè¯„è®ºåŒº, æ‰€ä»¥åº”åˆ°ç›¸åº”é¡µé¢çš„<code>index.md</code>çš„<code>font-matter</code>ä¸­åŠ å…¥ <code>comments: false</code></p><p><strong>å¹¶ä¿®æ”¹ç«™ç‚¹ç›®å½•ä¸‹<code>scaffolds</code>çš„<code>page.md</code>æ¨¡æ¿</strong>, å› ä¸ºåˆ›å»º<code>page</code>éƒ½ä¼š<strong>ä½¿ç”¨åˆ°è¯¥æ¨¡æ¿</strong>, è€Œé¡µé¢ä¸éœ€è¦æœ‰è¯„è®ºåŒº<br></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&#123;&#123;</span> <span class="string">title</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="attr">date:</span> <span class="string">&#123;&#123;</span> <span class="string">date</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="attr">type:</span> </span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;ä¹‹å‰åšå®¢ä½¿ç”¨çš„æ˜¯&lt;strong&gt;gitalk&lt;/strong&gt;ä½œä¸ºè¯„è®ºç³»ç»Ÿ, ä½†æ˜¯å¯¹äº&lt;strong&gt;å¼ºè¿«ç—‡&lt;/strong&gt;, çœ‹åˆ°Githubçš„&lt;code&gt;Recent activity&lt;/code&gt;æ»¡æ»¡çš„ä¸€åˆ—&lt;code&gt;Issue&lt;/code&gt;, å†…å¿ƒç€å®æœ‰ç‚¹å°éš¾å—ã€‚&lt;/p&gt;&lt;p&gt;å¦‚æœæƒ³ä½¿ç”¨&lt;strong&gt;gitalk&lt;/strong&gt;ä½œä¸ºè¯„è®ºç³»ç»Ÿçš„å¯ä»¥çœ‹&lt;strong&gt;&lt;a href=&quot;/posts/dd07da63.html&quot;&gt;Hexo Next åŠ å…¥è¯„è®ºåŠŸèƒ½gitalk&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;è€Œæƒ³ä½¿ç”¨&lt;strong&gt;Valine&lt;/strong&gt;ä½œä¸ºè¯„è®ºç³»ç»Ÿ, åˆ™å¯ä»¥å‚è€ƒæ­¤æ–‡&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://vonsdite.cn/categories/Hexo/"/>
    
      <category term="Next" scheme="https://vonsdite.cn/categories/Hexo/Next/"/>
    
    
      <category term="Hexo" scheme="https://vonsdite.cn/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>python osæ¨¡å— å…³äºæ–‡ä»¶/ç›®å½•å¸¸ç”¨çš„å‡½æ•°ä½¿ç”¨æ–¹æ³•</title>
    <link href="https://vonsdite.cn/posts/b288b56b.html"/>
    <id>https://vonsdite.cn/posts/b288b56b.html</id>
    <published>2018-12-06T09:29:48.000Z</published>
    <updated>2018-12-06T10:00:20.754Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="å¸¸ç”¨çš„æ–‡ä»¶-ç›®å½•å‡½æ•°"><a href="#å¸¸ç”¨çš„æ–‡ä»¶-ç›®å½•å‡½æ•°" class="headerlink" title="å¸¸ç”¨çš„æ–‡ä»¶/ç›®å½•å‡½æ•°"></a>å¸¸ç”¨çš„æ–‡ä»¶/ç›®å½•å‡½æ•°</h1><table><thead><tr><th>å‡½æ•°å</th><th>ä½¿ç”¨æ–¹æ³•</th></tr></thead><tbody><tr><td>os.getcwd()</td><td>è¿”å›å½“å‰å·¥ä½œç›®å½•</td></tr><tr><td>os.chdir(path)</td><td>æ”¹å˜å·¥ä½œç›®å½•</td></tr><tr><td>os.listdir(path=â€™.â€™)</td><td>åˆ—ä¸¾æŒ‡å®šç›®å½•ä¸­çš„æ–‡ä»¶å(â€˜.â€™è¡¨ç¤ºå½“å‰ç›®å½•, â€˜..â€™è¡¨ç¤ºä¸Šä¸€çº§ç›®å½•)</td></tr><tr><td>os.mkdir(path)</td><td>åˆ›å»ºå•å±‚ç›®å½•, å¦‚è¯¥ç›®å½•å·²å­˜åœ¨æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td>os.makedirs(path)</td><td>é€’å½’åˆ›å»ºå¤šå±‚ç›®å½•, å¦‚è¯¥ç›®å½•å·²å­˜åœ¨æŠ›å‡ºå¼‚å¸¸, æ³¨æ„: â€˜E:\a\bâ€™å’Œâ€™E:\a\câ€™å¹¶ä¸ä¼šå†²çª</td></tr><tr><td>os.remove(path)</td><td>åˆ é™¤æ–‡ä»¶</td></tr><tr><td>os.rmdir(path)</td><td>åˆ é™¤å•å±‚ç›®å½•, å¦‚è¯¥ç›®å½•éç©ºåˆ™æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td>os.removedirs(path)</td><td>é€’å½’åˆ é™¤ç›®å½•, ä»å­ç›®å½•åˆ°çˆ¶ç›®å½•é€å±‚å°è¯•åˆ é™¤, é‡åˆ°ç›®å½•éç©ºåˆ™æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td>os.rename(old, new)</td><td>å°†æ–‡ä»¶oldé‡å‘½åä¸ºnew</td></tr><tr><td>os.system(command)</td><td>è¿è¡Œç³»ç»Ÿçš„shellå‘½ä»¤</td></tr><tr><td>os.walk(top)</td><td>éå†topè·¯å¾„ä»¥ä¸‹æ‰€æœ‰çš„å­ç›®å½•, è¿”å›ä¸€ä¸ªä¸‰å…ƒç»„: (è·¯å¾„, [åŒ…å«ç›®å½•], [åŒ…å«æ–‡ä»¶])</td></tr></tbody></table><a id="more"></a><h1 id="os-pathæ¨¡å—å…³äºè·¯å¾„å¸¸ç”¨çš„å‡½æ•°"><a href="#os-pathæ¨¡å—å…³äºè·¯å¾„å¸¸ç”¨çš„å‡½æ•°" class="headerlink" title="os.pathæ¨¡å—å…³äºè·¯å¾„å¸¸ç”¨çš„å‡½æ•°"></a><code>os.path</code>æ¨¡å—å…³äºè·¯å¾„å¸¸ç”¨çš„å‡½æ•°</h1><table><thead><tr><th>å‡½æ•°å</th><th>ä½¿ç”¨æ–¹æ³•</th></tr></thead><tbody><tr><td>os.path.basename(path)</td><td>å»æ‰ç›®å½•è·¯å¾„ï¼Œå•ç‹¬è¿”å›æ–‡ä»¶å</td></tr><tr><td>os.path.dirname(path)</td><td>å»æ‰æ–‡ä»¶åï¼Œå•ç‹¬è¿”å›ç›®å½•è·¯å¾„</td></tr><tr><td>os.path.join(path1[, path2[, â€¦]])</td><td>å°†path1, path2å„éƒ¨åˆ†ç»„åˆæˆä¸€ä¸ªè·¯å¾„å</td></tr><tr><td>os.path.split(path)</td><td>åˆ†å‰²æ–‡ä»¶åä¸è·¯å¾„ï¼Œè¿”å›(f_path, f_name)å…ƒç»„ã€‚å¦‚æœå®Œå…¨ä½¿ç”¨ç›®å½•ï¼Œå®ƒä¹Ÿä¼šå°†æœ€åä¸€ä¸ªç›®å½•ä½œä¸ºæ–‡ä»¶ååˆ†ç¦»ï¼Œä¸”ä¸ä¼šåˆ¤æ–­æ–‡ä»¶æˆ–è€…ç›®å½•æ˜¯å¦å­˜åœ¨</td></tr><tr><td>os.path.splitext(path)</td><td>åˆ†ç¦»æ–‡ä»¶åä¸æ‰©å±•åï¼Œè¿”å›(f_name, f_extension)å…ƒç»„</td></tr><tr><td>os.path.getsize(file)</td><td>è¿”å›æŒ‡å®šæ–‡ä»¶çš„å°ºå¯¸ï¼Œå•ä½æ˜¯å­—èŠ‚</td></tr><tr><td>os.path.getatime(file)</td><td>è¿”å›æŒ‡å®šæ–‡ä»¶æœ€è¿‘çš„è®¿é—®æ—¶é—´ï¼ˆæµ®ç‚¹å‹ç§’æ•°ï¼Œå¯ç”¨timeæ¨¡å—çš„gmtime()æˆ–localtime()å‡½æ•°æ¢ç®—ï¼‰</td></tr><tr><td>os.path.getctime(file)</td><td>è¿”å›æŒ‡å®šæ–‡ä»¶çš„åˆ›å»ºæ—¶é—´ï¼ˆæµ®ç‚¹å‹ç§’æ•°ï¼Œå¯ç”¨timeæ¨¡å—çš„gmtime()æˆ–localtime()å‡½æ•°æ¢ç®—ï¼‰</td></tr><tr><td>os.path.getmtime(file)</td><td>è¿”å›æŒ‡å®šæ–‡ä»¶æœ€æ–°çš„ä¿®æ”¹æ—¶é—´ï¼ˆæµ®ç‚¹å‹ç§’æ•°ï¼Œå¯ç”¨timeæ¨¡å—çš„gmtime()æˆ–localtime()å‡½æ•°æ¢ç®—ï¼‰</td></tr></tbody></table><h2 id="ä»¥ä¸‹è¿”å›å€¼ä¸º-True-æˆ–-False"><a href="#ä»¥ä¸‹è¿”å›å€¼ä¸º-True-æˆ–-False" class="headerlink" title="ä»¥ä¸‹è¿”å›å€¼ä¸º True æˆ– False"></a>ä»¥ä¸‹è¿”å›å€¼ä¸º <code>True</code> æˆ– <code>False</code></h2><table><thead><tr><th>å‡½æ•°å</th><th>ä½¿ç”¨æ–¹æ³•</th></tr></thead><tbody><tr><td>os.path.exists(path)</td><td>åˆ¤æ–­æŒ‡å®šè·¯å¾„ï¼ˆç›®å½•æˆ–æ–‡ä»¶ï¼‰æ˜¯å¦å­˜åœ¨</td></tr><tr><td>os.path.isabs(path)</td><td>åˆ¤æ–­æŒ‡å®šè·¯å¾„æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„</td></tr><tr><td>os.path.isdir(path)</td><td>åˆ¤æ–­æŒ‡å®šè·¯å¾„æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªç›®å½•</td></tr><tr><td>os.path.isfile(path)</td><td>åˆ¤æ–­æŒ‡å®šè·¯å¾„æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªæ–‡ä»¶</td></tr><tr><td>os.path.islink(path)</td><td>åˆ¤æ–­æŒ‡å®šè·¯å¾„æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥</td></tr><tr><td>os.path.ismount(path)</td><td>åˆ¤æ–­æŒ‡å®šè·¯å¾„æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªæŒ‚è½½ç‚¹</td></tr><tr><td>os.path.samefile(path1, paht2)</td><td>åˆ¤æ–­path1å’Œpath2ä¸¤ä¸ªè·¯å¾„æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶</td></tr></tbody></table><h1 id="æ”¯æŒè·¨å¹³å°çš„è·¯å¾„å®šä¹‰"><a href="#æ”¯æŒè·¨å¹³å°çš„è·¯å¾„å®šä¹‰" class="headerlink" title="æ”¯æŒè·¨å¹³å°çš„è·¯å¾„å®šä¹‰"></a>æ”¯æŒè·¨å¹³å°çš„è·¯å¾„å®šä¹‰</h1><table><thead><tr><th>å‡½æ•°å</th><th>ä½¿ç”¨æ–¹æ³•</th></tr></thead><tbody><tr><td>os.curdir</td><td>æŒ‡ä»£å½“å‰ç›®å½•(â€˜.â€™)</td></tr><tr><td>os.pardir</td><td>æŒ‡ä»£ä¸Šä¸€çº§ç›®å½•(â€˜..â€™)</td><td></td></tr><tr><td>os.sep</td><td>è¾“å‡ºæ“ä½œç³»ç»Ÿç‰¹å®šçš„è·¯å¾„åˆ†éš”ç¬¦(Winä¸‹ä¸ºâ€™\â€˜, Linuxä¸‹ä¸ºâ€™/â€˜)</td></tr><tr><td>os.linesep</td><td>å½“å‰å¹³å°ä½¿ç”¨çš„è¡Œç»ˆæ­¢ç¬¦(Winä¸‹ä¸ºâ€™\r\nâ€™, Linuxä¸‹ä¸ºâ€™\nâ€™)</td></tr><tr><td>os.name</td><td>æŒ‡ä»£å½“å‰ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿ(åŒ…æ‹¬: â€˜posixâ€™,</td><td>â€˜ntâ€™, â€˜macâ€™, â€˜os2â€™, â€˜ceâ€™, â€˜javaâ€™)</td></tr></tbody></table><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;å¸¸ç”¨çš„æ–‡ä»¶-ç›®å½•å‡½æ•°&quot;&gt;&lt;a href=&quot;#å¸¸ç”¨çš„æ–‡ä»¶-ç›®å½•å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;å¸¸ç”¨çš„æ–‡ä»¶/ç›®å½•å‡½æ•°&quot;&gt;&lt;/a&gt;å¸¸ç”¨çš„æ–‡ä»¶/ç›®å½•å‡½æ•°&lt;/h1&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‡½æ•°å&lt;/th&gt;&lt;th&gt;ä½¿ç”¨æ–¹æ³•&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;os.getcwd()&lt;/td&gt;&lt;td&gt;è¿”å›å½“å‰å·¥ä½œç›®å½•&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;os.chdir(path)&lt;/td&gt;&lt;td&gt;æ”¹å˜å·¥ä½œç›®å½•&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;os.listdir(path=â€™.â€™)&lt;/td&gt;&lt;td&gt;åˆ—ä¸¾æŒ‡å®šç›®å½•ä¸­çš„æ–‡ä»¶å(â€˜.â€™è¡¨ç¤ºå½“å‰ç›®å½•, â€˜..â€™è¡¨ç¤ºä¸Šä¸€çº§ç›®å½•)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;os.mkdir(path)&lt;/td&gt;&lt;td&gt;åˆ›å»ºå•å±‚ç›®å½•, å¦‚è¯¥ç›®å½•å·²å­˜åœ¨æŠ›å‡ºå¼‚å¸¸&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;os.makedirs(path)&lt;/td&gt;&lt;td&gt;é€’å½’åˆ›å»ºå¤šå±‚ç›®å½•, å¦‚è¯¥ç›®å½•å·²å­˜åœ¨æŠ›å‡ºå¼‚å¸¸, æ³¨æ„: â€˜E:\a\bâ€™å’Œâ€™E:\a\câ€™å¹¶ä¸ä¼šå†²çª&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;os.remove(path)&lt;/td&gt;&lt;td&gt;åˆ é™¤æ–‡ä»¶&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;os.rmdir(path)&lt;/td&gt;&lt;td&gt;åˆ é™¤å•å±‚ç›®å½•, å¦‚è¯¥ç›®å½•éç©ºåˆ™æŠ›å‡ºå¼‚å¸¸&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;os.removedirs(path)&lt;/td&gt;&lt;td&gt;é€’å½’åˆ é™¤ç›®å½•, ä»å­ç›®å½•åˆ°çˆ¶ç›®å½•é€å±‚å°è¯•åˆ é™¤, é‡åˆ°ç›®å½•éç©ºåˆ™æŠ›å‡ºå¼‚å¸¸&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;os.rename(old, new)&lt;/td&gt;&lt;td&gt;å°†æ–‡ä»¶oldé‡å‘½åä¸ºnew&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;os.system(command)&lt;/td&gt;&lt;td&gt;è¿è¡Œç³»ç»Ÿçš„shellå‘½ä»¤&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;os.walk(top)&lt;/td&gt;&lt;td&gt;éå†topè·¯å¾„ä»¥ä¸‹æ‰€æœ‰çš„å­ç›®å½•, è¿”å›ä¸€ä¸ªä¸‰å…ƒç»„: (è·¯å¾„, [åŒ…å«ç›®å½•], [åŒ…å«æ–‡ä»¶])&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
    
    </summary>
    
      <category term="Python" scheme="https://vonsdite.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://vonsdite.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>python æ€§èƒ½æµ‹è¯•å·¥å…·</title>
    <link href="https://vonsdite.cn/posts/e1d29b4a.html"/>
    <id>https://vonsdite.cn/posts/e1d29b4a.html</id>
    <published>2018-12-06T03:33:39.000Z</published>
    <updated>2018-12-06T07:28:50.625Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="timeit"><a href="#timeit" class="headerlink" title="timeit"></a>timeit</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line">print(timeit.timeit(stmt=<span class="string">"[i for i in range(1000)]"</span>, number=<span class="number">100000</span>))         <span class="comment"># ä¼ å…¥çš„æ˜¯å­—ç¬¦ä¸²è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment"># è¾“å‡º: </span></span><br><span class="line"><span class="comment"># 3.0182870961591375</span></span><br></pre></td></tr></table></figure><p><code>timeit</code>åªè¾“å‡ºè¢«æµ‹è¯•ä»£ç çš„æ€»è¿è¡Œæ—¶é—´, å•ä½ä¸ºç§’, æ²¡æœ‰è¯¦ç»†çš„ç»Ÿè®¡.<br><a href="/posts/6218c1b6.html">timeitçš„è¯¦ç»†ä»‹ç»ç‚¹è¿™é‡Œ</a></p><a id="more"></a><h1 id="profile-cProfile"><a href="#profile-cProfile" class="headerlink" title="profile / cProfile"></a>profile / cProfile</h1><p><code>profile</code>: <strong>çº¯Python</strong>å®ç°çš„æ€§èƒ½æµ‹è¯•æ¨¡å—, æ¥å£å’Œ<code>cProfile</code>ä¸€æ ·<br><code>cProfile</code>: <strong>cè¯­è¨€</strong>å®ç°çš„æ€§èƒ½æµ‹è¯•æ¨¡å—, æ¥å£å’Œ<code>profile</code>ä¸€æ ·</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> profile</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">fun</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100000</span>):</span><br><span class="line"><span class="meta">... </span>            a = i * i</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>profile.run(<span class="string">'fun()'</span>)</span><br><span class="line">         <span class="number">5</span> function calls <span class="keyword">in</span> <span class="number">0.016</span> seconds</span><br><span class="line"></span><br><span class="line">   Ordered by: standard name</span><br><span class="line"></span><br><span class="line">   ncalls  tottime  percall  cumtime  percall filename:lineno(function)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.016</span>    <span class="number">0.016</span> :<span class="number">0</span>(<span class="keyword">exec</span>)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> :<span class="number">0</span>(setprofile)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.016</span>    <span class="number">0.016</span>    <span class="number">0.016</span>    <span class="number">0.016</span> &lt;stdin&gt;:<span class="number">1</span>(fun)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.016</span>    <span class="number">0.016</span> &lt;string&gt;:<span class="number">1</span>(&lt;module&gt;)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.016</span>    <span class="number">0.016</span> profile:<span class="number">0</span>(fun())</span><br><span class="line">        <span class="number">0</span>    <span class="number">0.000</span>             <span class="number">0.000</span>          profile:<span class="number">0</span>(profiler)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> cProfile</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">fun</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100000</span>):</span><br><span class="line"><span class="meta">... </span>            a = i * i</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cProfile.run(<span class="string">'fun()'</span>)</span><br><span class="line">         <span class="number">4</span> function calls <span class="keyword">in</span> <span class="number">0.005</span> seconds</span><br><span class="line"></span><br><span class="line">   Ordered by: standard name</span><br><span class="line"></span><br><span class="line">   ncalls  tottime  percall  cumtime  percall filename:lineno(function)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.005</span>    <span class="number">0.005</span>    <span class="number">0.005</span>    <span class="number">0.005</span> &lt;stdin&gt;:<span class="number">1</span>(fun)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.005</span>    <span class="number">0.005</span> &lt;string&gt;:<span class="number">1</span>(&lt;module&gt;)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.005</span>    <span class="number">0.005</span> &#123;built-<span class="keyword">in</span> method builtins.<span class="keyword">exec</span>&#125;</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> &#123;method <span class="string">'disable'</span> of <span class="string">'_lsprof.Profiler'</span> objects&#125;</span><br></pre></td></tr></table></figure><h2 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> cProfile</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cProfile.run(<span class="string">'re.compile("foo|bar")'</span>)</span><br><span class="line">         <span class="number">199</span> function calls (<span class="number">194</span> primitive calls) <span class="keyword">in</span> <span class="number">0.000</span> seconds</span><br><span class="line"></span><br><span class="line">   Ordered by: standard name</span><br><span class="line"></span><br><span class="line">   ncalls  tottime  percall  cumtime  percall filename:lineno(function)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> &lt;string&gt;:<span class="number">1</span>(&lt;module&gt;)</span><br><span class="line">        <span class="number">4</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> enum.py:<span class="number">265</span>(__call__)</span><br><span class="line">        <span class="number">4</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> enum.py:<span class="number">515</span>(__new__)</span><br><span class="line">        <span class="number">2</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> enum.py:<span class="number">801</span>(__and__)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> re.py:<span class="number">231</span>(compile)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> re.py:<span class="number">286</span>(_compile)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> sre_compile.py:<span class="number">223</span>(_compile_charset)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> sre_compile.py:<span class="number">250</span>(_optimize_charset)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> sre_compile.py:<span class="number">414</span>(_get_literal_prefix)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> sre_compile.py:<span class="number">441</span>(_get_charset_prefix)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> sre_compile.py:<span class="number">482</span>(_compile_info)</span><br><span class="line">        <span class="number">2</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> sre_compile.py:<span class="number">539</span>(isstring)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> sre_compile.py:<span class="number">542</span>(_code)</span><br><span class="line">        <span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> sre_compile.py:<span class="number">557</span>(compile)</span><br><span class="line">      <span class="number">3</span>/<span class="number">1</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> sre_compile.py:<span class="number">64</span>(_compile)</span><br><span class="line">        <span class="number">3</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span>    <span class="number">0.000</span> sre_parse.py:<span class="number">111</span>(__init__)</span><br><span class="line">Â·Â·Â·Â·<span class="comment"># æ­¤å¤„çœç•¥</span></span><br></pre></td></tr></table></figure><ol><li>ä¸Šè¿°è¿è¡Œè¡¨æ˜æœ‰199ä¸ªå‡½æ•°è¢«è°ƒç”¨, å…¶ä¸­æœ‰194ä¸ªåŸç”Ÿè°ƒç”¨(å³ä¸æ¶‰åŠé€’å½’è°ƒç”¨)</li><li>æ€»å…±è¿è¡Œæ—¶é—´ 0.000 seconds</li><li>ç»“æœæŒ‰<strong>æ ‡å‡†åç§°</strong>è¿›è¡Œ<strong>æ’åº</strong></li><li>åˆ—è¡¨ä¸­<ul><li><code>ncalls</code>è¡¨ç¤ºå‡½æ•°è°ƒç”¨çš„æ¬¡æ•°(æœ‰ä¸¤ä¸ªæ•°å€¼è¡¨ç¤ºæœ‰é€’å½’è°ƒç”¨, <strong>æ€»è°ƒç”¨æ¬¡æ•°/åŸç”Ÿè°ƒç”¨æ¬¡æ•°</strong>)</li><li><code>tottime</code>æ˜¯å‡½æ•°å†…éƒ¨è°ƒç”¨æ—¶é—´(ä¸åŒ…æ‹¬ä»–è‡ªå·±è°ƒç”¨çš„å…¶ä»–å‡½æ•°çš„æ—¶é—´)</li><li>ç¬¬ä¸€ä¸ª<code>percall</code> = <code>tottime</code>/<code>ncalls</code></li><li><code>cumtime</code>ç´¯ç§¯è°ƒç”¨æ—¶é—´, å®ƒåŒ…å«äº†è‡ªå·±å†…éƒ¨è°ƒç”¨å‡½æ•°çš„æ—¶é—´</li><li>ç¬¬äºŒä¸ª<code>percall</code> = <code>cumtime</code>/<code>ncalls</code></li><li>æœ€åä¸€åˆ—: <strong>æ–‡ä»¶å, è¡Œå·, å‡½æ•°å</strong></li></ul></li></ol><h1 id="line-profiler"><a href="#line-profiler" class="headerlink" title="line_profiler"></a>line_profiler</h1><p><code>line_profiler</code>å¯ä»¥ç»Ÿè®¡<strong>æ¯è¡Œä»£ç </strong>çš„<strong>æ‰§è¡Œæ¬¡æ•°</strong>å’Œ<strong>æ‰§è¡Œæ—¶é—´</strong>ç­‰, æ—¶é—´å•ä½ä¸º<strong>å¾®ç§’</strong>ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install line_profiler</span><br></pre></td></tr></table></figure><p>å®‰è£…ä¹‹å, python ä¸‹ä¼šå¤šä¸€ä¸ª<code>kernprof.py</code></p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><ol><li><p>åœ¨éœ€è¦æµ‹è¯•çš„å‡½æ•°åŠ ä¸Š<code>@profile</code>è£…é¥°, è¿™é‡Œæˆ‘ä»¬æµ‹è¯•ä»£ç <code>test.py</code></p></li><li><p>è¿è¡Œå‘½ä»¤è¡Œ: <code>kernprof -l -v test.py</code></p></li></ol><p><img src="/images/2018-12-06-12-03-36.png" alt=""></p><ul><li><code>Total Time</code>: æµ‹è¯•ä»£ç çš„æ€»è¿è¡Œæ—¶é—´</li><li><code>File</code>: æµ‹è¯•çš„ä»£ç å</li><li><code>Function</code>: æµ‹è¯•çš„å‡½æ•°æ‰€åœ¨çš„è¡Œ</li><li><code>Line #</code>: è¡¨ç¤ºä»£ç çš„è¡Œå·</li><li><code>Hits</code>: è¡¨ç¤ºæ¯è¡Œä»£ç è¿è¡Œçš„æ¬¡æ•°</li><li><code>Time</code>: æ¯è¡Œä»£ç è¿è¡Œçš„æ€»æ—¶é—´, æ—¶é—´å•ä½ä¸º<strong>å¾®ç§’</strong></li><li><code>Per Hits</code>: æ¯è¡Œä»£ç è¿è¡Œä¸€æ¬¡çš„æ—¶é—´, æ—¶é—´å•ä½ä¸º<strong>å¾®ç§’</strong></li><li><code>% Time</code>: æ¯è¡Œä»£ç è¿è¡Œæ—¶é—´çš„ç™¾åˆ†æ¯”</li></ul><p><strong>test.py</strong><br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="meta">@profile</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span><span class="params">()</span>:</span></span><br><span class="line">    a = <span class="number">0</span></span><br><span class="line">    b = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100000</span>):</span><br><span class="line">        a = a + i * i</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        b += <span class="number">1</span></span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">    </span><br><span class="line">fun()</span><br></pre></td></tr></table></figure><p></p><h1 id="memory-profiler"><a href="#memory-profiler" class="headerlink" title="memory_profiler"></a>memory_profiler</h1><p><code>memory_profiler</code>å·¥å…·å¯ä»¥ç»Ÿè®¡æ¯è¡Œä»£ç å ç”¨çš„<strong>å†…å­˜å¤§å°</strong>ã€‚</p><h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install memory_profiler  </span><br><span class="line">pip install psutil</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><ol><li><p>åœ¨éœ€è¦æµ‹è¯•çš„å‡½æ•°åŠ ä¸Š<code>@profile</code>è£…é¥°</p></li><li><p>æ‰§è¡Œå‘½ä»¤: <code>python -m memory_profiler test.py</code></p></li></ol><p><img src="/images/2018-12-06-13-29-48.png" alt=""></p><h1 id="Pycharmå›¾å½¢åŒ–æ€§èƒ½æµ‹è¯•å·¥å…·"><a href="#Pycharmå›¾å½¢åŒ–æ€§èƒ½æµ‹è¯•å·¥å…·" class="headerlink" title="Pycharmå›¾å½¢åŒ–æ€§èƒ½æµ‹è¯•å·¥å…·"></a>Pycharmå›¾å½¢åŒ–æ€§èƒ½æµ‹è¯•å·¥å…·</h1><p>PyCharmæä¾›äº†æ€§èƒ½åˆ†æå·¥å…·<code>Run-&gt; Profile</code>, å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚åˆ©ç”¨Profileå·¥å…·å¯ä»¥å¯¹ä»£ç è¿›è¡Œæ€§èƒ½åˆ†æ, æ‰¾å‡ºç“¶é¢ˆæ‰€åœ¨<br><img src="/images/2018-12-06-13-57-16.png" alt=""></p><h2 id="ä½¿ç”¨-2"><a href="#ä½¿ç”¨-2" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>æµ‹è¯•ä»£ç è§ä¸‹æ–‡, ä¸€å…±æœ‰5ä¸ªå‡½æ•°, æ¯ä¸ªå‡½æ•°éƒ½è°ƒç”¨äº†<code>time.sleep</code>è¿›è¡Œå»¶æ—¶<br>ç‚¹å‡»<code>Run-&gt; Profile</code>å¼€å§‹æµ‹è¯•, ä»£ç è¿è¡Œç»“æŸåä¼šç”Ÿæˆä¸€æ æµ‹è¯•ç»“æœ,<br>æµ‹è¯•ç»“æœç”±ä¸¤éƒ¨åˆ†æ„æˆ, <strong>Statistics(æ€§èƒ½ç»Ÿè®¡)</strong>å’Œ<strong>Call Graph(è°ƒç”¨å…³ç³»å›¾)</strong></p><h3 id="Statistics-æ€§èƒ½ç»Ÿè®¡"><a href="#Statistics-æ€§èƒ½ç»Ÿè®¡" class="headerlink" title="Statistics(æ€§èƒ½ç»Ÿè®¡)"></a>Statistics(æ€§èƒ½ç»Ÿè®¡)</h3><p><img src="/images/2018-12-06-13-57-37.png" alt=""></p><p>æ€§èƒ½ç»Ÿè®¡ç•Œé¢ç”±<code>Name</code>ã€<code>Call Count</code>ã€<code>Time(ms)</code>ã€<code>Own Time(ms)</code> 4åˆ—ç»„æˆä¸€ä¸ªè¡¨æ ¼ã€‚</p><ol><li><code>Name</code>æ˜¾ç¤ºè¢«è°ƒç”¨çš„<strong>æ¨¡å—æˆ–è€…å‡½æ•°</strong></li><li><code>Call Count</code>æ˜¾ç¤ºè¢«è°ƒç”¨çš„æ¬¡æ•°;</li><li><code>Time(ms)</code>æ˜¾ç¤ºè¿è¡Œæ—¶é—´å’Œæ—¶é—´ç™¾åˆ†æ¯”, æ—¶é—´å•ä½ä¸ºæ¯«ç§’(ms), <strong>åŒ…å«</strong>è‡ªå·±å†…éƒ¨è°ƒç”¨å‡½æ•°çš„æ—¶é—´</li><li><code>Own Time(ms)</code>æ˜¾ç¤ºè¿è¡Œæ—¶é—´å’Œæ—¶é—´ç™¾åˆ†æ¯”, æ—¶é—´å•ä½ä¸ºæ¯«ç§’(ms), <strong>ä¸åŒ…å«</strong>è‡ªå·±å†…éƒ¨è°ƒç”¨å‡½æ•°çš„æ—¶é—´</li></ol><h4 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h4><ol><li>ç‚¹å‡»è¡¨å¤´ä¸Šçš„<strong>å°ä¸‰è§’</strong>å¯ä»¥<strong>å‡åºæˆ–é™åº</strong>æ’åˆ—è¡¨æ ¼ã€‚</li><li>åœ¨<code>Name</code>è¿™ä¸€ä¸ªåˆ—ä¸­<strong>åŒå‡»</strong>æŸä¸€è¡Œå¯ä»¥è·³è½¬åˆ°å¯¹åº”çš„ä»£ç ã€‚</li></ol><h3 id="Call-Graph-è°ƒç”¨å…³ç³»å›¾"><a href="#Call-Graph-è°ƒç”¨å…³ç³»å›¾" class="headerlink" title="Call Graph(è°ƒç”¨å…³ç³»å›¾)"></a>Call Graph(è°ƒç”¨å…³ç³»å›¾)</h3><p><img src="/images/2018-12-06-13-57-50.png" alt=""></p><p><code>Call Graph</code>(è°ƒç”¨(ç³»å›¾), åŒ…å«äº†è‡ªå·±å†…éƒ¨è°ƒç”¨å‡½æ•°çš„æ—¶é—´ç•Œé¢<strong>ç›´è§‚å±•ç¤ºäº†å„å‡½æ•°ç›´æ¥çš„è°ƒç”¨å…³ç³»</strong>ã€è¿è¡Œæ—¶é—´å’Œæ—¶é—´ç™¾åˆ†æ¯”ã€‚</p><h4 id="è§£é‡Š-1"><a href="#è§£é‡Š-1" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h4><ol><li><p>ç®­å¤´è¡¨ç¤º<strong>è°ƒç”¨å…³ç³»</strong>, ç”±è°ƒç”¨è€…æŒ‡å‘è¢«è°ƒç”¨è€…;</p></li><li><p>çŸ©å½¢çš„<strong>å·¦ä¸Šè§’</strong>æ˜¾ç¤ºæ¨¡å—æˆ–è€…å‡½æ•°çš„åç§°, <strong>å³ä¸Šè§’</strong>æ˜¾ç¤ºè¢«è°ƒç”¨çš„æ¬¡æ•°;</p></li><li><p>çŸ©å½¢<strong>ä¸­é—´</strong>æ˜¾ç¤ºè¿è¡Œæ—¶é—´å’Œæ—¶é—´ç™¾åˆ†æ¯”;</p></li><li><p>çŸ©å½¢çš„<strong>é¢œè‰²</strong>è¡¨ç¤ºè¿è¡Œæ—¶é—´æˆ–è€…æ—¶é—´ç™¾åˆ†æ¯”å¤§å°çš„è¶‹åŠ¿: <strong>çº¢è‰² &gt; é»„ç»¿è‰² &gt; ç»¿è‰²</strong>, æ¯”å¦‚ç”±å›¾å¯ä»¥çœ‹å‡ºfun3çš„çŸ©å½¢ä¸ºé»„ç»¿è‰², fun1ä¸ºç»¿è‰², æ‰€æœ‰fun3è¿è¡Œæ—¶é—´æ¯”fun1é•¿ã€‚</p></li><li><p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡º<code>test.py</code>ç›´æ¥è°ƒç”¨äº†fun3ã€fun1ã€fun2å’Œfun5å‡½æ•°; fun5å‡½æ•°ç›´æ¥è°ƒç”¨äº†fun4å‡½æ•°; fun1ã€fun2ã€fun3ã€fun4å’Œfun5éƒ½ç›´æ¥è°ƒç”¨äº†printä»¥åŠsleepå‡½æ•°; æ•´ä¸ªæµ‹è¯•ä»£ç è¿è¡Œçš„æ€»æ—¶é—´ä¸º6001ms, å…¶ä¸­fun3çš„è¿è¡Œæ—¶é—´ä¸º1999ms, æ‰€å çš„æ—¶é—´ç™¾åˆ†æ¯”ä¸º33.3%, ä¹Ÿå°±æ˜¯ 1999ms / 6006ms = 33.3%ã€‚</p></li></ol><p><strong>test.py</strong><br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># __Author__: Sdite</span></span><br><span class="line"><span class="comment"># __Email__ : a122691411@gmail.com</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    print(<span class="string">'fun1'</span>)</span><br><span class="line">    print(a, b)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun2</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'fun2'</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun3</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'fun3'</span>)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun4</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'fun4'</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun5</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'fun5'</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    fun4()</span><br><span class="line"></span><br><span class="line">fun1(<span class="string">'foo'</span>, <span class="string">'bar'</span>)</span><br><span class="line">fun2()</span><br><span class="line">fun3()</span><br><span class="line">fun5()</span><br></pre></td></tr></table></figure><p></p><h1 id="objgraph"><a href="#objgraph" class="headerlink" title="objgraph"></a>objgraph</h1><p><code>objgraph</code>æ˜¯ä¸€ä¸ªå®ç”¨æ¨¡å—, å¯ä»¥åˆ—å‡ºå½“å‰å†…å­˜ä¸­å­˜åœ¨çš„å¯¹è±¡, å¯ç”¨äºå®šä½<strong>å†…å­˜æ³„éœ²</strong></p><p>æ¨èæ–‡ç« : <a href="http://python.jobbole.com/88827/" target="_blank" rel="noopener">http://python.jobbole.com/88827/</a><br><strong>è¯¦æƒ…è¿˜æ˜¯è°·æ­Œæˆ–ç™¾åº¦ä¸€ä¸‹, æ—¥åçœ‹äº†å†è¡¥å……</strong></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;timeit&quot;&gt;&lt;a href=&quot;#timeit&quot; class=&quot;headerlink&quot; title=&quot;timeit&quot;&gt;&lt;/a&gt;timeit&lt;/h1&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; timeit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(timeit.timeit(stmt=&lt;span class=&quot;string&quot;&gt;&quot;[i for i in range(1000)]&quot;&lt;/span&gt;, number=&lt;span class=&quot;number&quot;&gt;100000&lt;/span&gt;))         &lt;span class=&quot;comment&quot;&gt;# ä¼ å…¥çš„æ˜¯å­—ç¬¦ä¸²è¡¨è¾¾å¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# è¾“å‡º: &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 3.0182870961591375&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&lt;code&gt;timeit&lt;/code&gt;åªè¾“å‡ºè¢«æµ‹è¯•ä»£ç çš„æ€»è¿è¡Œæ—¶é—´, å•ä½ä¸ºç§’, æ²¡æœ‰è¯¦ç»†çš„ç»Ÿè®¡.&lt;br&gt;&lt;a href=&quot;/posts/6218c1b6.html&quot;&gt;timeitçš„è¯¦ç»†ä»‹ç»ç‚¹è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="https://vonsdite.cn/categories/Python/"/>
    
      <category term="æ€§èƒ½æµ‹è¯•" scheme="https://vonsdite.cn/categories/Python/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="Python" scheme="https://vonsdite.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>python timetiæ¨¡å—ä½¿ç”¨</title>
    <link href="https://vonsdite.cn/posts/6218c1b6.html"/>
    <id>https://vonsdite.cn/posts/6218c1b6.html</id>
    <published>2018-12-05T15:50:42.000Z</published>
    <updated>2018-12-06T07:28:40.392Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>pythonå¯ä»¥ä½¿ç”¨<code>timeit</code>æ¨¡å—æ¥æµ‹è¯•å°æ®µä»£ç çš„è¿è¡Œæ—¶é—´.<br><code>timeit</code>ä¸»è¦çš„å‡½æ•°æœ‰<code>timeit</code>å’Œ<code>repeat</code> (è¿˜æœ‰<code>default_timer</code>, ç”¨æ³•å¯è§<a href="/posts/605d5daa.html#4-timeit-default-timer">æ–‡ç« </a>)</p><h1 id="timeitå’Œrepeatçš„å®ç°"><a href="#timeitå’Œrepeatçš„å®ç°" class="headerlink" title="timeitå’Œrepeatçš„å®ç°"></a><code>timeit</code>å’Œ<code>repeat</code>çš„å®ç°</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timeit</span><span class="params">(stmt=<span class="string">"pass"</span>, setup=<span class="string">"pass"</span>, timer=default_timer,</span></span></span><br><span class="line"><span class="function"><span class="params">               number=default_number, globals=None)</span>:</span></span><br><span class="line">    <span class="string">"""Convenience function to create Timer object and call timeit method."""</span></span><br><span class="line">    <span class="keyword">return</span> Timer(stmt, setup, timer, globals).timeit(number)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">repeat</span><span class="params">(stmt=<span class="string">"pass"</span>, setup=<span class="string">"pass"</span>, timer=default_timer,</span></span></span><br><span class="line"><span class="function"><span class="params">               repeat=default_repeat, number=default_number, globals=None)</span>:</span></span><br><span class="line">    <span class="string">"""Convenience function to create Timer object and call repeat method."""</span></span><br><span class="line">    <span class="keyword">return</span> Timer(stmt, setup, timer, globals).repeat(repeat, number)</span><br></pre></td></tr></table></figure><a id="more"></a><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­å¯è§, æ— è®ºæ˜¯<code>timeit</code>è¿˜æ˜¯<code>repeat</code>éƒ½æ˜¯å…ˆ ç”Ÿæˆ<code>Timer</code>å¯¹è±¡, ç„¶åè°ƒç”¨äº†<code>Timer</code>å¯¹è±¡çš„<code>timeit</code>æˆ–<code>repeat</code>å‡½æ•°ã€‚</p><h2 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h2><ol><li><p><strong><code>stmt</code></strong>: ç”¨äºä¼ å…¥è¦æµ‹è¯•æ—¶é—´çš„ä»£ç , å¯ä»¥ç›´æ¥æ¥å—<strong>å­—ç¬¦ä¸²çš„è¡¨è¾¾å¼</strong>, ä¹Ÿå¯ä»¥æ¥å—<strong>å•ä¸ªå˜é‡</strong>, ä¹Ÿå¯ä»¥æ¥å—<strong>å‡½æ•°</strong>ã€‚<br><strong>PS:</strong> <strong>ä¼ å…¥å‡½æ•°</strong>æ—¶è¦ä½¿ç”¨å‚æ•°<code>setup</code>å¯¼å…¥å‡½æ•° <img src="/images/ExclamationMark.png" alt=""></p></li><li><p><strong><code>setup</code></strong>: ä¼ å…¥stmtçš„<strong>è¿è¡Œç¯å¢ƒ</strong>, æ¯”å¦‚stmtä¸­ä½¿ç”¨åˆ°çš„<strong>å‚æ•°ã€å˜é‡, è¦å¯¼å…¥çš„æ¨¡å—</strong>ç­‰ã€‚å¯ä»¥å†™ä¸€è¡Œè¯­å¥, ä¹Ÿå¯ä»¥å†™å¤šè¡Œè¯­å¥, å†™å¤šè¡Œè¯­å¥æ—¶è¦ç”¨<strong>åˆ†å·;</strong>éš”å¼€è¯­å¥ã€‚</p></li><li><p><strong><code>number</code></strong>: è¦æµ‹è¯•çš„ä»£ç çš„<strong>è¿è¡Œæ¬¡æ•°</strong>, é»˜è®¤<strong>100000æ¬¡</strong>, å¯¹äºè€—æ—¶çš„ä»£ç , è¿è¡Œå¤ªå¤šæ¬¡ä¼šæ¯”è¾ƒæ…¢, æ­¤æ—¶å»ºè®®è‡ªå·±ä¿®æ”¹ä¸€ä¸‹è¿è¡Œæ¬¡æ•°</p></li><li><strong><code>repeat</code></strong>: æŒ‡<strong>æµ‹è¯•è¦é‡å¤å‡ æ¬¡</strong>, æ¯æ¬¡çš„ç»“æœæ„æˆåˆ—è¡¨è¿”å›, <strong>é»˜è®¤3æ¬¡</strong>ã€‚</li></ol><h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><p>åœ¨ä½¿ç”¨timeitæ¨¡å—æ—¶, æœ‰ä¸¤ç§æ–¹å¼</p><ol><li>ç›´æ¥ä½¿ç”¨<code>timeit.timeit()</code>ã€<code>tiemit.repeat()</code></li><li>å…ˆç”¨<code>timeit.Timer()</code>æ¥ç”Ÿæˆä¸€ä¸ª<strong>Timerå¯¹è±¡</strong>, ç„¶åå†ç”¨Timerå¯¹è±¡ç”¨<code>timeit()</code>å’Œ<code>repeat()</code>å‡½æ•°, ç›¸å¯¹çµæ´»ä¸€äº›ã€‚</li></ol><h2 id="repeatçš„ä¼˜ç‚¹"><a href="#repeatçš„ä¼˜ç‚¹" class="headerlink" title="repeatçš„ä¼˜ç‚¹"></a>repeatçš„ä¼˜ç‚¹</h2><p>å¯ä»¥å¤šæ¬¡é‡å¤æµ‹è¯•, å¹¶å¯ä»¥å¯¹æµ‹è¯•æ‰€å¾—çš„æ‰§è¡Œæ—¶é—´å–<strong>æœ€å°å€¼</strong>, <strong>å¹³å‡å€¼</strong>, <strong>æœ€å¤§å€¼</strong>, æ›´æ–¹ä¾¿åˆ†æã€‚</p><h1 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h1><h2 id="ä¾‹å­1"><a href="#ä¾‹å­1" class="headerlink" title="ä¾‹å­1"></a>ä¾‹å­1</h2><p>æµ‹è¯•ä¸€ä¸ª<strong>åˆ—è¡¨æ¨å¯¼å¼</strong> æ¯”æ­£å¸¸å†™<strong>forå¾ªç¯</strong>å¿«å¤šå°‘<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"></span><br><span class="line">foo = <span class="string">"""</span></span><br><span class="line"><span class="string">sum = []</span></span><br><span class="line"><span class="string">for i in range(1000):</span></span><br><span class="line"><span class="string">    sum.append(i)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">print(timeit.timeit(stmt=<span class="string">"[i for i in range(1000)]"</span>, number=<span class="number">100000</span>))         <span class="comment"># ä¼ å…¥çš„æ˜¯å­—ç¬¦ä¸²è¡¨è¾¾å¼</span></span><br><span class="line">print(timeit.timeit(stmt=foo, number=<span class="number">100000</span>))                            <span class="comment"># ä¼ å…¥çš„æ˜¯å˜é‡</span></span><br><span class="line"><span class="comment"># è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment"># 3.0182870961591375     </span></span><br><span class="line"><span class="comment"># 8.967388768466217</span></span><br></pre></td></tr></table></figure><p></p><h2 id="ä¾‹å­2"><a href="#ä¾‹å­2" class="headerlink" title="ä¾‹å­2"></a>ä¾‹å­2</h2><p>ä½¿ç”¨<code>timeit</code>æ¥æ¯”è¾ƒ<strong>é€’å½’æ–æ³¢é‚£å¥‘</strong>å’Œ<strong>è¿­ä»£æ–æ³¢é‚£å¥‘</strong>çš„æ—¶é—´æ•ˆç‡å·®å¼‚</p><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><p>ä»£ç ä¸­åˆ†åˆ«å®šä¹‰äº†<strong>ä¸¤ä¸ªå‡½æ•°</strong>,<br>è¦æµ‹è¯•è¿™ä¸¤ä¸ªå‡½æ•°, éœ€å¯¼å…¥è¿™ä¸¤ä¸ªå‡½æ•°,<br>å³è®¾ç½®<code>setup = from __main__ import recursive_fibonacci</code>,<br>è¡¨æ˜ä»<strong>å½“å‰è¿è¡Œçš„ä»£ç </strong>ä¸‹å¯¼å…¥è¿™ä¸¤ä¸ªå‡½æ•°ã€‚<br>å¦‚æœæ˜¯å…¶ä»–æ¨¡å—çš„, åˆ™è¦<code>import</code>åˆ«çš„æ¨¡å—è¿›æ¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">recursive_fibonacci</span><span class="params">(nth_item)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> nth_item == <span class="number">1</span> <span class="keyword">or</span> nth_item == <span class="number">2</span>:</span><br><span class="line">          <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> nth_item &lt;= <span class="number">0</span>:</span><br><span class="line">          <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> recursive_fibonacci(nth_item - <span class="number">1</span>) + recursive_fibonacci(nth_item - <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">loop_fibonacci</span><span class="params">(nth_item)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> nth_item == <span class="number">1</span> <span class="keyword">or</span> nth_item == <span class="number">2</span>:</span><br><span class="line">          <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> nth_item &lt;= <span class="number">0</span>:</span><br><span class="line">          <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    first_item, second_item = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> range(nth_item<span class="number">-2</span>):</span><br><span class="line">          first_item, second_item = second_item, first_item + second_item</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> second_item</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    print(</span><br><span class="line">          timeit.timeit(</span><br><span class="line">              stmt=<span class="string">"recursive_fibonacci(20)"</span>,</span><br><span class="line">              setup=<span class="string">"from __main__ import recursive_fibonacci"</span>, number=<span class="number">10000</span></span><br><span class="line">          )</span><br><span class="line">    )</span><br><span class="line">    print(</span><br><span class="line">          timeit.timeit(</span><br><span class="line">              stmt=<span class="string">"loop_fibonacci(20)"</span>,</span><br><span class="line">              setup=<span class="string">"from __main__ import loop_fibonacci"</span>,</span><br><span class="line">              number=<span class="number">10000</span></span><br><span class="line">          )</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><h2 id="ä¾‹å­3"><a href="#ä¾‹å­3" class="headerlink" title="ä¾‹å­3"></a>ä¾‹å­3</h2><p><code>setup</code>å‚æ•°çš„çµæ´»ä½¿ç”¨, è®¾ç½®<code>stmt</code>çš„<strong>è¿è¡Œç¯å¢ƒ</strong>çš„è¯¦ç»†ä¾‹å­<br>æ¶‰åŠ</p><ul><li>å¯¼å…¥æ¨¡å—</li><li>å˜é‡å®šä¹‰</li><li>å‡½æ•°è°ƒç”¨</li><li>å¤šè¡Œå†™<code>setup</code>è¦åŠ <strong>åˆ†å·</strong><img src="/images/ExclamationMark.png" alt="">çš„æ–¹å¼</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"></span><br><span class="line">x = <span class="string">"""</span></span><br><span class="line"><span class="string">say_hi.ParseFromString(p)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">y = <span class="string">"""</span></span><br><span class="line"><span class="string">simplejson.loads(x)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">print(</span><br><span class="line">    timeit.timeit(</span><br><span class="line">        stmt=x, </span><br><span class="line">        setup=<span class="string">"import say_hi_pb2;"</span></span><br><span class="line">            <span class="string">"say_hi = say_hi_pb2.SayHi();"</span></span><br><span class="line">            <span class="string">"say_hi.id = 13423;"</span></span><br><span class="line">            <span class="string">"say_hi.something = 'axiba';"</span></span><br><span class="line">            <span class="string">"say_hi.extra_info = 'xiba';"</span></span><br><span class="line">            <span class="string">"p =say_hi.SerializeToString()"</span>, </span><br><span class="line">            number=<span class="number">1000000</span></span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">print(</span><br><span class="line">    timeit.timeit(</span><br><span class="line">        stmt=y, </span><br><span class="line">        setup=<span class="string">"import simplejson; "</span></span><br><span class="line">            <span class="string">"json=&#123;"</span></span><br><span class="line">            <span class="string">"'id': 13423,"</span></span><br><span class="line">            <span class="string">"'something': 'axiba',"</span></span><br><span class="line">            <span class="string">"'extra_info': 'xiba',"</span></span><br><span class="line">            <span class="string">"&#125;;"</span></span><br><span class="line">            <span class="string">"x = simplejson.dumps(json)"</span>, </span><br><span class="line">        number=<span class="number">1000000</span></span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="å‘½ä»¤è¡Œè°ƒç”¨timeit"><a href="#å‘½ä»¤è¡Œè°ƒç”¨timeit" class="headerlink" title="å‘½ä»¤è¡Œè°ƒç”¨timeit"></a>å‘½ä»¤è¡Œè°ƒç”¨timeit</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">python -m timeit [-n N] [-r N] [-s S] [-t] [-c] [-h] [statement...]</span><br><span class="line"></span><br><span class="line">-n N æ‰§è¡ŒæŒ‡å®šè¯­å¥çš„æ¬¡æ•°</span><br><span class="line">-r N é‡å¤æµ‹é‡çš„æ¬¡æ•°(é»˜è®¤3æ¬¡)</span><br><span class="line">-s S æŒ‡å®šåˆå§‹åŒ–ä»£ç æ„å»ºç¯å¢ƒçš„å¯¼å…¥è¯­å¥(é»˜è®¤pass)</span><br><span class="line">python 3.3æ–°å¢</span><br><span class="line">-t ä½¿ç”¨time.time() (ä¸æ¨è)</span><br><span class="line">-c ä½¿ç”¨time.clock() (ä¸æ¨è)</span><br><span class="line">-v æ‰“å°åŸå§‹è®¡æ—¶ç»“æœ</span><br><span class="line">-h å¸®åŠ©</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ python -m timeit <span class="string">'"-".join(str(n) for n in range(100))'</span></span><br><span class="line">loops, best of 3: 40.3 usec per loop</span><br><span class="line">$ python -m timeit <span class="string">'"-".join([str(n) for n in range(100)])'</span></span><br><span class="line">loops, best of 3: 33.4 usec per loop</span><br><span class="line">$ python -m timeit <span class="string">'"-".join(map(str, range(100)))'</span></span><br><span class="line">loops, best of 3: 25.2 usec per loop</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;pythonå¯ä»¥ä½¿ç”¨&lt;code&gt;timeit&lt;/code&gt;æ¨¡å—æ¥æµ‹è¯•å°æ®µä»£ç çš„è¿è¡Œæ—¶é—´.&lt;br&gt;&lt;code&gt;timeit&lt;/code&gt;ä¸»è¦çš„å‡½æ•°æœ‰&lt;code&gt;timeit&lt;/code&gt;å’Œ&lt;code&gt;repeat&lt;/code&gt; (è¿˜æœ‰&lt;code&gt;default_timer&lt;/code&gt;, ç”¨æ³•å¯è§&lt;a href=&quot;/posts/605d5daa.html#4-timeit-default-timer&quot;&gt;æ–‡ç« &lt;/a&gt;)&lt;/p&gt;&lt;h1 id=&quot;timeitå’Œrepeatçš„å®ç°&quot;&gt;&lt;a href=&quot;#timeitå’Œrepeatçš„å®ç°&quot; class=&quot;headerlink&quot; title=&quot;timeitå’Œrepeatçš„å®ç°&quot;&gt;&lt;/a&gt;&lt;code&gt;timeit&lt;/code&gt;å’Œ&lt;code&gt;repeat&lt;/code&gt;çš„å®ç°&lt;/h1&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;timeit&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(stmt=&lt;span class=&quot;string&quot;&gt;&quot;pass&quot;&lt;/span&gt;, setup=&lt;span class=&quot;string&quot;&gt;&quot;pass&quot;&lt;/span&gt;, timer=default_timer,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;               number=default_number, globals=None)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;Convenience function to create Timer object and call timeit method.&quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; Timer(stmt, setup, timer, globals).timeit(number)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;repeat&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(stmt=&lt;span class=&quot;string&quot;&gt;&quot;pass&quot;&lt;/span&gt;, setup=&lt;span class=&quot;string&quot;&gt;&quot;pass&quot;&lt;/span&gt;, timer=default_timer,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;               repeat=default_repeat, number=default_number, globals=None)&lt;/span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;Convenience function to create Timer object and call repeat method.&quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; Timer(stmt, setup, timer, globals).repeat(repeat, number)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Python" scheme="https://vonsdite.cn/categories/Python/"/>
    
      <category term="æ€§èƒ½æµ‹è¯•" scheme="https://vonsdite.cn/categories/Python/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="Python" scheme="https://vonsdite.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Hexo Next åŠ å…¥è¯„è®ºåŠŸèƒ½gitalk</title>
    <link href="https://vonsdite.cn/posts/dd07da63.html"/>
    <id>https://vonsdite.cn/posts/dd07da63.html</id>
    <published>2018-12-05T10:30:20.000Z</published>
    <updated>2018-12-05T13:22:27.506Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="Gitalk"><a href="#Gitalk" class="headerlink" title="Gitalk"></a>Gitalk</h1><p><code>Gitalk</code>: ä¸€ä¸ªåŸºäº Github Issue å’Œ Preact å¼€å‘çš„è¯„è®ºæ’ä»¶<br>è¯¦æƒ…Demoå¯è§:<a href="https://gitalk.github.io/" target="_blank" rel="noopener">https://gitalk.github.io/</a></p><h1 id="å¢åŠ è¯„è®ºåŒº"><a href="#å¢åŠ è¯„è®ºåŒº" class="headerlink" title="å¢åŠ è¯„è®ºåŒº"></a>å¢åŠ è¯„è®ºåŒº</h1><h2 id="æ³¨å†ŒOAuth-Application"><a href="#æ³¨å†ŒOAuth-Application" class="headerlink" title="æ³¨å†ŒOAuth Application"></a>æ³¨å†ŒOAuth Application</h2><a id="more"></a><p>åœ¨GitHubä¸Šæ³¨å†Œæ–°åº”ç”¨, é“¾æ¥:<a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">https://github.com/settings/applications/new</a></p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>Application name</code></td><td>åº”ç”¨åç§°, å¯ä»¥ä»»æ„å¡«å…¥</td></tr><tr><td><code>Homepage URL</code></td><td>ç½‘ç«™URL, <strong>æ³¨æ„</strong>ç”¨https://å¼€å¤´, å¼€å¤´å¦‚<a href="https://vonsdite.cn">https://vonsdite.cn</a></td></tr><tr><td><code>Application description</code></td><td>åº”ç”¨æè¿°, å¯ä»¥ä»»æ„å¡«å…¥</td></tr><tr><td><code>Authorization callback URL</code></td><td>ç½‘ç«™URL, <strong>æ³¨æ„</strong>ç”¨https://å¼€å¤´, å¦‚<a href="https://vonsdite.cn">https://vonsdite.cn</a></td></tr></tbody></table><p><img src="/images/2018-12-05-18-39-47.png" alt=""></p><p>æ³¨å†Œåè®°ä¸‹<code>Client ID</code>å’Œ<code>Client Secret</code>, åç»­è¦ä½¿ç”¨åˆ°<br><img src="/images/2018-12-05-18-48-20.png" alt=""></p><h2 id="md5-min-js"><a href="#md5-min-js" class="headerlink" title="md5.min.js"></a>md5.min.js</h2><p>åœ¨<code>themes\next\source\js\src\</code>ç›®å½•ä¸‹åˆ›å»º<code>md5.min.js</code>, å¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹:</p><p>åŠ è¿™ä¸ªä»£ç çš„<strong>åŸå› æ˜¯</strong>: éƒ¨åˆ†æ–‡ç« çš„è¯„è®ºåŒºä¼šæŠ¥Error: Validation Failed, å…·ä½“åŸå› æ˜¯ç”±äº Github é™åˆ¶<strong>labelsé•¿åº¦</strong>ä¸èƒ½è¶…è¿‡<strong>50</strong>å¼•èµ·çš„, è¯¥é—®é¢˜è§£å†³æ–¹æ¡ˆæ¥è‡ªGitalké¡¹ç›®ä»“<a href="https://github.com/gitalk/gitalk/issues/102" target="_blank" rel="noopener">Issues 115</a>, é€šè¿‡<strong>MD5</strong>åŠ å¯†IDæ¥ç¼©çŸ­<strong>labelsé•¿åº¦</strong>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;<span class="string">"use strict"</span>;<span class="function"><span class="keyword">function</span> <span class="title">t</span>(<span class="params">n,t</span>)</span>&#123;<span class="keyword">var</span> r=(<span class="number">65535</span>&amp;n)+(<span class="number">65535</span>&amp;t);<span class="keyword">return</span>(n&gt;&gt;<span class="number">16</span>)+(t&gt;&gt;<span class="number">16</span>)+(r&gt;&gt;<span class="number">16</span>)&lt;&lt;<span class="number">16</span>|<span class="number">65535</span>&amp;r&#125;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params">n,t</span>)</span>&#123;<span class="keyword">return</span> n&lt;&lt;t|n&gt;&gt;&gt;<span class="number">32</span>-t&#125;<span class="function"><span class="keyword">function</span> <span class="title">e</span>(<span class="params">n,e,o,u,c,f</span>)</span>&#123;<span class="keyword">return</span> t(r(t(t(e,n),t(u,f)),c),o)&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params">n,t,r,o,u,c,f</span>)</span>&#123;<span class="keyword">return</span> e(t&amp;r|~t&amp;o,n,t,u,c,f)&#125;<span class="function"><span class="keyword">function</span> <span class="title">u</span>(<span class="params">n,t,r,o,u,c,f</span>)</span>&#123;<span class="keyword">return</span> e(t&amp;o|r&amp;~o,n,t,u,c,f)&#125;<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">n,t,r,o,u,c,f</span>)</span>&#123;<span class="keyword">return</span> e(t^r^o,n,t,u,c,f)&#125;<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">n,t,r,o,u,c,f</span>)</span>&#123;<span class="keyword">return</span> e(r^(t|~o),n,t,u,c,f)&#125;<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">n,r</span>)</span>&#123;n[r&gt;&gt;<span class="number">5</span>]|=<span class="number">128</span>&lt;&lt;r%<span class="number">32</span>,n[<span class="number">14</span>+(r+<span class="number">64</span>&gt;&gt;&gt;<span class="number">9</span>&lt;&lt;<span class="number">4</span>)]=r;<span class="keyword">var</span> e,i,a,d,h,l=<span class="number">1732584193</span>,g=<span class="number">-271733879</span>,v=<span class="number">-1732584194</span>,m=<span class="number">271733878</span>;<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;n.length;e+=<span class="number">16</span>)i=l,a=g,d=v,h=m,g=f(g=f(g=f(g=f(g=c(g=c(g=c(g=c(g=u(g=u(g=u(g=u(g=o(g=o(g=o(g=o(g,v=o(v,m=o(m,l=o(l,g,v,m,n[e],<span class="number">7</span>,<span class="number">-680876936</span>),g,v,n[e+<span class="number">1</span>],<span class="number">12</span>,<span class="number">-389564586</span>),l,g,n[e+<span class="number">2</span>],<span class="number">17</span>,<span class="number">606105819</span>),m,l,n[e+<span class="number">3</span>],<span class="number">22</span>,<span class="number">-1044525330</span>),v=o(v,m=o(m,l=o(l,g,v,m,n[e+<span class="number">4</span>],<span class="number">7</span>,<span class="number">-176418897</span>),g,v,n[e+<span class="number">5</span>],<span class="number">12</span>,<span class="number">1200080426</span>),l,g,n[e+<span class="number">6</span>],<span class="number">17</span>,<span class="number">-1473231341</span>),m,l,n[e+<span class="number">7</span>],<span class="number">22</span>,<span class="number">-45705983</span>),v=o(v,m=o(m,l=o(l,g,v,m,n[e+<span class="number">8</span>],<span class="number">7</span>,<span class="number">1770035416</span>),g,v,n[e+<span class="number">9</span>],<span class="number">12</span>,<span class="number">-1958414417</span>),l,g,n[e+<span class="number">10</span>],<span class="number">17</span>,<span class="number">-42063</span>),m,l,n[e+<span class="number">11</span>],<span class="number">22</span>,<span class="number">-1990404162</span>),v=o(v,m=o(m,l=o(l,g,v,m,n[e+<span class="number">12</span>],<span class="number">7</span>,<span class="number">1804603682</span>),g,v,n[e+<span class="number">13</span>],<span class="number">12</span>,<span class="number">-40341101</span>),l,g,n[e+<span class="number">14</span>],<span class="number">17</span>,<span class="number">-1502002290</span>),m,l,n[e+<span class="number">15</span>],<span class="number">22</span>,<span class="number">1236535329</span>),v=u(v,m=u(m,l=u(l,g,v,m,n[e+<span class="number">1</span>],<span class="number">5</span>,<span class="number">-165796510</span>),g,v,n[e+<span class="number">6</span>],<span class="number">9</span>,<span class="number">-1069501632</span>),l,g,n[e+<span class="number">11</span>],<span class="number">14</span>,<span class="number">643717713</span>),m,l,n[e],<span class="number">20</span>,<span class="number">-373897302</span>),v=u(v,m=u(m,l=u(l,g,v,m,n[e+<span class="number">5</span>],<span class="number">5</span>,<span class="number">-701558691</span>),g,v,n[e+<span class="number">10</span>],<span class="number">9</span>,<span class="number">38016083</span>),l,g,n[e+<span class="number">15</span>],<span class="number">14</span>,<span class="number">-660478335</span>),m,l,n[e+<span class="number">4</span>],<span class="number">20</span>,<span class="number">-405537848</span>),v=u(v,m=u(m,l=u(l,g,v,m,n[e+<span class="number">9</span>],<span class="number">5</span>,<span class="number">568446438</span>),g,v,n[e+<span class="number">14</span>],<span class="number">9</span>,<span class="number">-1019803690</span>),l,g,n[e+<span class="number">3</span>],<span class="number">14</span>,<span class="number">-187363961</span>),m,l,n[e+<span class="number">8</span>],<span class="number">20</span>,<span class="number">1163531501</span>),v=u(v,m=u(m,l=u(l,g,v,m,n[e+<span class="number">13</span>],<span class="number">5</span>,<span class="number">-1444681467</span>),g,v,n[e+<span class="number">2</span>],<span class="number">9</span>,<span class="number">-51403784</span>),l,g,n[e+<span class="number">7</span>],<span class="number">14</span>,<span class="number">1735328473</span>),m,l,n[e+<span class="number">12</span>],<span class="number">20</span>,<span class="number">-1926607734</span>),v=c(v,m=c(m,l=c(l,g,v,m,n[e+<span class="number">5</span>],<span class="number">4</span>,<span class="number">-378558</span>),g,v,n[e+<span class="number">8</span>],<span class="number">11</span>,<span class="number">-2022574463</span>),l,g,n[e+<span class="number">11</span>],<span class="number">16</span>,<span class="number">1839030562</span>),m,l,n[e+<span class="number">14</span>],<span class="number">23</span>,<span class="number">-35309556</span>),v=c(v,m=c(m,l=c(l,g,v,m,n[e+<span class="number">1</span>],<span class="number">4</span>,<span class="number">-1530992060</span>),g,v,n[e+<span class="number">4</span>],<span class="number">11</span>,<span class="number">1272893353</span>),l,g,n[e+<span class="number">7</span>],<span class="number">16</span>,<span class="number">-155497632</span>),m,l,n[e+<span class="number">10</span>],<span class="number">23</span>,<span class="number">-1094730640</span>),v=c(v,m=c(m,l=c(l,g,v,m,n[e+<span class="number">13</span>],<span class="number">4</span>,<span class="number">681279174</span>),g,v,n[e],<span class="number">11</span>,<span class="number">-358537222</span>),l,g,n[e+<span class="number">3</span>],<span class="number">16</span>,<span class="number">-722521979</span>),m,l,n[e+<span class="number">6</span>],<span class="number">23</span>,<span class="number">76029189</span>),v=c(v,m=c(m,l=c(l,g,v,m,n[e+<span class="number">9</span>],<span class="number">4</span>,<span class="number">-640364487</span>),g,v,n[e+<span class="number">12</span>],<span class="number">11</span>,<span class="number">-421815835</span>),l,g,n[e+<span class="number">15</span>],<span class="number">16</span>,<span class="number">530742520</span>),m,l,n[e+<span class="number">2</span>],<span class="number">23</span>,<span class="number">-995338651</span>),v=f(v,m=f(m,l=f(l,g,v,m,n[e],<span class="number">6</span>,<span class="number">-198630844</span>),g,v,n[e+<span class="number">7</span>],<span class="number">10</span>,<span class="number">1126891415</span>),l,g,n[e+<span class="number">14</span>],<span class="number">15</span>,<span class="number">-1416354905</span>),m,l,n[e+<span class="number">5</span>],<span class="number">21</span>,<span class="number">-57434055</span>),v=f(v,m=f(m,l=f(l,g,v,m,n[e+<span class="number">12</span>],<span class="number">6</span>,<span class="number">1700485571</span>),g,v,n[e+<span class="number">3</span>],<span class="number">10</span>,<span class="number">-1894986606</span>),l,g,n[e+<span class="number">10</span>],<span class="number">15</span>,<span class="number">-1051523</span>),m,l,n[e+<span class="number">1</span>],<span class="number">21</span>,<span class="number">-2054922799</span>),v=f(v,m=f(m,l=f(l,g,v,m,n[e+<span class="number">8</span>],<span class="number">6</span>,<span class="number">1873313359</span>),g,v,n[e+<span class="number">15</span>],<span class="number">10</span>,<span class="number">-30611744</span>),l,g,n[e+<span class="number">6</span>],<span class="number">15</span>,<span class="number">-1560198380</span>),m,l,n[e+<span class="number">13</span>],<span class="number">21</span>,<span class="number">1309151649</span>),v=f(v,m=f(m,l=f(l,g,v,m,n[e+<span class="number">4</span>],<span class="number">6</span>,<span class="number">-145523070</span>),g,v,n[e+<span class="number">11</span>],<span class="number">10</span>,<span class="number">-1120210379</span>),l,g,n[e+<span class="number">2</span>],<span class="number">15</span>,<span class="number">718787259</span>),m,l,n[e+<span class="number">9</span>],<span class="number">21</span>,<span class="number">-343485551</span>),l=t(l,i),g=t(g,a),v=t(v,d),m=t(m,h);<span class="keyword">return</span>[l,g,v,m]&#125;<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">var</span> t,r=<span class="string">""</span>,e=<span class="number">32</span>*n.length;<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;e;t+=<span class="number">8</span>)r+=<span class="built_in">String</span>.fromCharCode(n[t&gt;&gt;<span class="number">5</span>]&gt;&gt;&gt;t%<span class="number">32</span>&amp;<span class="number">255</span>);<span class="keyword">return</span> r&#125;<span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">var</span> t,r=[];<span class="keyword">for</span>(r[(n.length&gt;&gt;<span class="number">2</span>)<span class="number">-1</span>]=<span class="keyword">void</span> <span class="number">0</span>,t=<span class="number">0</span>;t&lt;r.length;t+=<span class="number">1</span>)r[t]=<span class="number">0</span>;<span class="keyword">var</span> e=<span class="number">8</span>*n.length;<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;e;t+=<span class="number">8</span>)r[t&gt;&gt;<span class="number">5</span>]|=(<span class="number">255</span>&amp;n.charCodeAt(t/<span class="number">8</span>))&lt;&lt;t%<span class="number">32</span>;<span class="keyword">return</span> r&#125;<span class="function"><span class="keyword">function</span> <span class="title">h</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">return</span> a(i(d(n),<span class="number">8</span>*n.length))&#125;<span class="function"><span class="keyword">function</span> <span class="title">l</span>(<span class="params">n,t</span>)</span>&#123;<span class="keyword">var</span> r,e,o=d(n),u=[],c=[];<span class="keyword">for</span>(u[<span class="number">15</span>]=c[<span class="number">15</span>]=<span class="keyword">void</span> <span class="number">0</span>,o.length&gt;<span class="number">16</span>&amp;&amp;(o=i(o,<span class="number">8</span>*n.length)),r=<span class="number">0</span>;r&lt;<span class="number">16</span>;r+=<span class="number">1</span>)u[r]=<span class="number">909522486</span>^o[r],c[r]=<span class="number">1549556828</span>^o[r];<span class="keyword">return</span> e=i(u.concat(d(t)),<span class="number">512</span>+<span class="number">8</span>*t.length),a(i(c.concat(e),<span class="number">640</span>))&#125;<span class="function"><span class="keyword">function</span> <span class="title">g</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">var</span> t,r,e=<span class="string">""</span>;<span class="keyword">for</span>(r=<span class="number">0</span>;r&lt;n.length;r+=<span class="number">1</span>)t=n.charCodeAt(r),e+=<span class="string">"0123456789abcdef"</span>.charAt(t&gt;&gt;&gt;<span class="number">4</span>&amp;<span class="number">15</span>)+<span class="string">"0123456789abcdef"</span>.charAt(<span class="number">15</span>&amp;t);<span class="keyword">return</span> e&#125;<span class="function"><span class="keyword">function</span> <span class="title">v</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">return</span> <span class="built_in">unescape</span>(<span class="built_in">encodeURIComponent</span>(n))&#125;<span class="function"><span class="keyword">function</span> <span class="title">m</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">return</span> h(v(n))&#125;<span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">return</span> g(m(n))&#125;<span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params">n,t</span>)</span>&#123;<span class="keyword">return</span> l(v(n),v(t))&#125;<span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params">n,t</span>)</span>&#123;<span class="keyword">return</span> g(s(n,t))&#125;<span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params">n,t,r</span>)</span>&#123;<span class="keyword">return</span> t?r?s(t,n):C(t,n):r?m(n):p(n)&#125;<span class="string">"function"</span>==<span class="keyword">typeof</span> define&amp;&amp;define.amd?define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> A&#125;):<span class="string">"object"</span>==<span class="keyword">typeof</span> <span class="built_in">module</span>&amp;&amp;<span class="built_in">module</span>.exports?<span class="built_in">module</span>.exports=A:n.md5=A&#125;(<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure><h2 id="æ–°å»ºgitalk-swig"><a href="#æ–°å»ºgitalk-swig" class="headerlink" title="æ–°å»ºgitalk.swig"></a>æ–°å»ºgitalk.swig</h2><p>åœ¨ç«™ç‚¹ç›®å½•ä¸‹, <code>themes/next/layout/_third-party/comments/</code>ä¸‹æ–°å»º<code>gitalk.swig</code>æ–‡ä»¶, å¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if page.comments &amp;&amp; theme.gitalk.enable %&#125;</span><br><span class="line">  &lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/gitalk/dist/gitalk.css&quot;&gt;</span><br><span class="line">  &lt;script src=&quot;https://unpkg.com/gitalk/dist/gitalk.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=&quot;/js/src/md5.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">   &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">        var gitalk = new Gitalk(&#123;</span><br><span class="line">          clientID: &apos;&#123;&#123; theme.gitalk.ClientID &#125;&#125;&apos;,</span><br><span class="line">          clientSecret: &apos;&#123;&#123; theme.gitalk.ClientSecret &#125;&#125;&apos;,</span><br><span class="line">          repo: &apos;&#123;&#123; theme.gitalk.repo &#125;&#125;&apos;,</span><br><span class="line">          owner: &apos;&#123;&#123; theme.gitalk.githubID &#125;&#125;&apos;,</span><br><span class="line">          admin: [&apos;&#123;&#123; theme.gitalk.adminUser &#125;&#125;&apos;],</span><br><span class="line">          id: md5(location.pathname),</span><br><span class="line">          distractionFreeMode: &apos;&#123;&#123; theme.gitalk.distractionFreeMode &#125;&#125;&apos;</span><br><span class="line">        &#125;)</span><br><span class="line">        gitalk.render(&apos;gitalk-container&apos;)           </span><br><span class="line">       &lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹comments-swig"><a href="#ä¿®æ”¹comments-swig" class="headerlink" title="ä¿®æ”¹comments.swig"></a>ä¿®æ”¹comments.swig</h2><p>ä¿®æ”¹<code>themes/next/layout/_partials/comments.swig</code>, æ·»åŠ å†…å®¹å¦‚ä¸‹, (åœ¨å€’æ•°ç¬¬äºŒä¸ª<code>endif</code>å‰):<br><img src="/images/2018-12-05-18-53-21.png" alt=""></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% elseif theme.gitalk.enable %&#125;</span><br><span class="line"> &lt;div id=&quot;gitalk-container&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹index-swig"><a href="#ä¿®æ”¹index-swig" class="headerlink" title="ä¿®æ”¹index.swig"></a>ä¿®æ”¹index.swig</h2><p>ä¿®æ”¹<code>themes/next/layout/_third-party/comments/index.swig</code>, åœ¨æœ€åä¸€è¡Œæ·»åŠ å†…å®¹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include &apos;gitalk.swig&apos; %&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–°å»ºgitalk-styl"><a href="#æ–°å»ºgitalk-styl" class="headerlink" title="æ–°å»ºgitalk.styl"></a>æ–°å»ºgitalk.styl</h2><p>åœ¨<code>themes/next/source/css/_common/components/third-party/</code>ç›®å½•ä¸‹æ–°å»º<code>gitalk.styl</code>, å¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹:</p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.gt-header</span> <span class="selector-tag">a</span>, <span class="selector-class">.gt-comments</span> <span class="selector-tag">a</span>, <span class="selector-class">.gt-popup</span> a</span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line"><span class="selector-class">.gt-container</span> <span class="selector-class">.gt-popup</span> <span class="selector-class">.gt-action</span><span class="selector-class">.is--active</span>:before</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0.7em</span>;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹third-party-styl"><a href="#ä¿®æ”¹third-party-styl" class="headerlink" title="ä¿®æ”¹third-party.styl"></a>ä¿®æ”¹third-party.styl</h2><p>ä¿®æ”¹<code>themes/next/source/css/_common/components/third-party/third-party.styl</code>, åœ¨æœ€åä¸€è¡Œä¸Šæ·»åŠ å†…å®¹:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import "gitalk";</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶-config-yml"><a href="#ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶-config-yml" class="headerlink" title="ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶_config.yml"></a>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶_config.yml</h2><p>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶<code>themes/next/_config.yml</code>ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:<br></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gitalk:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  githubID:</span> <span class="string">githubå¸å·</span>           <span class="comment"># ä¾‹ï¼švonsdite   æ³¨æ„å¿…é¡»å°å†™ </span></span><br><span class="line"><span class="attr">  repo:</span> <span class="string">ä»“åº“åç§°</span>                 <span class="comment"># ä¾‹ï¼švonsdite.github.io</span></span><br><span class="line"><span class="attr">  ClientID:</span> <span class="string">Client</span> <span class="string">ID</span>           <span class="comment"># ä¸Šæ–‡æ³¨å†Œ OAuth Applicationåå¾—åˆ°çš„å€¼</span></span><br><span class="line"><span class="attr">  ClientSecret:</span> <span class="string">Client</span> <span class="string">Secret</span>   <span class="comment"># ä¸Šæ–‡æ³¨å†Œ OAuth Applicationåå¾—åˆ°çš„å€¼</span></span><br><span class="line"><span class="attr">  adminUser:</span> <span class="string">githubå¸å·</span>         <span class="comment"># æŒ‡å®šå¯åˆå§‹åŒ–è¯„è®ºè´¦æˆ·, ä¾‹ï¼švonsdite   æ³¨æ„å¿…é¡»å°å†™ </span></span><br><span class="line"><span class="attr">  distractionFreeMode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p></p><p>ä»¥ä¸Šå°±æ˜¯<code>Next</code>ä¸­æ·»åŠ <strong>gitalkè¯„è®º</strong>çš„é…ç½®ã€‚</p><h2 id="å¼€å¯è¯„è®º"><a href="#å¼€å¯è¯„è®º" class="headerlink" title="å¼€å¯è¯„è®º"></a>å¼€å¯è¯„è®º</h2><p>åšå®¢ä¸Šä¼ åˆ°GitHubä¸Šå, æ‰“å¼€é¡µé¢<strong>è¿›å…¥æŸä¸€ç¯‡æ–‡ç« </strong><br>æ­¤æ—¶ä¼šçœ‹åˆ°å¦‚ä¸‹<br><img src="/images/2018-12-05-20-17-12.png" alt=""></p><p>å¦‚æœä¸Šè¿°é…ç½®å‡æ— è¯¯, ç‚¹å‡»<strong>ä½¿ç”¨GitHubç™»å½•</strong>å°±ä¼šå»ºç«‹ä¸€ä¸ªè¯„è®ºåŒº(å®é™…ä¸Šæ˜¯åœ¨ä½ çš„Githubåšå®¢ä»“åº“ä¸‹å¼€äº†ä¸€ä¸ª<strong>Issue</strong>)</p><h1 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h1><p>å¦‚æœä½ æŸä¸€ç¯‡æ–‡ç« ä¸æƒ³æœ‰è¯„è®ºåŠŸèƒ½, ä½ å¯ä»¥åœ¨æ–‡ç« çš„<code>font-matter</code>ä¸­åŠ å…¥ <code>comments: false</code></p><p><img src="/images/2018-12-05-21-19-05.png" alt=""></p><p>å› ä¸ºåŠ å…¥äº†è¯„è®ºåŠŸèƒ½, åœ¨<code>æ ‡ç­¾</code>ã€<code>åˆ†ç±»</code>é¡µé¢éƒ½ä¼šæœ‰ä¸ªè¯„è®ºåŒº, æ‰€ä»¥åº”åˆ°ç›¸åº”é¡µé¢çš„<code>index.md</code>çš„<code>font-matter</code>ä¸­åŠ å…¥ <code>comments: false</code></p><p><strong>å¹¶ä¿®æ”¹ç«™ç‚¹ç›®å½•ä¸‹<code>scaffolds</code>çš„<code>page.md</code>æ¨¡æ¿</strong>, å› ä¸ºåˆ›å»º<code>page</code>éƒ½ä¼š<strong>ä½¿ç”¨åˆ°è¯¥æ¨¡æ¿</strong>, è€Œé¡µé¢ä¸éœ€è¦æœ‰è¯„è®ºåŒº<br></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&#123;&#123;</span> <span class="string">title</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="attr">date:</span> <span class="string">&#123;&#123;</span> <span class="string">date</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="attr">type:</span> </span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;Gitalk&quot;&gt;&lt;a href=&quot;#Gitalk&quot; class=&quot;headerlink&quot; title=&quot;Gitalk&quot;&gt;&lt;/a&gt;Gitalk&lt;/h1&gt;&lt;p&gt;&lt;code&gt;Gitalk&lt;/code&gt;: ä¸€ä¸ªåŸºäº Github Issue å’Œ Preact å¼€å‘çš„è¯„è®ºæ’ä»¶&lt;br&gt;è¯¦æƒ…Demoå¯è§:&lt;a href=&quot;https://gitalk.github.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://gitalk.github.io/&lt;/a&gt;&lt;/p&gt;&lt;h1 id=&quot;å¢åŠ è¯„è®ºåŒº&quot;&gt;&lt;a href=&quot;#å¢åŠ è¯„è®ºåŒº&quot; class=&quot;headerlink&quot; title=&quot;å¢åŠ è¯„è®ºåŒº&quot;&gt;&lt;/a&gt;å¢åŠ è¯„è®ºåŒº&lt;/h1&gt;&lt;h2 id=&quot;æ³¨å†ŒOAuth-Application&quot;&gt;&lt;a href=&quot;#æ³¨å†ŒOAuth-Application&quot; class=&quot;headerlink&quot; title=&quot;æ³¨å†ŒOAuth Application&quot;&gt;&lt;/a&gt;æ³¨å†ŒOAuth Application&lt;/h2&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://vonsdite.cn/categories/Hexo/"/>
    
      <category term="Next" scheme="https://vonsdite.cn/categories/Hexo/Next/"/>
    
    
      <category term="Hexo" scheme="https://vonsdite.cn/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hexo Nextä¸»é¢˜çš„TOCè®¾ç½®æˆä¸æ˜¯é€çº§å±•å¼€</title>
    <link href="https://vonsdite.cn/posts/6c0dbfd2.html"/>
    <id>https://vonsdite.cn/posts/6c0dbfd2.html</id>
    <published>2018-12-05T07:44:11.000Z</published>
    <updated>2018-12-05T08:07:49.029Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä½¿ç”¨<code>Hexo</code> + <code>Next</code> ä¸»é¢˜ç¼–å†™æ–‡ç« æ—¶, <code>Next</code>ä¸»é¢˜ä¼šè‡ªåŠ¨ç»™æ–‡ç« ç”Ÿæˆ<code>TOC</code>ç›®å½•, å¦‚å›¾<br><img src="/images/2018-12-05-15-57-19.png" alt=""></p><a id="more"></a><p><img src="/images/2018-12-05-15-57-37.png" alt=""></p><p>åªæœ‰å½“ä½ ä¸‹æ‹‰æµè§ˆåˆ°ç›¸åº”çš„<strong>ç›®å½•çº§</strong>æ—¶, <code>TOC</code>ç›®å½•æ‰ä¼šå±•å¼€, è¿™<strong>ä¸æ–¹ä¾¿</strong>åˆ«äºº<strong>ä¸€æ¬¡æ€§</strong>çœ‹åˆ°æ‰€æœ‰çš„ç›®å½•</p><p><br></p><p>å¦‚æœæƒ³æœ€å¼€å§‹æ‰“å¼€æ–‡ç« ä¸€æ¬¡æ€§å°±æŠŠ<code>TOC</code>ç›®å½•å…¨éƒ¨å±•å¼€, å¯è¿›è¡Œå¦‚ä¸‹çš„ä¿®æ”¹<br>æ‰“å¼€ç«™ç‚¹ç›®å½•ä¸‹çš„<code>themes/next/source/css/_common/components/sidebar/sidebar-toc.styl</code></p><p>æ‰¾åˆ°å¦‚ä¸‹çš„ä»£ç <br></p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post-toc</span> <span class="selector-class">.nav</span> <span class="selector-class">.nav-child</span> &#123; <span class="attribute">display</span>: none; &#125;</span><br></pre></td></tr></table></figure><p></p><p>ä¿®æ”¹ä¸º<br></p><figure class="highlight styl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post-toc</span> <span class="selector-class">.nav</span> <span class="selector-class">.nav-child</span> &#123; <span class="attribute">display</span>: block; &#125;</span><br></pre></td></tr></table></figure><p></p><p>è¿™æ ·æ—¢å¯å®Œæˆæƒ³è¦çš„åŠŸèƒ½</p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;ä½¿ç”¨&lt;code&gt;Hexo&lt;/code&gt; + &lt;code&gt;Next&lt;/code&gt; ä¸»é¢˜ç¼–å†™æ–‡ç« æ—¶, &lt;code&gt;Next&lt;/code&gt;ä¸»é¢˜ä¼šè‡ªåŠ¨ç»™æ–‡ç« ç”Ÿæˆ&lt;code&gt;TOC&lt;/code&gt;ç›®å½•, å¦‚å›¾&lt;br&gt;&lt;img src=&quot;/images/2018-12-05-15-57-19.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://vonsdite.cn/categories/Hexo/"/>
    
      <category term="Next" scheme="https://vonsdite.cn/categories/Hexo/Next/"/>
    
    
      <category term="Hexo" scheme="https://vonsdite.cn/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>python ä»£ç è¿è¡Œè®¡æ—¶å‡½æ•°æ¯”è¾ƒ</title>
    <link href="https://vonsdite.cn/posts/605d5daa.html"/>
    <id>https://vonsdite.cn/posts/605d5daa.html</id>
    <published>2018-12-04T10:23:44.000Z</published>
    <updated>2018-12-04T17:23:47.653Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="è®¡æ—¶å‡½æ•°"><a href="#è®¡æ—¶å‡½æ•°" class="headerlink" title="è®¡æ—¶å‡½æ•°"></a>è®¡æ—¶å‡½æ•°</h1><p>è®¡ç®—pythonæŸä¸ªç¨‹åºæˆ–è€…ä»£ç å—çš„<strong>è¿è¡Œæ—¶é—´</strong>, å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><a href="/posts/605d5daa.html#1-datetime-datetime-now">datetime.datetime.now()</a></td><td>è¯¥æ–¹æ³•åŒ…å«äº†å…¶ä»–ç¨‹åºä½¿ç”¨CPUçš„æ—¶é—´, <strong>ä¸æ¨è</strong></td></tr><tr><td><a href="/posts/605d5daa.html#2-time-time">time.time()</a></td><td><code>Unix</code>ç³»ç»Ÿä¸‹, å»ºè®®ä½¿ç”¨</td></tr><tr><td><a href="/posts/605d5daa.html#3-time-clock">time.clock()</a></td><td><code>Windows</code>ç³»ç»Ÿä¸‹, å»ºè®®ä½¿ç”¨</td></tr><tr><td><a href="/posts/605d5daa.html#4-timeit-default-timer">timeit.default_timer()</a></td><td>è·¨å¹³å°ä½¿ç”¨, <strong>æœ€æ¨è</strong><img src="/images/recommend.png" alt=""></td></tr></tbody></table><a id="more"></a><p><img src="/images/2018-12-05-01-08-07.png" alt=""></p><blockquote><p><code>time.clock()</code>è¿”å›çš„æ˜¯å¤„ç†å™¨æ—¶é—´, è€Œå› ä¸º<strong>Unix</strong>ä¸­<strong>jiffy</strong>çš„ç¼˜æ•…, æ‰€ä»¥ç²¾åº¦ä¸ä¼šå¤ªé«˜<br>ç©¶ç«Ÿæ˜¯ä½¿ç”¨<code>time.clock()</code>, è¿˜æ˜¯ä½¿ç”¨<code>time.time()</code>, ç”±å¹³å°æ¥å†³å®š<br>æ€»æ¦‚æ¥è®², åœ¨<strong>Unixç³»ç»Ÿ</strong>ä¸­, å»ºè®®ä½¿ç”¨<code>time.time()</code>,<br>åœ¨<strong>Windowsç³»ç»Ÿ</strong>ä¸­, å»ºè®®ä½¿ç”¨<code>time.clock()</code>.<br>è¦å®ç°è·¨å¹³å°çš„ç²¾åº¦æ€§, ä½¿ç”¨<code>timeit</code>æ¥ä»£æ›¿<code>time</code>.</p></blockquote><h2 id="1-datetime-datetime-now"><a href="#1-datetime-datetime-now" class="headerlink" title="1.datetime.datetime.now"></a>1.datetime.datetime.now</h2><p>è¯¥æ–¹æ³•åŒ…å«äº†å…¶ä»–ç¨‹åºä½¿ç”¨CPUçš„æ—¶é—´<br><strong>ä¸æ¨è</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_datetime</span><span class="params">()</span>:</span></span><br><span class="line">    start = datetime.datetime.now()</span><br><span class="line">    time.sleep(<span class="number">100</span>)</span><br><span class="line">    end = datetime.datetime.now()</span><br><span class="line">    print(<span class="string">"test datetime():"</span>, <span class="string">"%fms"</span> % (float((end - start).microseconds) / <span class="number">1000</span>))</span><br></pre></td></tr></table></figure><h2 id="2-time-time"><a href="#2-time-time" class="headerlink" title="2.time.time"></a>2.time.time</h2><p>è¯¥æ–¹æ³•åŒ…å«äº†å…¶ä»–ç¨‹åºä½¿ç”¨CPUçš„æ—¶é—´, è¿”å›å€¼æ˜¯æµ®ç‚¹æ•°<br><strong>Unixç³»ç»Ÿä¸‹æ¨è</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_time</span><span class="params">()</span>:</span></span><br><span class="line">    start = time.time()</span><br><span class="line">    time.sleep(<span class="number">100</span>)</span><br><span class="line">    end = time.time()</span><br><span class="line">    print(<span class="string">"test time():"</span>, <span class="string">"%fms"</span> % ((end - start) * <span class="number">1000</span>))</span><br></pre></td></tr></table></figure><h2 id="3-time-clock"><a href="#3-time-clock" class="headerlink" title="3.time.clock"></a>3.time.clock</h2><p>åªè®¡ç®—ç¨‹åºè¿è¡ŒCPUçš„æ—¶é—´<br><strong>Windowsç³»ç»Ÿä¸‹æ¨è</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_clock</span><span class="params">()</span>:</span></span><br><span class="line">    start = time.clock()</span><br><span class="line">    time.sleep(<span class="number">100</span>)</span><br><span class="line">    end = time.clock()</span><br><span class="line">    print(<span class="string">"test clock():"</span>, <span class="string">"%fms"</span> % ((end - start) * <span class="number">1000</span>))</span><br></pre></td></tr></table></figure><h2 id="4-timeit-default-timer"><a href="#4-timeit-default-timer" class="headerlink" title="4.timeit.default_timer"></a>4.timeit.default_timer</h2><p><strong>å®ç°è·¨å¹³å°</strong>çš„ç²¾åº¦æ€§</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_timeit</span><span class="params">()</span>:</span></span><br><span class="line">    start = timeit.default_timer()</span><br><span class="line">    time.sleep(<span class="number">100</span>)</span><br><span class="line">    end = timeit.default_timer()</span><br><span class="line">    print(<span class="string">"test timeit():"</span>, <span class="string">"%fms"</span> % ((end - start) * <span class="number">1000</span>))</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h2><p>ç»“æœå¦‚å›¾:<br><img src="/images/2018-12-04-21-09-26.png" alt=""></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">SLEEP_TIME = <span class="number">0.001</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_datetime</span><span class="params">()</span>:</span></span><br><span class="line">    start = datetime.datetime.now()</span><br><span class="line">    time.sleep(SLEEP_TIME)</span><br><span class="line">    end = datetime.datetime.now()</span><br><span class="line">    print(<span class="string">"test datetime():"</span>, <span class="string">"%fms"</span> % (float((end - start).microseconds) / <span class="number">1000</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_time</span><span class="params">()</span>:</span></span><br><span class="line">    start = time.time()</span><br><span class="line">    time.sleep(SLEEP_TIME)</span><br><span class="line">    end = time.time()</span><br><span class="line">    print(<span class="string">"test time():"</span>, <span class="string">"%fms"</span> % ((end - start) * <span class="number">1000</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_clock</span><span class="params">()</span>:</span></span><br><span class="line">    start = time.clock()</span><br><span class="line">    time.sleep(SLEEP_TIME)</span><br><span class="line">    end = time.clock()</span><br><span class="line">    print(<span class="string">"test clock():"</span>, <span class="string">"%fms"</span> % ((end - start) * <span class="number">1000</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_timeit</span><span class="params">()</span>:</span></span><br><span class="line">    start = timeit.default_timer()</span><br><span class="line">    time.sleep(SLEEP_TIME)</span><br><span class="line">    end = timeit.default_timer()</span><br><span class="line">    print(<span class="string">"test timeit():"</span>, <span class="string">"%fms"</span> % ((end - start) * <span class="number">1000</span>))</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    test_datetime()</span><br><span class="line">    test_time()</span><br><span class="line">    test_clock()</span><br><span class="line">    test_timeit()</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;è®¡æ—¶å‡½æ•°&quot;&gt;&lt;a href=&quot;#è®¡æ—¶å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;è®¡æ—¶å‡½æ•°&quot;&gt;&lt;/a&gt;è®¡æ—¶å‡½æ•°&lt;/h1&gt;&lt;p&gt;è®¡ç®—pythonæŸä¸ªç¨‹åºæˆ–è€…ä»£ç å—çš„&lt;strong&gt;è¿è¡Œæ—¶é—´&lt;/strong&gt;, å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;æ–¹æ³•&lt;/th&gt;&lt;th&gt;è¯´æ˜&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;a href=&quot;/posts/605d5daa.html#1-datetime-datetime-now&quot;&gt;datetime.datetime.now()&lt;/a&gt;&lt;/td&gt;&lt;td&gt;è¯¥æ–¹æ³•åŒ…å«äº†å…¶ä»–ç¨‹åºä½¿ç”¨CPUçš„æ—¶é—´, &lt;strong&gt;ä¸æ¨è&lt;/strong&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;a href=&quot;/posts/605d5daa.html#2-time-time&quot;&gt;time.time()&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;Unix&lt;/code&gt;ç³»ç»Ÿä¸‹, å»ºè®®ä½¿ç”¨&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;a href=&quot;/posts/605d5daa.html#3-time-clock&quot;&gt;time.clock()&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;Windows&lt;/code&gt;ç³»ç»Ÿä¸‹, å»ºè®®ä½¿ç”¨&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;a href=&quot;/posts/605d5daa.html#4-timeit-default-timer&quot;&gt;timeit.default_timer()&lt;/a&gt;&lt;/td&gt;&lt;td&gt;è·¨å¹³å°ä½¿ç”¨, &lt;strong&gt;æœ€æ¨è&lt;/strong&gt;&lt;img src=&quot;/images/recommend.png&quot; alt=&quot;&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
    
    </summary>
    
      <category term="Python" scheme="https://vonsdite.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://vonsdite.cn/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ATL MFCçš„CThreadPool</title>
    <link href="https://vonsdite.cn/posts/2182c76b.html"/>
    <id>https://vonsdite.cn/posts/2182c76b.html</id>
    <published>2018-12-03T07:14:12.000Z</published>
    <updated>2018-12-03T07:21:32.975Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="CThreadPool"><a href="#CThreadPool" class="headerlink" title="CThreadPool"></a>CThreadPool</h1><p>MFCæä¾›äº†ä¸€ä¸ªå«åš<code>CThreadPool</code> çš„ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼ŒåŸºäºå®Œæˆç«¯å£å¼€å‘çš„ä¸€ä¸ªçº¿ç¨‹æ± ã€‚</p><h2 id="ä»¥ä¸‹æ˜¯CThreadPoolçš„ä½¿ç”¨ä»‹ç»"><a href="#ä»¥ä¸‹æ˜¯CThreadPoolçš„ä½¿ç”¨ä»‹ç»" class="headerlink" title="ä»¥ä¸‹æ˜¯CThreadPoolçš„ä½¿ç”¨ä»‹ç»"></a>ä»¥ä¸‹æ˜¯CThreadPoolçš„ä½¿ç”¨ä»‹ç»</h2><p>ä¸»è¦çš„ä¼ªä»£ç å¦‚ä¸‹<br><strong>çº¿ç¨‹æ± è¦æ“ä½œçš„ä»»åŠ¡é€šè¿‡å®ç°CTaskBaseçš„DoTaskå‡½æ•°æ¥å®Œæˆ</strong></p><a id="more"></a><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"CWorker.h"</span> <span class="comment">// åŒ…å«å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> THREADPOOL_SIZE 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹åŒ–çº¿ç¨‹æ± å¯¹è±¡ï¼ŒCWorkeræ˜¯è‡ªå·±å®šä¹‰çš„Workerç±»ï¼Œ MSDNä¸­å®šä¹‰äº†å®ƒçš„åŸå‹ï¼Œå®ƒå¿…é¡»åŒ…å«ä¸‹é¢</span></span><br><span class="line"><span class="comment">// æ‰€åˆ—çš„å‡ ä¸ªå‡½æ•°Initialize,Execute,Terminateï¼›å…·ä½“Workerå®šä¹‰è§ä¸‹é¢ä»£ç </span></span><br><span class="line">CThreadPool&lt;CWorker&gt; threadPool; </span><br><span class="line"></span><br><span class="line">threadPool.Initialize(<span class="literal">NULL</span>, THREADPOOL_SIZE);<span class="comment">// åˆå§‹åŒ–çº¿ç¨‹æ± </span></span><br><span class="line">CTaskBase *pTask = <span class="literal">NULL</span>;</span><br><span class="line">pTask = <span class="keyword">new</span> CTask();<span class="comment">// åˆ›å»ºä»»åŠ¡</span></span><br><span class="line">threadPool.QueueRequest((CParseWorker::RequestType) pTask); <span class="comment">// æ‰§è¡Œçº¿ç¨‹æ± ä»»åŠ¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">CThreadPool è°ƒç”¨Initializeï¼Œè°ƒç”¨æ­¤æ–¹æ³•æ¥åˆå§‹åŒ–çº¿ç¨‹æ± ã€‚</span></span><br><span class="line"><span class="comment">HRESULT Initialize(</span></span><br><span class="line"><span class="comment">    void* pvWorkerParam = NULL,</span></span><br><span class="line"><span class="comment">    int nNumThreads = 0,</span></span><br><span class="line"><span class="comment">    DWORD dwStackSize = 0,</span></span><br><span class="line"><span class="comment">    HANDLE hCompletion = INVALID_HANDLE_VALUE) throw();</span></span><br><span class="line"><span class="comment">å‚æ•°</span></span><br><span class="line"><span class="comment">pvWorkerParam</span></span><br><span class="line"><span class="comment">è¾…åŠ©å‚æ•°ä¼ é€’ç»™è¾…åŠ©çº¿ç¨‹å¯¹è±¡Initializeï¼Œ Executeï¼Œå’ŒTerminateæ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">nNumThreads</span></span><br><span class="line"><span class="comment">è¯·æ±‚çš„æ± ä¸­çš„çº¿ç¨‹æ•°ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">å¦‚æœnNumThreadsæ˜¯è´Ÿæ•°ï¼Œå…¶ç»å¯¹å€¼çš„æ•°å€¼å°†ä¹˜ä»¥ä¸­è¦è·å–çš„çº¿ç¨‹æ€»æ•°çš„è®¡ç®—æœºçš„å¤„ç†å™¨æ•°ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">å¦‚æœnNumThreadsä¸ºé›¶ï¼ŒATLS_DEFAULT_THREADSPERPROC å°†ä¹˜ä»¥ä¸­è¦è·å–çš„çº¿ç¨‹æ€»æ•°çš„è®¡ç®—æœºçš„å¤„ç†å™¨æ•°ã€‚ </span></span><br><span class="line"><span class="comment">é»˜è®¤å€¼ä¸ºæ¯ä¸ªå¤„ç†å™¨çš„ 2 ä¸ªçº¿ç¨‹ã€‚ å¦‚æœ‰å¿…è¦ï¼Œå¯ä»¥åŒ…æ‹¬ atlutil.h ä¹‹å‰å®šä¹‰æ­¤ç¬¦å·è‡ªå·±æ­£æ•´æ•°å€¼ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">dwStackSize</span></span><br><span class="line"><span class="comment">åœ¨æ± ä¸­æ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">hCompletion</span></span><br><span class="line"><span class="comment">è‹¥è¦å°†ä¸å®Œæˆç«¯å£ç›¸å…³è”çš„å¯¹è±¡çš„å¥æŸ„ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">è¿”å›å€¼</span></span><br><span class="line"><span class="comment">è¿”å›æˆåŠŸï¼Œåˆ™ä¸º S_OK æˆ–å¤±è´¥æ—¶çš„é”™è¯¯ HRESULTã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><code>CWoker.h</code></p><details><summary>å±•å¼€ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;atlutil.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CTaskBase</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CTask</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CWorker</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">typedef</span> DWORD_PTR RequestType;</span><br><span class="line"></span><br><span class="line">    CWorker();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> BOOL <span class="title">Initialize</span><span class="params">(<span class="keyword">void</span> *pvParam)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">Terminate</span><span class="params">(<span class="keyword">void</span>* <span class="comment">/*pvParam*/</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Execute</span><span class="params">(RequestType dw, <span class="keyword">void</span> *pvParam, OVERLAPPED* pOverlapped)</span> <span class="title">throw</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> BOOL <span class="title">GetWorkerData</span><span class="params">(DWORD <span class="comment">/*dwParam*/</span>, <span class="keyword">void</span> ** <span class="comment">/*ppvData*/</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    DWORDm_dwExecs;</span><br><span class="line">    LONGm_lId;</span><br><span class="line">&#125;; <span class="comment">// CWorker</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CTaskBase</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">DoTask</span><span class="params">(<span class="keyword">void</span> *pvParam, OVERLAPPED *pOverlapped)</span></span>=<span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CTask</span> :</span> <span class="keyword">public</span> CTaskBase</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">DoTask</span><span class="params">(<span class="keyword">void</span> *pvParam, OVERLAPPED *pOverlapped)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><br><br></details><p><code>CWorker.cpp</code></p><details><summary>å±•å¼€ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"CWorker.h"</span></span></span><br><span class="line"></span><br><span class="line">LONG g_lCurrId = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> CTask::DoTask(<span class="keyword">void</span> *pvParam, OVERLAPPED *pOverlapped)</span><br><span class="line">&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">CWorker::CWorker() : m_dwExecs( <span class="number">0</span> )</span><br><span class="line">&#123;</span><br><span class="line">    m_lId = InterlockedIncrement( &amp;g_lCurrId );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BOOL CWorker::Initialize(<span class="keyword">void</span> *pvParam)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> TRUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> CWorker::Terminate(<span class="keyword">void</span>* <span class="comment">/*pvParam*/</span>)</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> CWorker::Execute(RequestType dw, <span class="keyword">void</span> *pvParam, OVERLAPPED* pOverlapped) <span class="keyword">throw</span>()</span><br><span class="line">&#123;</span><br><span class="line">    CTaskBase* pTask = (CTaskBase*)(DWORD_PTR)dw;</span><br><span class="line">    pTask-&gt;DoTask(pvParam, pOverlapped);</span><br><span class="line">    m_dwExecs++;</span><br><span class="line">    <span class="keyword">delete</span> pTask;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BOOL CWorker::GetWorkerData(DWORD <span class="comment">/*dwParam*/</span>, <span class="keyword">void</span> ** <span class="comment">/*ppvData*/</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> FALSE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></details><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;CThreadPool&quot;&gt;&lt;a href=&quot;#CThreadPool&quot; class=&quot;headerlink&quot; title=&quot;CThreadPool&quot;&gt;&lt;/a&gt;CThreadPool&lt;/h1&gt;&lt;p&gt;MFCæä¾›äº†ä¸€ä¸ªå«åš&lt;code&gt;CThreadPool&lt;/code&gt; çš„ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼ŒåŸºäºå®Œæˆç«¯å£å¼€å‘çš„ä¸€ä¸ªçº¿ç¨‹æ± ã€‚&lt;/p&gt;&lt;h2 id=&quot;ä»¥ä¸‹æ˜¯CThreadPoolçš„ä½¿ç”¨ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»¥ä¸‹æ˜¯CThreadPoolçš„ä½¿ç”¨ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä»¥ä¸‹æ˜¯CThreadPoolçš„ä½¿ç”¨ä»‹ç»&quot;&gt;&lt;/a&gt;ä»¥ä¸‹æ˜¯CThreadPoolçš„ä½¿ç”¨ä»‹ç»&lt;/h2&gt;&lt;p&gt;ä¸»è¦çš„ä¼ªä»£ç å¦‚ä¸‹&lt;br&gt;&lt;strong&gt;çº¿ç¨‹æ± è¦æ“ä½œçš„ä»»åŠ¡é€šè¿‡å®ç°CTaskBaseçš„DoTaskå‡½æ•°æ¥å®Œæˆ&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="C/C++" scheme="https://vonsdite.cn/categories/C-C/"/>
    
      <category term="MFC" scheme="https://vonsdite.cn/categories/C-C/MFC/"/>
    
    
      <category term="C/C++" scheme="https://vonsdite.cn/tags/C-C/"/>
    
  </entry>
  
  <entry>
    <title>C/C++ å„ç§è®¡æ—¶å‡½æ•°æ¯”è¾ƒ</title>
    <link href="https://vonsdite.cn/posts/18ab89cc.html"/>
    <id>https://vonsdite.cn/posts/18ab89cc.html</id>
    <published>2018-12-03T07:10:28.000Z</published>
    <updated>2018-12-04T06:53:02.956Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ç›®å‰æœ‰å„ç§è®¡æ—¶å‡½æ•°,</p><ol><li>ä¸€èˆ¬çš„å¤„ç†éƒ½æ˜¯å…ˆè°ƒç”¨è®¡æ—¶å‡½æ•°, è®°ä¸‹å½“å‰æ—¶é—´<code>start</code></li><li>ç„¶åè¿è¡Œè‡ªå·±çš„ä»£ç </li><li>å†è°ƒç”¨è®¡æ—¶å‡½æ•°, è®°ä¸‹å¤„ç†åçš„æ—¶é—´<code>end</code></li><li>å†<code>end</code>å’Œ<code>start</code>åšå·®, å°±å¯ä»¥å¾—åˆ°ç¨‹åºçš„æ‰§è¡Œæ—¶é—´</li></ol><p>ä½†æ˜¯å„ç§è®¡æ—¶å‡½æ•°çš„<strong>ç²¾åº¦ä¸ä¸€æ ·</strong>.</p><table><thead><tr><th>åºå·</th><th>å‡½æ•°</th><th>ç±»å‹</th><th>ç²¾åº¦çº§åˆ«</th><th>æ—¶é—´</th></tr></thead><tbody><tr><td>1</td><td><a href="/posts/18ab89cc.html#time">time</a></td><td>Cç³»ç»Ÿè°ƒç”¨</td><td>ä½</td><td>&lt;1s</td></tr><tr><td>2</td><td><a href="/posts/18ab89cc.html#clock">clcok</a> <img src="/images/recommend.png" alt=""><em>windows, linuxå‡å¯ç”¨, æ¨è</em></td><td>Cç³»ç»Ÿè°ƒç”¨</td><td>ä½</td><td>&lt;10ms</td></tr><tr><td>3</td><td><a href="/posts/18ab89cc.html#timeGetTime">timeGetTime</a></td><td>Windows API</td><td>ä¸­</td><td>&lt;1ms</td></tr><tr><td>4</td><td><a href="/posts/18ab89cc.html#QueryPerformanceCounter">QueryPerformanceCounter</a> <img src="/images/recommend.png" alt=""><em>windowsä¸‹æœ€å¥½çš„æ–¹æ³•</em></td><td>Windows API</td><td>é«˜</td><td>&lt;0.1ms</td></tr><tr><td>5</td><td><a href="/posts/18ab89cc.html#GetTickCount">GetTickCount</a></td><td>Windows API</td><td>ä¸­</td><td>&lt;1ms</td></tr><tr><td>6</td><td><a href="/posts/18ab89cc.html#RDTSC">RDTSC</a> (å®é™…ä¸å¯ç”¨)</td><td>æŒ‡ä»¤</td><td>é«˜</td><td>&lt;0.1ms</td></tr><tr><td>7</td><td><a href="/posts/18ab89cc.html#gettimeofday">gettimeofday</a> <img src="/images/recommend.png" alt=""><em>linuxä¸‹æœ€å¥½çš„æ–¹æ³•</em></td><td>linuxç¯å¢ƒä¸‹Cç³»ç»Ÿè°ƒç”¨</td><td>é«˜</td><td>&lt;0.1ms</td></tr></tbody></table><a id="more"></a><h1 id="time"><a href="#time" class="headerlink" title="time"></a>time</h1><p><code>time()</code>è·å–å½“å‰çš„ç³»ç»Ÿæ—¶é—´, è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ª<code>time_t</code>ç±»å‹, å…¶å€¼è¡¨ç¤ºä»â€<code>CUT(Coordinated Universal Time)</code>æ—¶é—´1970å¹´1æœˆ1æ—¥00:00:00(ç§°ä¸ºUNIXç³»ç»Ÿçš„Epochæ—¶é—´)â€åˆ°â€å½“å‰æ—¶åˆ»çš„<strong>ç§’æ•°</strong>â€œ.</p><p><strong>ç²¾åº¦</strong>: ä½, &lt;1s</p><p>è°ƒç”¨Sleep(50), è®©ç¨‹åºæš‚åœ50ms, æµ‹å¾—è¿è¡Œæ—¶é—´ä¸º 0ms, è¡¨æ˜ç²¾åº¦çš„ä½<br><img src="/images/2018-12-04-11-41-53.png" alt=""></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SLEEP_TIME 50</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// test time()</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestTime</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">time_t</span> start, end;</span><br><span class="line">start = time(<span class="literal">NULL</span>);</span><br><span class="line">Sleep(<span class="number">50</span>);</span><br><span class="line">end = time(<span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Sleep("</span> &lt;&lt; SLEEP_TIME &lt;&lt; <span class="string">") :"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Test time(): "</span> &lt;&lt; (end - start) * <span class="number">1000</span> &lt;&lt; <span class="string">"ms"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="clock"><a href="#clock" class="headerlink" title="clock"></a>clock</h1><p><code>clock()</code>å‡½æ•°è¿”å›ä»â€å¼€å¯è¿™ä¸ªç¨‹åºè¿›ç¨‹â€åˆ°â€ç¨‹åºä¸­è°ƒç”¨<code>clock()</code>å‡½æ•°â€æ—¶ä¹‹é—´çš„<strong>CPUæ—¶é’Ÿè®¡æ—¶å•å…ƒ(clock tick)æ•°</strong>, åœ¨MSDNä¸­ç§°ä¹‹ä¸º<strong>æŒ‚é’Ÿæ—¶é—´(wal-clock)</strong><br>å¸¸é‡<code>CLOCKS_PER_SEC</code>, å®ƒç”¨æ¥è¡¨ç¤ºä¸€ç§’é’Ÿä¼šæœ‰å¤šå°‘ä¸ªæ—¶é’Ÿè®¡æ—¶å•å…ƒ</p><p><strong>ç²¾åº¦</strong>: ä½, &lt;10ms<br><img src="/images/2018-12-04-11-47-52.png" alt=""><br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SLEEP_TIME 50</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// test clock()</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestClock</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">clock_t</span> start, end;</span><br><span class="line">start = clock();</span><br><span class="line">Sleep(<span class="number">50</span>);</span><br><span class="line">end = clock();</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Sleep("</span> &lt;&lt; SLEEP_TIME &lt;&lt; <span class="string">") :"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; fixed  &lt;&lt; setprecision(<span class="number">17</span>) &lt;&lt; <span class="string">"Test clock(): "</span> &lt;&lt; ((<span class="keyword">double</span>)end - start) / CLOCKS_PER_SEC * <span class="number">1000</span> &lt;&lt; <span class="string">"ms"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h1 id="timeGetTime"><a href="#timeGetTime" class="headerlink" title="timeGetTime"></a>timeGetTime</h1><p><code>timeGetTime()</code>å‡½æ•°ä»¥<strong>æ¯«ç§’çº§</strong>çš„ç³»ç»Ÿæ—¶é—´. è¯¥æ—¶é—´ä¸ºä»ç³»ç»Ÿå¼€å¯ç®—èµ·æ‰€ç»è¿‡çš„æ—¶é—´, æ˜¯<code>windows api</code></p><p><strong>ç²¾åº¦</strong>: ä¸­, &lt;1ms<br><img src="/images/2018-12-04-11-53-59.png" alt=""><br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SLEEP_TIME 50</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment( lib,<span class="meta-string">"winmm.lib"</span> )</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// test timeGetTime()</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestTimeGetTime</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">DWORD start, end;</span><br><span class="line">start = timeGetTime();</span><br><span class="line">Sleep(<span class="number">50</span>);</span><br><span class="line">end = timeGetTime();</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Sleep("</span> &lt;&lt; SLEEP_TIME &lt;&lt; <span class="string">") :"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; fixed &lt;&lt; setprecision(<span class="number">17</span>) &lt;&lt; <span class="string">"Test timeGetTime(): "</span> &lt;&lt; ((<span class="keyword">double</span>)end - start) / <span class="number">1000</span> * <span class="number">1000</span> &lt;&lt; <span class="string">"ms"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h1 id="QueryPerformanceCounter"><a href="#QueryPerformanceCounter" class="headerlink" title="QueryPerformanceCounter"></a>QueryPerformanceCounter</h1><p><code>QueryPerformanceCounter()</code>è¿™ä¸ªå‡½æ•°è¿”å›é«˜ç²¾ç¡®åº¦æ€§èƒ½è®¡æ•°å™¨çš„å€¼, å®ƒå¯ä»¥ä»¥<strong>å¾®ç§’</strong>ä¸ºå•ä½è®¡æ—¶. ä½†æ˜¯<code>QueryPerformanceCounter()</code>ç¡®åˆ‡çš„ç²¾ç¡®è®¡æ—¶çš„æœ€å°å•ä½æ˜¯ä¸ç³»ç»Ÿæœ‰å…³çš„, æ‰€ä»¥, å¿…é¡»è¦æŸ¥è¯¢ç³»ç»Ÿä»¥å¾—åˆ°<code>QueryPerformanceCounter()</code>è¿”å›çš„å˜€å“’å£°çš„é¢‘ç‡. <code>QueryPerformanceFrequency()</code>æä¾›äº†è¿™ä¸ªé¢‘ç‡å€¼, è¿”å›æ¯ç§’å˜€å“’å£°çš„ä¸ªæ•°.</p><p><strong>ç²¾åº¦:</strong> é«˜, &lt;0.1ms<br><img src="/images/2018-12-04-14-07-14.png" alt=""><br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SLEEP_TIME 50</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// test QueryPerformanceCounter()</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestQueryPerformanceCounter</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">LARGE_INTEGER start, end, tc;</span><br><span class="line">QueryPerformanceFrequency(&amp;tc);</span><br><span class="line">QueryPerformanceCounter(&amp;start);</span><br><span class="line">Sleep(<span class="number">50</span>);</span><br><span class="line">QueryPerformanceCounter(&amp;end);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Sleep("</span> &lt;&lt; SLEEP_TIME &lt;&lt; <span class="string">") :"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; fixed &lt;&lt; setprecision(<span class="number">17</span>) &lt;&lt; <span class="string">"Test QueryPerformanceCounter(): "</span> &lt;&lt; ((<span class="keyword">double</span>)end.QuadPart - start.QuadPart) / tc.QuadPart * <span class="number">1000</span> &lt;&lt; <span class="string">"ms"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h1 id="GetTickCount"><a href="#GetTickCount" class="headerlink" title="GetTickCount"></a>GetTickCount</h1><p><code>GetTickCount()</code>è¿”å›(retrieve)ä»æ“ä½œç³»ç»Ÿå¯åŠ¨åˆ°ç°åœ¨æ‰€ç»è¿‡(elapsed)çš„<strong>æ¯«ç§’æ•°</strong>, å®ƒçš„è¿”å›å€¼æ˜¯DWORD</p><p><strong>ç²¾åº¦:</strong> ä¸­, &lt;1ms<br><img src="/images/2018-12-04-14-11-43.png" alt=""><br></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SLEEP_TIME 50</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// test GetTickCount()</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestGetTickCount</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">DWORD start, end;</span><br><span class="line">start = GetTickCount();</span><br><span class="line">Sleep(<span class="number">50</span>);</span><br><span class="line">end = GetTickCount();</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Sleep("</span> &lt;&lt; SLEEP_TIME &lt;&lt; <span class="string">") :"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; fixed &lt;&lt; setprecision(<span class="number">17</span>) &lt;&lt; <span class="string">"Test GetTickCount(): "</span> &lt;&lt; ((<span class="keyword">double</span>)end - start) / <span class="number">1000</span> * <span class="number">1000</span> &lt;&lt; <span class="string">"ms"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h1 id="RDTSC"><a href="#RDTSC" class="headerlink" title="RDTSC"></a>RDTSC</h1><p><code>RDTSC</code>æŒ‡ä»¤, åœ¨<strong>Intel Pentium</strong>ä»¥ä¸Šçº§åˆ«çš„CPUä¸­, æœ‰ä¸€ä¸ªç§°ä¸ºâ€æ—¶é—´æˆ³(Time Stamp)â€çš„éƒ¨ä»¶, å®ƒä»¥64ä½æ— ç¬¦å·æ•´å‹æ•°çš„æ ¼å¼, è®°å½•äº†è‡ªCPUä¸Šç”µä»¥æ¥æ‰€ç»è¿‡çš„æ—¶é’Ÿå‘¨æœŸæ•°ã€‚ç”±äºç›®å‰çš„<strong>CPUä¸»é¢‘éƒ½éå¸¸é«˜</strong>, å› æ­¤è¿™ä¸ªéƒ¨ä»¶å¯ä»¥è¾¾åˆ°<strong>çº³ç§’çº§</strong>çš„è®¡æ—¶ç²¾åº¦ã€‚è¿™ä¸ªç²¾ç¡®æ€§æ˜¯ä¸Šè¿°å‡ ç§æ–¹æ³•æ‰€æ— æ³•æ¯”æ‹Ÿçš„. åœ¨Pentiumä»¥ä¸Šçš„CPUä¸­, æä¾›äº†ä¸€æ¡æœºå™¨æŒ‡ä»¤RDTSC(Read Time Stamp Counter)æ¥è¯»å–è¿™ä¸ªæ—¶é—´æˆ³çš„æ•°å­—, å¹¶å°†å…¶ä¿å­˜åœ¨EDX:EAXå¯„å­˜å™¨å¯¹ä¸­. ç”±äºEDX:EAXå¯„å­˜å™¨å¯¹æ°å¥½æ˜¯Win32å¹³å°ä¸‹C++è¯­è¨€ä¿å­˜å‡½æ•°è¿”å›å€¼çš„å¯„å­˜å™¨, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠè¿™æ¡æŒ‡ä»¤çœ‹æˆæ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°è°ƒç”¨, å› ä¸ºRDTSCä¸è¢«C++çš„å†…åµŒæ±‡ç¼–å™¨ç›´æ¥æ”¯æŒ, æ‰€ä»¥æˆ‘ä»¬è¦ç”¨_emitä¼ªæŒ‡ä»¤ç›´æ¥åµŒå…¥è¯¥æŒ‡ä»¤çš„æœºå™¨ç å½¢å¼0X0Fã€0X31</p><h2 id="ç„¶è€ŒçœŸç›¸"><a href="#ç„¶è€ŒçœŸç›¸" class="headerlink" title="ç„¶è€ŒçœŸç›¸"></a>ç„¶è€ŒçœŸç›¸</h2><p>å¤šæ ¸æ—¶ä»£<strong>ä¸å®œå†ç”¨</strong> x86 çš„ RDTSC æŒ‡ä»¤æµ‹è¯•æŒ‡ä»¤å‘¨æœŸå’Œæ—¶é—´</p><ol><li><strong>ä¸èƒ½ä¿è¯</strong>åŒä¸€å—ä¸»æ¿ä¸Šæ¯ä¸ªæ ¸çš„ TSC æ˜¯åŒæ­¥çš„ï¼›</li><li>CPU çš„<strong>æ—¶é’Ÿé¢‘ç‡å¯èƒ½å˜åŒ–</strong>, ä¾‹å¦‚ç¬”è®°æœ¬ç”µè„‘çš„èŠ‚èƒ½åŠŸèƒ½ï¼›</li><li><strong>ä¹±åºæ‰§è¡Œ</strong>å¯¼è‡´ RDTSC æµ‹å¾—çš„å‘¨æœŸæ•°ä¸å‡†, è¿™ä¸ªé—®é¢˜ä» Pentium Pro æ—¶ä»£å°±å­˜åœ¨ã€‚</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SLEEP_TIME 50</span></span><br><span class="line"><span class="comment">// test RDTSC</span></span><br><span class="line"><span class="comment">// å¤šæ ¸æ—¶ä»£ä¸å®œå†ç”¨ x86 çš„ RDTSC æŒ‡ä»¤æµ‹è¯•æŒ‡ä»¤å‘¨æœŸå’Œæ—¶é—´</span></span><br><span class="line"><span class="comment">// 1. ä¸èƒ½ä¿è¯åŒä¸€å—ä¸»æ¿ä¸Šæ¯ä¸ªæ ¸çš„ TSC æ˜¯åŒæ­¥çš„ï¼›</span></span><br><span class="line"><span class="comment">// 2. CPU çš„æ—¶é’Ÿé¢‘ç‡å¯èƒ½å˜åŒ–, ä¾‹å¦‚ç¬”è®°æœ¬ç”µè„‘çš„èŠ‚èƒ½åŠŸèƒ½ï¼›</span></span><br><span class="line"><span class="comment">// 3. ä¹±åºæ‰§è¡Œå¯¼è‡´ RDTSC æµ‹å¾—çš„å‘¨æœŸæ•°ä¸å‡†, è¿™ä¸ªé—®é¢˜ä» Pentium Pro æ—¶ä»£å°±å­˜åœ¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">unsigned</span> __<span class="function">int64 <span class="title">GetCycleCount</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">__asm</span><br><span class="line">&#123;</span><br><span class="line">_emit <span class="number">0x3F</span>;</span><br><span class="line">_emit <span class="number">0x31</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘çš„CPUé¢‘ç‡</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FREQUENCY (2.6*(1&lt;&lt;30))  </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestRDTSC</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> __int64 start, end;</span><br><span class="line">start = GetCycleCount();</span><br><span class="line">Sleep(<span class="number">50</span>);</span><br><span class="line">end = GetCycleCount();</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Sleep("</span> &lt;&lt; SLEEP_TIME &lt;&lt; <span class="string">") :"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; fixed &lt;&lt; setprecision(<span class="number">17</span>) &lt;&lt; <span class="string">"Test RDTSC(): "</span> &lt;&lt; ((<span class="keyword">double</span>)end - start) / FREQUENCY * <span class="number">1000</span> &lt;&lt; <span class="string">"ms"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="gettimeofday"><a href="#gettimeofday" class="headerlink" title="gettimeofday"></a>gettimeofday</h1><p><code>gettimeofday()</code> linuxç¯å¢ƒä¸‹çš„è®¡æ—¶å‡½æ•°, <code>int gettimeofday(struct timeval* tv , struct timezone* tz)</code>, <code>gettimeofday()</code>ä¼šæŠŠç›®å‰çš„æ—¶é—´æœ‰<code>tv</code>æ‰€æŒ‡çš„ç»“æ„è¿”å›, å½“åœ°æ—¶åŒºçš„ä¿¡æ¯åˆ™æ”¾åˆ°<code>tz</code>æ‰€æŒ‡çš„ç»“æ„ä¸­.</p><p><strong>ç²¾åº¦:</strong> é«˜, &lt;0.1ms</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SLEEP_TIME 50</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// test gettimeofday()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// timevalç»“æ„å®šä¹‰ä¸º:</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">timeval</span> &#123;</span></span><br><span class="line"><span class="keyword">long</span> tv_sec;  <span class="comment">// ç§’</span></span><br><span class="line"><span class="keyword">long</span> tv_usec; <span class="comment">// å¾®ç§’</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//timezone ç»“æ„å®šä¹‰ä¸º:</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">timezone</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> tz_minuteswest; <span class="comment">// å’ŒGreenwich æ—¶é—´å·®äº†å¤šå°‘åˆ†é’Ÿ</span></span><br><span class="line"><span class="keyword">int</span> tz_dsttime;<span class="comment">// æ—¥å…‰èŠ‚çº¦æ—¶é—´çš„çŠ¶æ€</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TestGetTimeOfDay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">timeval start, end;</span><br><span class="line"><span class="keyword">double</span> timeuse;</span><br><span class="line">gettimeofday(&amp;start, <span class="literal">NULL</span>);</span><br><span class="line">    Sleep(<span class="number">50</span>);</span><br><span class="line">gettimefoday(&amp;end, <span class="literal">NULL</span>);</span><br><span class="line">timeuse = end.tv_sec - start.tv_sec + (end.tv_usec - start.tv_usec) / <span class="number">50000.0</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Sleep("</span> &lt;&lt; SLEEP_TIME &lt;&lt; <span class="string">") :"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; fixed &lt;&lt; setprecision(<span class="number">17</span>) &lt;&lt; <span class="string">"Test gettimeofday(): "</span> &lt;&lt; timeuse * <span class="number">1000</span> &lt;&lt; <span class="string">"ms"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;ç›®å‰æœ‰å„ç§è®¡æ—¶å‡½æ•°,&lt;/p&gt;&lt;ol&gt;&lt;li&gt;ä¸€èˆ¬çš„å¤„ç†éƒ½æ˜¯å…ˆè°ƒç”¨è®¡æ—¶å‡½æ•°, è®°ä¸‹å½“å‰æ—¶é—´&lt;code&gt;start&lt;/code&gt;&lt;/li&gt;&lt;li&gt;ç„¶åè¿è¡Œè‡ªå·±çš„ä»£ç &lt;/li&gt;&lt;li&gt;å†è°ƒç”¨è®¡æ—¶å‡½æ•°, è®°ä¸‹å¤„ç†åçš„æ—¶é—´&lt;code&gt;end&lt;/code&gt;&lt;/li&gt;&lt;li&gt;å†&lt;code&gt;end&lt;/code&gt;å’Œ&lt;code&gt;start&lt;/code&gt;åšå·®, å°±å¯ä»¥å¾—åˆ°ç¨‹åºçš„æ‰§è¡Œæ—¶é—´&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;ä½†æ˜¯å„ç§è®¡æ—¶å‡½æ•°çš„&lt;strong&gt;ç²¾åº¦ä¸ä¸€æ ·&lt;/strong&gt;.&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;åºå·&lt;/th&gt;&lt;th&gt;å‡½æ•°&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;ç²¾åº¦çº§åˆ«&lt;/th&gt;&lt;th&gt;æ—¶é—´&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;/posts/18ab89cc.html#time&quot;&gt;time&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Cç³»ç»Ÿè°ƒç”¨&lt;/td&gt;&lt;td&gt;ä½&lt;/td&gt;&lt;td&gt;&amp;lt;1s&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;/posts/18ab89cc.html#clock&quot;&gt;clcok&lt;/a&gt; &lt;img src=&quot;/images/recommend.png&quot; alt=&quot;&quot;&gt;&lt;em&gt;windows, linuxå‡å¯ç”¨, æ¨è&lt;/em&gt;&lt;/td&gt;&lt;td&gt;Cç³»ç»Ÿè°ƒç”¨&lt;/td&gt;&lt;td&gt;ä½&lt;/td&gt;&lt;td&gt;&amp;lt;10ms&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;/posts/18ab89cc.html#timeGetTime&quot;&gt;timeGetTime&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Windows API&lt;/td&gt;&lt;td&gt;ä¸­&lt;/td&gt;&lt;td&gt;&amp;lt;1ms&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;/posts/18ab89cc.html#QueryPerformanceCounter&quot;&gt;QueryPerformanceCounter&lt;/a&gt; &lt;img src=&quot;/images/recommend.png&quot; alt=&quot;&quot;&gt;&lt;em&gt;windowsä¸‹æœ€å¥½çš„æ–¹æ³•&lt;/em&gt;&lt;/td&gt;&lt;td&gt;Windows API&lt;/td&gt;&lt;td&gt;é«˜&lt;/td&gt;&lt;td&gt;&amp;lt;0.1ms&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;/posts/18ab89cc.html#GetTickCount&quot;&gt;GetTickCount&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Windows API&lt;/td&gt;&lt;td&gt;ä¸­&lt;/td&gt;&lt;td&gt;&amp;lt;1ms&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;/posts/18ab89cc.html#RDTSC&quot;&gt;RDTSC&lt;/a&gt; (å®é™…ä¸å¯ç”¨)&lt;/td&gt;&lt;td&gt;æŒ‡ä»¤&lt;/td&gt;&lt;td&gt;é«˜&lt;/td&gt;&lt;td&gt;&amp;lt;0.1ms&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;&lt;a href=&quot;/posts/18ab89cc.html#gettimeofday&quot;&gt;gettimeofday&lt;/a&gt; &lt;img src=&quot;/images/recommend.png&quot; alt=&quot;&quot;&gt;&lt;em&gt;linuxä¸‹æœ€å¥½çš„æ–¹æ³•&lt;/em&gt;&lt;/td&gt;&lt;td&gt;linuxç¯å¢ƒä¸‹Cç³»ç»Ÿè°ƒç”¨&lt;/td&gt;&lt;td&gt;é«˜&lt;/td&gt;&lt;td&gt;&amp;lt;0.1ms&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
    
    </summary>
    
      <category term="C/C++" scheme="https://vonsdite.cn/categories/C-C/"/>
    
    
      <category term="C/C++" scheme="https://vonsdite.cn/tags/C-C/"/>
    
  </entry>
  
  <entry>
    <title>windowsè®¡ç®—ç›®å½•å¤§å° é€’å½’å’Œçº¿ç¨‹æ± ä¸¤ç§å®ç°</title>
    <link href="https://vonsdite.cn/posts/62aadf3b.html"/>
    <id>https://vonsdite.cn/posts/62aadf3b.html</id>
    <published>2018-12-03T06:36:08.000Z</published>
    <updated>2018-12-03T07:25:25.978Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>windowsä¸‹æ–‡ä»¶å¤¹ç›®å½•å¤§å°æ²¡æœ‰ç›´æ¥è·å–çš„æ–¹æ³•ï¼Œä¸€èˆ¬ç›´æ¥ä½¿ç”¨<strong>é€’å½’</strong>çš„æ–¹å¼æ¥è®¡ç®—ï¼Œæˆ–è€…ä½¿ç”¨<strong>å¤šçº¿ç¨‹</strong>æé«˜å¹¶å‘åº¦è®¡ç®—ã€‚</p><p>ä»¥ä¸‹ä¸¾çš„ä¾‹å­æ˜¯<strong>è®¡ç®—ç›®æ ‡ç›®å½•å¤§å°ä»¥åŠç›®æ ‡ç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•å¤§å°</strong>çš„ä¾‹å­, ä¸æ˜¯è®¡ç®—<strong>å•ä¸€ç›®å½•</strong>å¤§å°çš„ä¾‹å­</p><p><code>ThreadPool.h</code>çš„å®ç°æ¥æºäº: <a href="https://github.com/log4cplus/Threadpool" target="_blank" rel="noopener">https://github.com/log4cplus/Threadpool</a></p><a id="more"></a><h1 id="æ•ˆæœæ¯”è¾ƒ"><a href="#æ•ˆæœæ¯”è¾ƒ" class="headerlink" title="æ•ˆæœæ¯”è¾ƒ"></a>æ•ˆæœæ¯”è¾ƒ</h1><p><strong>PS:</strong> è¾“å‡ºçš„ä¸Šéƒ¨åˆ†æ˜¯é€’å½’æ–¹å¼, ä¸‹éƒ¨åˆ†æ˜¯çº¿ç¨‹æ± æ–¹å¼</p><p>çº¿ç¨‹æ± çš„æ± å¤§å°ä¸º1æ—¶, è€—æ—¶ç•¥å¤šäºæ™®é€šé€’å½’(å› ä¸ºçº¿ç¨‹çš„ä¸€äº›é¢å¤–å¼€é”€)<br><img src="/images/2018-12-03-14-58-18.png" alt=""></p><p>æ± çš„å¤§å°é€‚å½“å¢å¤§, å¯ä»¥æœ‰æ•ˆçš„æé«˜æ•ˆç‡(ä½†æ± è¿‡äºå¤§, ä¹Ÿä¼šé€ æˆæ•ˆç‡é™ä½)<br><img src="/images/2018-12-03-14-58-27.png" alt=""><img src="/images/2018-12-03-15-01-24.png" alt=""><img src="/images/2018-12-03-15-01-30.png" alt=""><img src="/images/2018-12-03-15-01-36.png" alt=""><img src="/images/2018-12-03-15-01-42.png" alt=""></p><h1 id="å®ç°çš„ä»£ç "><a href="#å®ç°çš„ä»£ç " class="headerlink" title="å®ç°çš„ä»£ç "></a>å®ç°çš„ä»£ç </h1><p><code>ThreadPool.h</code></p><details><summary>å±•å¼€ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -*- C++ -*-</span></span><br><span class="line"><span class="comment">// Copyright (c) 2012-2015 Jakob Progsch</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// This software is provided 'as-is', without any express or implied</span></span><br><span class="line"><span class="comment">// warranty. In no event will the authors be held liable for any damages</span></span><br><span class="line"><span class="comment">// arising from the use of this software.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Permission is granted to anyone to use this software for any purpose,</span></span><br><span class="line"><span class="comment">// including commercial applications, and to alter it and redistribute it</span></span><br><span class="line"><span class="comment">// freely, subject to the following restrictions:</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    1. The origin of this software must not be misrepresented; you must not</span></span><br><span class="line"><span class="comment">//    claim that you wrote the original software. If you use this software</span></span><br><span class="line"><span class="comment">//    in a product, an acknowledgment in the product documentation would be</span></span><br><span class="line"><span class="comment">//    appreciated but is not required.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    2. Altered source versions must be plainly marked as such, and must not be</span></span><br><span class="line"><span class="comment">//    misrepresented as being the original software.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    3. This notice may not be removed or altered from any source</span></span><br><span class="line"><span class="comment">//    distribution.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Modified for log4cplus, copyright (c) 2014-2015 VÃ¡clav Zeman.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> THREAD_POOL_H_7ea1ee6b_4f17_4c09_b76b_3d44e102400c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> THREAD_POOL_H_7ea1ee6b_4f17_4c09_b76b_3d44e102400c</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;future&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;atomic&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThreadPool</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">explicit</span> <span class="title">ThreadPool</span><span class="params">(<span class="built_in">std</span>::<span class="keyword">size_t</span> threads</span></span></span><br><span class="line"><span class="function"><span class="params">= (<span class="built_in">std</span>::max)(<span class="number">2u</span>, <span class="built_in">std</span>::thread::hardware_concurrency()))</span></span>;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">F</span>, <span class="title">class</span>... <span class="title">Args</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">auto</span> <span class="title">enqueue</span>(<span class="title">F</span>&amp;&amp; <span class="title">f</span>, <span class="title">Args</span>&amp;&amp;... <span class="title">args</span>)</span></span><br><span class="line"><span class="class">-&gt;<span class="title">std</span>:</span>:future&lt;<span class="keyword">typename</span> <span class="built_in">std</span>::result_of&lt;F(Args...)&gt;::type&gt;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">wait_until_empty</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">wait_until_nothing_in_flight</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_queue_size_limit</span><span class="params">(<span class="built_in">std</span>::<span class="keyword">size_t</span> limit)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_pool_size</span><span class="params">(<span class="built_in">std</span>::<span class="keyword">size_t</span> limit)</span></span>;</span><br><span class="line">~ThreadPool();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">emplace_back_worker</span><span class="params">(<span class="built_in">std</span>::<span class="keyword">size_t</span> worker_number)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// need to keep track of threads so we can join them</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt; <span class="built_in">std</span>::thread &gt; workers;</span><br><span class="line"><span class="comment">// target pool size</span></span><br><span class="line"><span class="built_in">std</span>::<span class="keyword">size_t</span> pool_size;</span><br><span class="line"><span class="comment">// the task queue</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">queue</span>&lt; <span class="built_in">std</span>::function&lt;<span class="keyword">void</span>()&gt; &gt; tasks;</span><br><span class="line"><span class="comment">// queue length limit</span></span><br><span class="line"><span class="built_in">std</span>::<span class="keyword">size_t</span> max_queue_size = <span class="number">100000</span>;</span><br><span class="line"><span class="comment">// stop signal</span></span><br><span class="line"><span class="keyword">bool</span> stop = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// synchronization</span></span><br><span class="line"><span class="built_in">std</span>::mutex queue_mutex;</span><br><span class="line"><span class="built_in">std</span>::condition_variable condition_producers;</span><br><span class="line"><span class="built_in">std</span>::condition_variable condition_consumers;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::mutex in_flight_mutex;</span><br><span class="line"><span class="built_in">std</span>::condition_variable in_flight_condition;</span><br><span class="line"><span class="built_in">std</span>::atomic&lt;<span class="built_in">std</span>::<span class="keyword">size_t</span>&gt; in_flight;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">handle_in_flight_decrement</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">ThreadPool &amp; tp;</span><br><span class="line"></span><br><span class="line">handle_in_flight_decrement(ThreadPool &amp; tp_)</span><br><span class="line">: tp(tp_)</span><br><span class="line">&#123; &#125;</span><br><span class="line"></span><br><span class="line">~handle_in_flight_decrement()</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">std</span>::<span class="keyword">size_t</span> prev</span><br><span class="line">= <span class="built_in">std</span>::atomic_fetch_sub_explicit(&amp;tp.in_flight,</span><br><span class="line"><span class="built_in">std</span>::<span class="keyword">size_t</span>(<span class="number">1</span>),</span><br><span class="line"><span class="built_in">std</span>::memory_order_acq_rel);</span><br><span class="line"><span class="keyword">if</span> (prev == <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; guard(tp.in_flight_mutex);</span><br><span class="line">tp.in_flight_condition.notify_all();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// the constructor just launches some amount of workers</span></span><br><span class="line"><span class="keyword">inline</span> ThreadPool::ThreadPool(<span class="built_in">std</span>::<span class="keyword">size_t</span> threads)</span><br><span class="line">: pool_size(threads)</span><br><span class="line">, in_flight(<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">std</span>::<span class="keyword">size_t</span> i = <span class="number">0</span>; i != threads; ++i)</span><br><span class="line">emplace_back_worker(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// add new work item to the pool</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">F</span>, <span class="title">class</span>... <span class="title">Args</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">auto</span> <span class="title">ThreadPool</span>:</span>:enqueue(F&amp;&amp; f, Args&amp;&amp;... args)</span><br><span class="line">-&gt; <span class="built_in">std</span>::future&lt;<span class="keyword">typename</span> <span class="built_in">std</span>::result_of&lt;F(Args...)&gt;::type&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">using</span> return_type = <span class="keyword">typename</span> <span class="built_in">std</span>::result_of&lt;F(Args...)&gt;::type;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> task = <span class="built_in">std</span>::make_shared&lt; <span class="built_in">std</span>::packaged_task&lt;return_type()&gt; &gt;(</span><br><span class="line"><span class="built_in">std</span>::bind(<span class="built_in">std</span>::forward&lt;F&gt;(f), <span class="built_in">std</span>::forward&lt;Args&gt;(args)...)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::future&lt;return_type&gt; res = task-&gt;get_future();</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; lock(queue_mutex);</span><br><span class="line"><span class="keyword">if</span> (tasks.size() &gt;= max_queue_size)</span><br><span class="line"><span class="comment">// wait for the queue to empty or be stopped</span></span><br><span class="line">condition_producers.wait(lock,</span><br><span class="line">[<span class="keyword">this</span>]</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> tasks.size() &lt; max_queue_size</span><br><span class="line">|| stop;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// don't allow enqueueing after stopping the pool</span></span><br><span class="line"><span class="keyword">if</span> (stop)</span><br><span class="line"><span class="keyword">throw</span> <span class="built_in">std</span>::runtime_error(<span class="string">"enqueue on stopped ThreadPool"</span>);</span><br><span class="line"></span><br><span class="line">tasks.emplace([task]() &#123; (*task)(); &#125;);</span><br><span class="line"><span class="built_in">std</span>::atomic_fetch_add_explicit(&amp;in_flight,</span><br><span class="line"><span class="built_in">std</span>::<span class="keyword">size_t</span>(<span class="number">1</span>),</span><br><span class="line"><span class="built_in">std</span>::memory_order_relaxed);</span><br><span class="line">condition_consumers.notify_one();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// the destructor joins all threads</span></span><br><span class="line"><span class="keyword">inline</span> ThreadPool::~ThreadPool()</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; lock(queue_mutex);</span><br><span class="line">stop = <span class="literal">true</span>;</span><br><span class="line">condition_consumers.notify_all();</span><br><span class="line">condition_producers.notify_all();</span><br><span class="line">pool_size = <span class="number">0</span>;</span><br><span class="line">condition_consumers.wait(lock, [<span class="keyword">this</span>] &#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;workers.empty(); &#125;);</span><br><span class="line">assert(in_flight == <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">void</span> ThreadPool::wait_until_empty()</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; lock(<span class="keyword">this</span>-&gt;queue_mutex);</span><br><span class="line"><span class="keyword">this</span>-&gt;condition_producers.wait(lock,</span><br><span class="line">[<span class="keyword">this</span>] &#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;tasks.empty(); &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">void</span> ThreadPool::wait_until_nothing_in_flight()</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; lock(<span class="keyword">this</span>-&gt;in_flight_mutex);</span><br><span class="line"><span class="keyword">this</span>-&gt;in_flight_condition.wait(lock,</span><br><span class="line">[<span class="keyword">this</span>] &#123; <span class="keyword">return</span> <span class="keyword">this</span>-&gt;in_flight == <span class="number">0</span>; &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">void</span> ThreadPool::set_queue_size_limit(<span class="built_in">std</span>::<span class="keyword">size_t</span> limit)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; lock(<span class="keyword">this</span>-&gt;queue_mutex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (stop)</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="keyword">size_t</span> <span class="keyword">const</span> old_limit = max_queue_size;</span><br><span class="line">max_queue_size = (<span class="built_in">std</span>::max)(limit, <span class="built_in">std</span>::<span class="keyword">size_t</span>(<span class="number">1</span>));</span><br><span class="line"><span class="keyword">if</span> (old_limit &lt; max_queue_size)</span><br><span class="line">condition_producers.notify_all();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">void</span> ThreadPool::set_pool_size(<span class="built_in">std</span>::<span class="keyword">size_t</span> limit)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (limit &lt; <span class="number">1</span>)</span><br><span class="line">limit = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; lock(<span class="keyword">this</span>-&gt;queue_mutex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (stop)</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">pool_size = limit;</span><br><span class="line"><span class="built_in">std</span>::<span class="keyword">size_t</span> <span class="keyword">const</span> old_size = <span class="keyword">this</span>-&gt;workers.size();</span><br><span class="line"><span class="keyword">if</span> (pool_size &gt; old_size)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// create new worker threads</span></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">std</span>::<span class="keyword">size_t</span> i = old_size; i != pool_size; ++i)</span><br><span class="line">emplace_back_worker(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (pool_size &lt; old_size)</span><br><span class="line"><span class="comment">// notify all worker threads to start downsizing</span></span><br><span class="line"><span class="keyword">this</span>-&gt;condition_consumers.notify_all();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">void</span> ThreadPool::emplace_back_worker(<span class="built_in">std</span>::<span class="keyword">size_t</span> worker_number)</span><br><span class="line">&#123;</span><br><span class="line">workers.emplace_back(</span><br><span class="line">[<span class="keyword">this</span>, worker_number]</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (;;)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">std</span>::function&lt;<span class="keyword">void</span>()&gt; task;</span><br><span class="line"><span class="keyword">bool</span> notify;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; lock(<span class="keyword">this</span>-&gt;queue_mutex);</span><br><span class="line"><span class="keyword">this</span>-&gt;condition_consumers.wait(lock,</span><br><span class="line">[<span class="keyword">this</span>, worker_number] &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;stop || !<span class="keyword">this</span>-&gt;tasks.empty()</span><br><span class="line">|| pool_size &lt; worker_number + <span class="number">1</span>; &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// deal with downsizing of thread pool or shutdown</span></span><br><span class="line"><span class="keyword">if</span> ((<span class="keyword">this</span>-&gt;stop &amp;&amp; <span class="keyword">this</span>-&gt;tasks.empty())</span><br><span class="line">|| (!<span class="keyword">this</span>-&gt;stop &amp;&amp; pool_size &lt; worker_number + <span class="number">1</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">std</span>::thread &amp; last_thread = <span class="keyword">this</span>-&gt;workers.back();</span><br><span class="line"><span class="built_in">std</span>::thread::id this_id = <span class="built_in">std</span>::this_thread::get_id();</span><br><span class="line"><span class="keyword">if</span> (this_id == last_thread.get_id())</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// highest number thread exits, resizes the workers</span></span><br><span class="line"><span class="comment">// vector, and notifies others</span></span><br><span class="line">last_thread.detach();</span><br><span class="line"><span class="keyword">this</span>-&gt;workers.pop_back();</span><br><span class="line"><span class="keyword">this</span>-&gt;condition_consumers.notify_all();</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (!<span class="keyword">this</span>-&gt;tasks.empty())</span><br><span class="line">&#123;</span><br><span class="line">task = <span class="built_in">std</span>::move(<span class="keyword">this</span>-&gt;tasks.front());</span><br><span class="line"><span class="keyword">this</span>-&gt;tasks.pop();</span><br><span class="line">notify = <span class="keyword">this</span>-&gt;tasks.size() + <span class="number">1</span> == max_queue_size</span><br><span class="line">|| <span class="keyword">this</span>-&gt;tasks.empty();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">handle_in_flight_decrement guard(*<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (notify)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">std</span>::unique_lock&lt;<span class="built_in">std</span>::mutex&gt; lock(<span class="keyword">this</span>-&gt;queue_mutex);</span><br><span class="line">condition_producers.notify_all();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// THREAD_POOL_H_7ea1ee6b_4f17_4c09_b76b_3d44e102400c</span></span></span><br></pre></td></tr></table></figure><br><br></details><p><code>GetDirectorySize.cpp</code></p><details><summary>å±•å¼€ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ThreadPool.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> UNICODE</span></span><br><span class="line"><span class="keyword">typedef</span> wstring tstring;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">string</span> tstring;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> POOL_SIZE 1000</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">unordered_map</span>&lt;tstring, ULONGLONG&gt; mapDirSize_simple;<span class="comment">// é€’å½’çš„mapè¡¨</span></span><br><span class="line"><span class="built_in">unordered_map</span>&lt;tstring, ULONGLONG&gt; mapDirSize;<span class="comment">// çº¿ç¨‹æ± çš„mapè¡¨</span></span><br><span class="line"><span class="built_in">std</span>::mutex mtx;</span><br><span class="line"><span class="function">ThreadPool <span class="title">pool</span><span class="params">(POOL_SIZE)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ®æ–‡ä»¶çš„é«˜32ä½å’Œä½32ä½æ±‚å‡ºæ–‡ä»¶çš„å¤§å°</span></span><br><span class="line"><span class="function">ULONGLONG <span class="title">GetFileSize</span><span class="params">(ULONGLONG high, ULONGLONG low)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> ((high &lt;&lt; <span class="number">32</span>) | low);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»æ‰ä¸­æ‰€æœ‰çš„ "/"  "\" ":" </span></span><br><span class="line"><span class="function">tstring <span class="title">ClearPathFormat</span><span class="params">(tstring path)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">size_t</span> pos = <span class="number">0</span>;</span><br><span class="line">tstring clear1 = TEXT(<span class="string">"/"</span>);</span><br><span class="line">tstring clear2 = TEXT(<span class="string">"\\"</span>);</span><br><span class="line">tstring clear3 = TEXT(<span class="string">":"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ((pos = path.find(clear1)) != tstring::npos)</span><br><span class="line">&#123;</span><br><span class="line">path.replace(pos, clear1.length(), <span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ((pos = path.find(clear2)) != tstring::npos)</span><br><span class="line">&#123;</span><br><span class="line">path.replace(pos, clear2.length(), <span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ((pos = path.find(clear3)) != tstring::npos)</span><br><span class="line">&#123;</span><br><span class="line">path.replace(pos, clear3.length(), <span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> path;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€å•é€’å½’å¾—ç›®å½•å¤§å°</span></span><br><span class="line"><span class="function">ULONGLONG <span class="title">SimpleGetDirectorySize</span><span class="params">(<span class="built_in">vector</span>&lt;tstring&gt; vecParentPath, tstring lpDirName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ULONGLONG nDirSize = <span class="number">0</span>;<span class="comment">// æ–‡ä»¶å¤¹å¤§å°</span></span><br><span class="line">tstring strDirName = lpDirName;</span><br><span class="line">strDirName += TEXT(<span class="string">"/*.*"</span>);<span class="comment">// ç›®å½•åå­—</span></span><br><span class="line"></span><br><span class="line">HANDLE hFile;</span><br><span class="line">WIN32_FIND_DATA pNextInfo;</span><br><span class="line">hFile = FindFirstFile(strDirName.c_str(), &amp;pNextInfo);</span><br><span class="line"><span class="keyword">if</span> (INVALID_HANDLE_VALUE == hFile)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;tstring&gt; copyVecParent = vecParentPath;</span><br><span class="line">copyVecParent.push_back(ClearPathFormat(lpDirName));</span><br><span class="line"><span class="keyword">while</span> (FindNextFile(hFile, &amp;pNextInfo))</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// è·³è¿‡ "." ".." ä¸¤ä¸ªç›®å½•</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">strcmp</span>(pNextInfo.cFileName, <span class="string">"."</span>) || !<span class="built_in">strcmp</span>(pNextInfo.cFileName, <span class="string">".."</span>))</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pNextInfo.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY)</span><br><span class="line">&#123;<span class="comment">// ç›®å½•, é€’å½’ä¸‹å»åŠ </span></span><br><span class="line">tstring strTmp = lpDirName;</span><br><span class="line">strTmp += TEXT(<span class="string">"/"</span>);</span><br><span class="line">strTmp += pNextInfo.cFileName;</span><br><span class="line">SimpleGetDirectorySize(copyVecParent, strTmp.c_str());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;<span class="comment">// æ–‡ä»¶</span></span><br><span class="line">nDirSize += GetFileSize(pNextInfo.nFileSizeHigh, pNextInfo.nFileSizeLow);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (nDirSize)</span><br><span class="line">&#123;</span><br><span class="line">mapDirSize_simple[ClearPathFormat(lpDirName)] += nDirSize;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> parent : vecParentPath)</span><br><span class="line">&#123;</span><br><span class="line">mapDirSize_simple[parent] += nDirSize;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> mapDirSize_simple[ClearPathFormat(lpDirName)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¡ç®—ç›®å½•å¤§å°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CalcDirectoySize</span><span class="params">(<span class="built_in">vector</span>&lt;tstring&gt; vecParentPath, tstring strOwnPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ULONGLONG nCurrentSize = <span class="number">0</span>;</span><br><span class="line">tstring strDirName = strOwnPath;</span><br><span class="line">strDirName += TEXT(<span class="string">"/*.*"</span>);<span class="comment">// ç›®å½•åå­—</span></span><br><span class="line"></span><br><span class="line">HANDLE hFile;</span><br><span class="line">WIN32_FIND_DATA pNextInfo;</span><br><span class="line">hFile = FindFirstFile(strDirName.c_str(), &amp;pNextInfo);</span><br><span class="line"><span class="keyword">if</span> (INVALID_HANDLE_VALUE == hFile)</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;tstring&gt; copyVecParent = vecParentPath;</span><br><span class="line">copyVecParent.push_back(ClearPathFormat(strOwnPath));</span><br><span class="line"><span class="keyword">while</span> (FindNextFile(hFile, &amp;pNextInfo))</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// è·³è¿‡ "." ".." ä¸¤ä¸ªç›®å½•</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="built_in">strcmp</span>(pNextInfo.cFileName, <span class="string">"."</span>) || !<span class="built_in">strcmp</span>(pNextInfo.cFileName, <span class="string">".."</span>))</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pNextInfo.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY)</span><br><span class="line">&#123;<span class="comment">// ç›®å½•</span></span><br><span class="line">tstring strTmp = strOwnPath;</span><br><span class="line">strTmp += TEXT(<span class="string">"/"</span>);</span><br><span class="line">strTmp += pNextInfo.cFileName;</span><br><span class="line">mtx.lock();</span><br><span class="line">pool.enqueue(CalcDirectoySize, copyVecParent, strTmp);</span><br><span class="line">mtx.unlock();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;<span class="comment">// æ–‡ä»¶</span></span><br><span class="line">nCurrentSize += GetFileSize(pNextInfo.nFileSizeHigh, pNextInfo.nFileSizeLow);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (nCurrentSize)</span><br><span class="line">&#123;</span><br><span class="line">mtx.lock();</span><br><span class="line">mapDirSize[ClearPathFormat(strOwnPath)] += nCurrentSize;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> parent : vecParentPath)</span><br><span class="line">&#123;</span><br><span class="line">mapDirSize[parent] += nCurrentSize;</span><br><span class="line">&#125;</span><br><span class="line">mtx.unlock();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetDirectorySize</span><span class="params">(tstring strDirName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">vector</span>&lt;tstring&gt; vecEmpty;</span><br><span class="line">mtx.lock();</span><br><span class="line">pool.enqueue(CalcDirectoySize, vecEmpty, strDirName);</span><br><span class="line">mtx.unlock();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">tstring strDirName = TEXT(<span class="string">"c:\\Windows"</span>);</span><br><span class="line"></span><br><span class="line">LARGE_INTEGER t1, t2, tc;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€’å½’è®¡ç®—ç›®å½•å¤§å°</span></span><br><span class="line">QueryPerformanceFrequency(&amp;tc);</span><br><span class="line">QueryPerformanceCounter(&amp;t1);</span><br><span class="line"><span class="built_in">vector</span>&lt;tstring&gt; vecEmpty;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; strDirName &lt;&lt; <span class="string">" size: "</span>&lt;&lt; (<span class="keyword">double</span>)SimpleGetDirectorySize(vecEmpty, strDirName.c_str()) / (<span class="number">1</span> &lt;&lt; <span class="number">30</span>) &lt;&lt; <span class="string">"GB"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">QueryPerformanceCounter(&amp;t2);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Use Time:%fs\n"</span>, (t2.QuadPart - t1.QuadPart)*<span class="number">1.0</span> / tc.QuadPart);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨çº¿ç¨‹æ± è®¡ç®—ç›®å½•å¤§å°</span></span><br><span class="line">QueryPerformanceFrequency(&amp;tc);</span><br><span class="line">QueryPerformanceCounter(&amp;t1);</span><br><span class="line">GetDirectorySize(strDirName);</span><br><span class="line">pool.wait_until_nothing_in_flight();</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; strDirName &lt;&lt; <span class="string">" size: "</span> &lt;&lt; (<span class="keyword">double</span>)mapDirSize[ClearPathFormat(strDirName)] / (<span class="number">1</span> &lt;&lt; <span class="number">30</span>) &lt;&lt; <span class="string">"GB"</span> &lt;&lt; <span class="string">"\t-&gt; with pool size: "</span> &lt;&lt; POOL_SIZE &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">QueryPerformanceCounter(&amp;t2);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Use Time:%fs\n"</span>, (t2.QuadPart - t1.QuadPart)*<span class="number">1.0</span> / tc.QuadPart);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></details><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;windowsä¸‹æ–‡ä»¶å¤¹ç›®å½•å¤§å°æ²¡æœ‰ç›´æ¥è·å–çš„æ–¹æ³•ï¼Œä¸€èˆ¬ç›´æ¥ä½¿ç”¨&lt;strong&gt;é€’å½’&lt;/strong&gt;çš„æ–¹å¼æ¥è®¡ç®—ï¼Œæˆ–è€…ä½¿ç”¨&lt;strong&gt;å¤šçº¿ç¨‹&lt;/strong&gt;æé«˜å¹¶å‘åº¦è®¡ç®—ã€‚&lt;/p&gt;&lt;p&gt;ä»¥ä¸‹ä¸¾çš„ä¾‹å­æ˜¯&lt;strong&gt;è®¡ç®—ç›®æ ‡ç›®å½•å¤§å°ä»¥åŠç›®æ ‡ç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•å¤§å°&lt;/strong&gt;çš„ä¾‹å­, ä¸æ˜¯è®¡ç®—&lt;strong&gt;å•ä¸€ç›®å½•&lt;/strong&gt;å¤§å°çš„ä¾‹å­&lt;/p&gt;&lt;p&gt;&lt;code&gt;ThreadPool.h&lt;/code&gt;çš„å®ç°æ¥æºäº: &lt;a href=&quot;https://github.com/log4cplus/Threadpool&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://github.com/log4cplus/Threadpool&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="C/C++" scheme="https://vonsdite.cn/categories/C-C/"/>
    
    
      <category term="C/C++" scheme="https://vonsdite.cn/tags/C-C/"/>
    
  </entry>
  
  <entry>
    <title>Jsä½¿ç”¨xpathå’Œselectorå®šä½å…ƒç´ </title>
    <link href="https://vonsdite.cn/posts/cb216d2c.html"/>
    <id>https://vonsdite.cn/posts/cb216d2c.html</id>
    <published>2018-11-27T16:21:27.000Z</published>
    <updated>2018-11-27T16:29:19.009Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="Jsæ ¹æ®xpathå®šä½å…ƒç´ "><a href="#Jsæ ¹æ®xpathå®šä½å…ƒç´ " class="headerlink" title="Jsæ ¹æ®xpathå®šä½å…ƒç´ "></a>Jsæ ¹æ®xpathå®šä½å…ƒç´ </h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">find_element_by_xpath</span>(<span class="params">STR_XPATH</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> xresult = <span class="built_in">document</span>.evaluate(STR_XPATH, <span class="built_in">document</span>, <span class="literal">null</span>, XPathResult.ANY_TYPE, <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">var</span> xnodes = [];</span><br><span class="line">    <span class="keyword">var</span> xres;</span><br><span class="line">    <span class="keyword">while</span> (xres = xresult.iterateNext()) &#123;</span><br><span class="line">        xnodes.push(xres);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> xnodes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h1 id="ä½¿ç”¨selectorå®šä½å…ƒç´ "><a href="#ä½¿ç”¨selectorå®šä½å…ƒç´ " class="headerlink" title="ä½¿ç”¨selectorå®šä½å…ƒç´ "></a>ä½¿ç”¨selectorå®šä½å…ƒç´ </h1><p><code>querySelector</code>å’Œ<code>querySelectorAll</code>æ–¹æ³•æ˜¯<strong>W3C Selectors API</strong>è§„èŒƒä¸­å®šä¹‰çš„ã€‚<br>ä»–ä»¬çš„ä½œç”¨æ˜¯æ ¹æ®<strong>CSS é€‰æ‹©å™¨</strong>è§„èŒƒï¼Œä¾¿æ·å®šä½æ–‡æ¡£ä¸­æŒ‡å®šå…ƒç´ ã€‚<br>ç›®å‰å‡ ä¹ä¸»æµæµè§ˆå™¨å‡æ”¯æŒäº†ä»–ä»¬ã€‚åŒ…æ‹¬ IE8(å«) ä»¥ä¸Šç‰ˆæœ¬ã€ Firefoxã€ Chromeã€Safariã€Operaã€‚</p><p><code>querySelector</code> å’Œ <code>querySelectorAll</code> åœ¨è§„èŒƒä¸­å®šä¹‰äº†å¦‚ä¸‹æ¥å£ï¼š<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span> dom &#123;</span><br><span class="line">    [Supplemental, NoInterfaceObject] interface NodeSelector &#123; </span><br><span class="line">        Element querySelector( <span class="keyword">in</span> DOMString selectors);</span><br><span class="line">        NodeList querySelectorAll( <span class="keyword">in</span> DOMString selectors); </span><br><span class="line">    &#125;;</span><br><span class="line">    Document implements NodeSelector;</span><br><span class="line">    DocumentFragment implements NodeSelector;</span><br><span class="line">    Element implements NodeSelector; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p></p><p>ä»æ¥å£å®šä¹‰å¯ä»¥çœ‹åˆ°<code>Document</code>ã€<code>DocumentFragment</code>ã€<code>Element</code>éƒ½å®ç°äº†<code>NodeSelector</code>æ¥å£ã€‚<br>å³è¿™ä¸‰ç§ç±»å‹çš„å…ƒç´ éƒ½æ‹¥æœ‰è€…ä¸¤ä¸ªæ–¹æ³•ã€‚<br><code>querySelector</code>å’Œ<code>querySelectorAll</code>çš„å‚æ•°é¡»æ˜¯ç¬¦åˆ<strong>css selector</strong>çš„å­—ç¬¦ä¸²ã€‚<br>ä¸åŒçš„æ˜¯<code>querySelector</code>è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>querySelectorAll</code>è¿”å›çš„ä¸€ä¸ªé›†åˆ(<code>NodeList</code>)</p><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p>è·å–é¡µé¢å±æ€§ä¸ºtestçš„å…ƒç´ ï¼š<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"test"</span>);</span><br><span class="line"><span class="comment">//or</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">"#test"</span>);</span><br><span class="line"><span class="comment">//or</span></span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">"#test"</span>)[<span class="number">0</span>];</span><br></pre></td></tr></table></figure><p></p><p>è·å–é¡µé¢classå±æ€§ä¸ºâ€™redâ€™çš„å…ƒç´ :<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementsByClassName(<span class="string">'red'</span>)</span><br><span class="line"><span class="comment">//or</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'.red'</span>)</span><br><span class="line"><span class="comment">//or</span></span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">'.red'</span>)</span><br></pre></td></tr></table></figure><p></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;Jsæ ¹æ®xpathå®šä½å…ƒç´ &quot;&gt;&lt;a href=&quot;#Jsæ ¹æ®xpathå®šä½å…ƒç´ &quot; class=&quot;headerlink&quot; title=&quot;Jsæ ¹æ®xpathå®šä½å…ƒç´ &quot;&gt;&lt;/a&gt;Jsæ ¹æ®xpathå®šä½å…ƒç´ &lt;/h1&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;find_element_by_xpath&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;STR_XPATH&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; xresult = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.evaluate(STR_XPATH, &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;, XPathResult.ANY_TYPE, &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; xnodes = [];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; xres;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (xres = xresult.iterateNext()) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        xnodes.push(xres);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; xnodes;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Javascript" scheme="https://vonsdite.cn/categories/Javascript/"/>
    
    
      <category term="Javascript" scheme="https://vonsdite.cn/tags/Javascript/"/>
    
  </entry>
  
  <entry>
    <title>æµè§ˆå™¨/Chrome åœ¨consoleæ§åˆ¶å°å¯¼å…¥jsæ–‡ä»¶</title>
    <link href="https://vonsdite.cn/posts/f979bc0f.html"/>
    <id>https://vonsdite.cn/posts/f979bc0f.html</id>
    <published>2018-11-27T16:05:51.000Z</published>
    <updated>2018-11-27T16:20:28.708Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ‰æ—¶å€™éœ€è¦åœ¨æµè§ˆå™¨çš„<code>console</code>ä¸Š<strong>è¿è¡Œä»£ç </strong>, å½“éœ€è¦<strong>å¼•å…¥åˆ«çš„jsæ–‡ä»¶</strong>æ—¶, å°±å¯ä»¥å¦‚ä¸‹æ“ä½œ:</p><a id="more"></a><p>ä¾‹å­, æ¯”å¦‚å¯¼å…¥ <code>jquery-1.4.min.js</code><br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> importJs=<span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">importJs.setAttribute(<span class="string">"type"</span>,<span class="string">"text/javascript"</span>);</span><br><span class="line">importJs.setAttribute(<span class="string">"src"</span>, <span class="string">'http://ajax.microsoft.com/ajax/jquery/jquery-1.4.min.js'</span>);</span><br><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(importJs);</span><br></pre></td></tr></table></figure><p></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ‰æ—¶å€™éœ€è¦åœ¨æµè§ˆå™¨çš„&lt;code&gt;console&lt;/code&gt;ä¸Š&lt;strong&gt;è¿è¡Œä»£ç &lt;/strong&gt;, å½“éœ€è¦&lt;strong&gt;å¼•å…¥åˆ«çš„jsæ–‡ä»¶&lt;/strong&gt;æ—¶, å°±å¯ä»¥å¦‚ä¸‹æ“ä½œ:&lt;/p&gt;
    
    </summary>
    
      <category term="Javascript" scheme="https://vonsdite.cn/categories/Javascript/"/>
    
      <category term="Console" scheme="https://vonsdite.cn/categories/Javascript/Console/"/>
    
    
      <category term="Javascript" scheme="https://vonsdite.cn/tags/Javascript/"/>
    
  </entry>
  
  <entry>
    <title>Hexo Nextè‡ªå®šä¹‰æ˜¯å¦æ˜¾ç¤ºTOCçš„è‡ªåŠ¨ç¼–å·</title>
    <link href="https://vonsdite.cn/posts/c6c725f5.html"/>
    <id>https://vonsdite.cn/posts/c6c725f5.html</id>
    <published>2018-11-25T02:15:27.000Z</published>
    <updated>2018-12-05T07:38:41.782Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ‰æ—¶å€™å†™æ–‡ç« , æˆ‘ä»¬ä¼šä¹ æƒ¯æ€§åœ°åŠ ä¸Šç¼–å·, æœ‰æ—¶å€™åˆä¸æƒ³åŠ ä¸Šç¼–å·, è¿™ä¸ªæ—¶å€™å°±éœ€è¦è‡ªå®šä¹‰æ˜¯å¦æ˜¾ç¤ºç¼–å·äº†ã€‚</p><p>æ•ˆæœå¦‚å›¾:<br><img src="/images/2018-11-25-10-19-00.png" alt=""></p><a id="more"></a><h1 id="è®¾ç½®"><a href="#è®¾ç½®" class="headerlink" title="è®¾ç½®"></a>è®¾ç½®</h1><p>è¿›å…¥ç«™ç‚¹æ–‡ä»¶å¤¹ä¸‹<code>themes/next/layout/_macro/sidebar.swig</code>, æ‰¾åˆ°å¦‚ä¸‹çš„ä»£ç <br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if page.toc_number === undefined %&#125;</span><br><span class="line">    &#123;% set toc = toc(page.content, &#123; &quot;class&quot;: &quot;nav&quot;, list_number: theme.toc.number &#125;) %&#125;</span><br><span class="line">&#123;% else %&#125;</span><br><span class="line">    &#123;% set toc = toc(page.content, &#123; &quot;class&quot;: &quot;nav&quot;, list_number: page.toc_number &#125;) %&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p></p><p>å‘ç°ä»£ç çš„é€»è¾‘æ˜¯ï¼š</p><ol><li>å…ˆåˆ¤æ–­æ–‡ç« çš„<code>front-matter</code>æ˜¯å¦å®šä¹‰äº†<code>toc_number</code></li><li>æ— åˆ™ä¼šä½¿ç”¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­çš„<code>toc_number</code></li></ol><p>è€Œ<code>toc_number</code>æ˜¯ä¸€ä¸ª<strong>å¸ƒå°”å€¼</strong>, è¡¨æ˜æ˜¯å¦è¦ç»™æ–‡ç« çš„tocåˆ—è¡¨ç¼–å·<br>æ‰€ä»¥åªè¦åœ¨<strong>ä¸éœ€è¦åŠ ç¼–å·</strong>çš„æ–‡ç« çš„<code>front-matter</code>åŠ ä¸Š <code>toc_number: false</code>å³å¯<br><img src="/images/2018-11-25-10-22-28.png" alt=""></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ‰æ—¶å€™å†™æ–‡ç« , æˆ‘ä»¬ä¼šä¹ æƒ¯æ€§åœ°åŠ ä¸Šç¼–å·, æœ‰æ—¶å€™åˆä¸æƒ³åŠ ä¸Šç¼–å·, è¿™ä¸ªæ—¶å€™å°±éœ€è¦è‡ªå®šä¹‰æ˜¯å¦æ˜¾ç¤ºç¼–å·äº†ã€‚&lt;/p&gt;&lt;p&gt;æ•ˆæœå¦‚å›¾:&lt;br&gt;&lt;img src=&quot;/images/2018-11-25-10-19-00.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://vonsdite.cn/categories/Hexo/"/>
    
      <category term="Next" scheme="https://vonsdite.cn/categories/Hexo/Next/"/>
    
    
      <category term="Hexo" scheme="https://vonsdite.cn/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hexo æ·»åŠ sitemapä¼˜åŒ–seo</title>
    <link href="https://vonsdite.cn/posts/f6d1cfff.html"/>
    <id>https://vonsdite.cn/posts/f6d1cfff.html</id>
    <published>2018-11-24T16:21:58.000Z</published>
    <updated>2018-11-25T02:13:43.106Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="æ·»åŠ sitemap"><a href="#æ·»åŠ sitemap" class="headerlink" title="æ·»åŠ sitemap"></a>æ·»åŠ sitemap</h1><h4 id="1-ä½¿ç”¨å‘½ä»¤è¡Œcmdè¿›å…¥ç«™ç‚¹æ–‡ä»¶å¤¹"><a href="#1-ä½¿ç”¨å‘½ä»¤è¡Œcmdè¿›å…¥ç«™ç‚¹æ–‡ä»¶å¤¹" class="headerlink" title="1. ä½¿ç”¨å‘½ä»¤è¡Œcmdè¿›å…¥ç«™ç‚¹æ–‡ä»¶å¤¹"></a>1. ä½¿ç”¨å‘½ä»¤è¡Œ<code>cmd</code>è¿›å…¥<strong>ç«™ç‚¹æ–‡ä»¶å¤¹</strong></h4><h4 id="2-è¾“å…¥ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤"><a href="#2-è¾“å…¥ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤" class="headerlink" title="2. è¾“å…¥ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤"></a>2. è¾“å…¥ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure><h4 id="3-åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶-config-ymlåŠ å…¥å¦‚ä¸‹çš„é…ç½®"><a href="#3-åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶-config-ymlåŠ å…¥å¦‚ä¸‹çš„é…ç½®" class="headerlink" title="3. åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlåŠ å…¥å¦‚ä¸‹çš„é…ç½®"></a>3. åœ¨<strong>ç«™ç‚¹é…ç½®æ–‡ä»¶</strong><code>_config.yml</code>åŠ å…¥å¦‚ä¸‹çš„é…ç½®</h4><p><code>sitemap</code>æ˜¯ç»™googleçš„ç«™ç‚¹åœ°å›¾, <code>baidusitemap</code>æ˜¯ç»™ç™¾åº¦çš„ç«™ç‚¹åœ°å›¾</p><a id="more"></a><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sitemap</span></span><br><span class="line"><span class="attr">sitemap:</span></span><br><span class="line"><span class="attr">  path:</span> <span class="string">sitemap.xml</span></span><br><span class="line"><span class="attr">baidusitemap:</span></span><br><span class="line"><span class="attr">  path:</span> <span class="string">baidusitemap.xml</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å, è¾“å…¥å‘½ä»¤<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p></p><p>å³å¯æŸ¥çœ‹åˆ°ç«™ç‚¹åœ°å›¾çš„ä¿¡æ¯æˆ–è€…åœ¨<code>public</code>ä¸­çœ‹åˆ°<strong>sitemap.xml</strong>å’Œ<strong>baidusitemap.xml</strong></p><p><img src="/images/2018-11-25-00-30-35.png" alt=""><br><img src="/images/2018-11-25-00-30-54.png" alt=""></p><h4 id="4-å°†sitemapæäº¤"><a href="#4-å°†sitemapæäº¤" class="headerlink" title="4. å°†sitemapæäº¤"></a>4. å°†sitemapæäº¤</h4><p>åœ¨<code>google search console</code>æäº¤ä½ çš„<code>sitemap.xml</code><br><img src="/images/2018-11-25-00-33-04.png" alt=""></p><p>åœ¨<code>ç™¾åº¦æœç´¢èµ„æºå¹³å°</code>-<code>æ•°æ®å¼•å…¥</code>-<code>é“¾æ¥æäº¤</code>-é¡µé¢åº•éƒ¨<code>è‡ªåŠ¨æäº¤</code>-<code>sitemap</code>æäº¤sitemapåœ°å€<br><img src="/images/2018-11-25-00-42-29.png" alt=""></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:55 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;æ·»åŠ sitemap&quot;&gt;&lt;a href=&quot;#æ·»åŠ sitemap&quot; class=&quot;headerlink&quot; title=&quot;æ·»åŠ sitemap&quot;&gt;&lt;/a&gt;æ·»åŠ sitemap&lt;/h1&gt;&lt;h4 id=&quot;1-ä½¿ç”¨å‘½ä»¤è¡Œcmdè¿›å…¥ç«™ç‚¹æ–‡ä»¶å¤¹&quot;&gt;&lt;a href=&quot;#1-ä½¿ç”¨å‘½ä»¤è¡Œcmdè¿›å…¥ç«™ç‚¹æ–‡ä»¶å¤¹&quot; class=&quot;headerlink&quot; title=&quot;1. ä½¿ç”¨å‘½ä»¤è¡Œcmdè¿›å…¥ç«™ç‚¹æ–‡ä»¶å¤¹&quot;&gt;&lt;/a&gt;1. ä½¿ç”¨å‘½ä»¤è¡Œ&lt;code&gt;cmd&lt;/code&gt;è¿›å…¥&lt;strong&gt;ç«™ç‚¹æ–‡ä»¶å¤¹&lt;/strong&gt;&lt;/h4&gt;&lt;h4 id=&quot;2-è¾“å…¥ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤&quot;&gt;&lt;a href=&quot;#2-è¾“å…¥ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤&quot; class=&quot;headerlink&quot; title=&quot;2. è¾“å…¥ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤&quot;&gt;&lt;/a&gt;2. è¾“å…¥ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-generator-sitemap --save&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;npm install hexo-generator-baidu-sitemap --save&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;h4 id=&quot;3-åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶-config-ymlåŠ å…¥å¦‚ä¸‹çš„é…ç½®&quot;&gt;&lt;a href=&quot;#3-åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶-config-ymlåŠ å…¥å¦‚ä¸‹çš„é…ç½®&quot; class=&quot;headerlink&quot; title=&quot;3. åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlåŠ å…¥å¦‚ä¸‹çš„é…ç½®&quot;&gt;&lt;/a&gt;3. åœ¨&lt;strong&gt;ç«™ç‚¹é…ç½®æ–‡ä»¶&lt;/strong&gt;&lt;code&gt;_config.yml&lt;/code&gt;åŠ å…¥å¦‚ä¸‹çš„é…ç½®&lt;/h4&gt;&lt;p&gt;&lt;code&gt;sitemap&lt;/code&gt;æ˜¯ç»™googleçš„ç«™ç‚¹åœ°å›¾, &lt;code&gt;baidusitemap&lt;/code&gt;æ˜¯ç»™ç™¾åº¦çš„ç«™ç‚¹åœ°å›¾&lt;/p&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://vonsdite.cn/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="https://vonsdite.cn/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>vscode å¸¸ç”¨å¿«æ·é”®</title>
    <link href="https://vonsdite.cn/posts/317f5687.html"/>
    <id>https://vonsdite.cn/posts/317f5687.html</id>
    <published>2018-11-24T08:42:11.000Z</published>
    <updated>2018-11-24T09:07:58.978Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="VscodeæŸ¥çœ‹æ‰€æœ‰çš„å¿«æ·é”®"><a href="#VscodeæŸ¥çœ‹æ‰€æœ‰çš„å¿«æ·é”®" class="headerlink" title="VscodeæŸ¥çœ‹æ‰€æœ‰çš„å¿«æ·é”®"></a>VscodeæŸ¥çœ‹æ‰€æœ‰çš„å¿«æ·é”®</h1><p><img src="/images/2018-11-24-16-44-37.png" alt=""></p><h1 id="æŸ¥çœ‹ä¿®æ”¹è¿‡çš„å¿«æ·é”®"><a href="#æŸ¥çœ‹ä¿®æ”¹è¿‡çš„å¿«æ·é”®" class="headerlink" title="æŸ¥çœ‹ä¿®æ”¹è¿‡çš„å¿«æ·é”®"></a>æŸ¥çœ‹ä¿®æ”¹è¿‡çš„å¿«æ·é”®</h1><p>Vscodeå¯ä»¥æŸ¥çœ‹ç”¨æˆ·è‡ªå·±ä¿®æ”¹è¿‡çš„å¿«æ·é”®, åœ¨æœç´¢æ¡†é”®å…¥<code>@source:user</code>å³å¯</p><a id="more"></a><p><img src="/images/2018-11-24-16-44-52.png" alt=""></p><h1 id="Vscodeå¸¸ç”¨å¿«æ·é”®"><a href="#Vscodeå¸¸ç”¨å¿«æ·é”®" class="headerlink" title="Vscodeå¸¸ç”¨å¿«æ·é”®"></a>Vscodeå¸¸ç”¨å¿«æ·é”®</h1><table><thead><tr><th>æŒ‰é”®</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>Ctrl + K,Ctrl + C</code> æˆ– <code>Ctrl + /</code></td><td>å•è¡Œæ³¨é‡Š</td></tr><tr><td><code>Ctrl + K, Ctrl + U</code></td><td>å–æ¶ˆå•è¡Œæ³¨é‡Š</td></tr><tr><td><code>Alt + Shift + A</code></td><td>å¤šè¡Œæ³¨é‡Š</td></tr><tr><td><code>Ctrl + Shift + P</code>æˆ–<code>F1</code></td><td>æ˜¾ç¤ºå‘½ä»¤é¢æ¿ Show Command Palette</td></tr><tr><td><code>Ctrl + P</code></td><td>å¿«é€Ÿæ‰“å¼€ Quick Open</td></tr><tr><td><code>Ctrl + Shift + N</code></td><td>æ–°çª—å£/å®ä¾‹ New window/instance</td></tr><tr><td><code>Ctrl + Shift + W</code></td><td>å…³é—­çª—å£/å®ä¾‹ Close window/instance</td></tr><tr><td><code>Ctrl + W</code></td><td>å…³é—­å•ä¸ªçª—å£</td></tr><tr><td><code>Ctrl + X</code></td><td>å‰ªåˆ‡è¡Œï¼ˆç©ºé€‰å®šï¼‰ Cut line (empty selection)</td></tr><tr><td><code>Ctrl + C</code></td><td>å¤åˆ¶è¡Œï¼ˆç©ºé€‰å®šï¼‰Copy line (empty selection)</td></tr><tr><td><code>Alt + â†‘ / â†“</code></td><td>å‘ä¸Š/å‘ä¸‹ç§»åŠ¨è¡Œ Move line up/down</td></tr><tr><td><code>Shift + Alt + â†“ / â†‘</code></td><td>å‘ä¸Š/å‘ä¸‹å¤åˆ¶è¡Œ Copy line up/down</td></tr><tr><td><code>Ctrl + Shift + K</code></td><td>åˆ é™¤è¡Œ Delete line</td></tr><tr><td><code>Ctrl + Enter</code></td><td>åœ¨ä¸‹é¢æ’å…¥è¡Œ Insert line below</td></tr><tr><td><code>Ctrl + Shift + Enter</code></td><td>åœ¨ä¸Šé¢æ’å…¥è¡Œ Insert line above</td></tr><tr><td><code>Ctrl + Shift + \</code></td><td>è·³åˆ°åŒ¹é…çš„æ‹¬å· Jump to matching bracket</td></tr><tr><td><code>Ctrl + ] / [</code></td><td>ç¼©è¿›/ç¼©è¿›è¡Œ Indent/outdent line</td></tr><tr><td><code>Home</code></td><td>è½¬åˆ°è¡Œé¦– Go to beginning of line</td></tr><tr><td><code>End</code></td><td>è½¬åˆ°è¡Œå°¾ Go to end of line</td></tr><tr><td><code>Ctrl + Home</code></td><td>è½¬åˆ°æ–‡ä»¶å¼€å¤´ Go to beginning of file</td></tr><tr><td><code>Ctrl + End</code></td><td>è½¬åˆ°æ–‡ä»¶æœ«å°¾ Go to end of file</td></tr><tr><td><code>Ctrl + â†‘ / â†“</code></td><td>å‘ä¸Š/å‘ä¸‹æ»šåŠ¨è¡Œ Scroll line up/down</td></tr><tr><td><code>Alt + PgUp / PgDown</code></td><td>å‘ä¸Š/å‘ä¸‹æ»šåŠ¨é¡µé¢ Scroll page up/down</td></tr><tr><td><code>Ctrl + Shift + [</code></td><td>æŠ˜å ï¼ˆæŠ˜å ï¼‰åŒºåŸŸ Fold (collapse) region</td></tr><tr><td><code>Ctrl + Shift + ]</code></td><td>å±•å¼€ï¼ˆæœªæŠ˜å ï¼‰åŒºåŸŸ Unfold (uncollapse) region</td></tr><tr><td><code>Ctrl + K Ctrl + [</code></td><td>æŠ˜å ï¼ˆæœªæŠ˜å ï¼‰æ‰€æœ‰å­åŒºåŸŸ Fold (collapse) all subregions</td></tr><tr><td><code>Ctrl + K Ctrl + ]</code></td><td>å±•å¼€ï¼ˆæœªæŠ˜å ï¼‰æ‰€æœ‰å­åŒºåŸŸ Unfold (uncollapse) all subregions</td></tr><tr><td><code>Ctrl + K Ctrl + 0</code></td><td>æŠ˜å ï¼ˆæŠ˜å ï¼‰æ‰€æœ‰åŒºåŸŸ Fold (collapse) all regions</td></tr><tr><td><code>Ctrl + K Ctrl + J</code></td><td>å±•å¼€ï¼ˆæœªæŠ˜å ï¼‰æ‰€æœ‰åŒºåŸŸ Unfold (uncollapse) all regions</td></tr><tr><td><code>Alt + Z</code></td><td>åˆ‡æ¢æ¢è¡Œ Toggle word wrap</td></tr><tr><td><code>Ctrl + T</code></td><td>æ˜¾ç¤ºæ‰€æœ‰ç¬¦å· Show all Symbols</td></tr><tr><td><code>Ctrl + G</code></td><td>è½¬åˆ°è¡Œâ€¦ Go to Lineâ€¦</td></tr><tr><td><code>Ctrl + P</code></td><td>è½¬åˆ°æ–‡ä»¶â€¦ Go to Fileâ€¦</td></tr><tr><td><code>Ctrl + Shift + O</code></td><td>è½¬åˆ°ç¬¦å·â€¦ Go to Symbolâ€¦</td></tr><tr><td><code>Ctrl + Shift + M</code></td><td>æ˜¾ç¤ºé—®é¢˜é¢æ¿ Show Problems panel</td></tr><tr><td><code>F8</code></td><td>è½¬åˆ°ä¸‹ä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Š Go to next error or warning</td></tr><tr><td><code>Shift + F8</code></td><td>è½¬åˆ°ä¸Šä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Š Go to previous error or warning</td></tr><tr><td><code>Ctrl + Shift + Tab</code></td><td>å¯¼èˆªç¼–è¾‘å™¨ç»„å†å²è®°å½• Navigate editor group history</td></tr><tr><td><code>Alt + â†/â†’</code></td><td>è¿”å›/å‰è¿› Go back / forward</td></tr><tr><td><code>Ctrl + M</code></td><td>åˆ‡æ¢é€‰é¡¹å¡ç§»åŠ¨ç„¦ç‚¹ Toggle Tab moves focus</td></tr><tr><td><code>Ctrl + F</code></td><td>æŸ¥æ‰¾ Find</td></tr><tr><td><code>Ctrl + H</code></td><td>æ›¿æ¢ Replace</td></tr><tr><td><code>F3 / Shift + F3</code></td><td>æŸ¥æ‰¾ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ª Find next/previous</td></tr><tr><td><code>Alt + Enter</code></td><td>é€‰æ‹©æŸ¥æ‰¾åŒ¹é…çš„æ‰€æœ‰å‡ºç° Select all occurences of Find match</td></tr><tr><td><code>Ctrl + D</code></td><td>å°†é€‰æ‹©æ·»åŠ åˆ°ä¸‹ä¸€ä¸ªæŸ¥æ‰¾åŒ¹é… Add selection to next Find match</td></tr><tr><td><code>Ctrl + K Ctrl + D</code></td><td>å°†æœ€åä¸€ä¸ªé€‰æ‹©ç§»è‡³ä¸‹ä¸€ä¸ªæŸ¥æ‰¾åŒ¹é…é¡¹ Move last selection to next Find match</td></tr><tr><td><code>Alt + C / R / W</code></td><td>åˆ‡æ¢åŒºåˆ†å¤§å°å†™/æ­£åˆ™è¡¨è¾¾å¼/æ•´ä¸ªè¯ Toggle case-sensitive / regex / whole word</td></tr><tr><td><code>Alt + å•å‡»</code></td><td>æ’å…¥å…‰æ ‡ Insert cursor</td></tr><tr><td><code>Ctrl + Alt + â†‘/â†“</code></td><td>åœ¨ä¸Š/ä¸‹æ’å…¥å…‰æ ‡ Insert cursor above / below</td></tr><tr><td><code>Ctrl + U</code></td><td>æ’¤æ¶ˆä¸Šä¸€ä¸ªå…‰æ ‡æ“ä½œ Undo last cursor operation</td></tr><tr><td><code>Shift + Alt + I</code></td><td>åœ¨é€‰å®šçš„æ¯ä¸€è¡Œçš„æœ«å°¾æ’å…¥å…‰æ ‡ Insert cursor at end of each line selected</td></tr><tr><td><code>Ctrl + I</code></td><td>é€‰æ‹©å½“å‰è¡Œ Select current line</td></tr><tr><td><code>Ctrl + Shift + L</code></td><td>é€‰æ‹©å½“å‰é€‰æ‹©çš„æ‰€æœ‰å‡ºç° Select all occurrences of current selection</td></tr><tr><td><code>Ctrl + F2</code></td><td>é€‰æ‹©å½“å‰å­—çš„æ‰€æœ‰å‡ºç° Select all occurrences of current word</td></tr><tr><td><code>Shift + Alt + â†’</code></td><td>å±•å¼€é€‰æ‹© Expand selection</td></tr><tr><td><code>Shift + Alt + â†</code></td><td>ç¼©å°é€‰æ‹© Shrink selection</td></tr><tr><td><code>Shift + Alt + ï¼ˆæ‹–åŠ¨é¼ æ ‡ï¼‰</code></td><td>åˆ—ï¼ˆæ¡†ï¼‰é€‰æ‹© Column (box) selection</td></tr><tr><td><code>Ctrl + Shift + Alt +ï¼ˆç®­å¤´é”®ï¼‰</code></td><td>åˆ—ï¼ˆæ¡†ï¼‰é€‰æ‹© Column (box) selection</td></tr><tr><td><code>Ctrl + Shift + Alt + PgUp / PgDown</code></td><td>åˆ—ï¼ˆæ¡†ï¼‰é€‰æ‹©é¡µä¸Š/ä¸‹ Column (box) selection page up/down</td></tr><tr><td><code>Ctrl + space</code></td><td>è§¦å‘å»ºè®® Trigger suggestion</td></tr><tr><td><code>Ctrl + Shift + Space</code></td><td>è§¦å‘å™¨å‚æ•°æç¤º Trigger parameter hints</td></tr><tr><td><code>Tab</code></td><td>Emmet å±•å¼€ç¼©å†™ Emmet expand abbreviation</td></tr><tr><td><code>Shift + Alt + F</code></td><td>æ ¼å¼åŒ–æ–‡æ¡£ Format document</td></tr><tr><td><code>Ctrl + K Ctrl + F</code></td><td>æ ¼å¼é€‰å®šåŒºåŸŸ Format selection</td></tr><tr><td><code>F12</code></td><td>è½¬åˆ°å®šä¹‰ Go to Definition</td></tr><tr><td><code>Alt + F12</code></td><td>Peekå®šä¹‰ Peek Definition</td></tr><tr><td><code>Ctrl + K F12</code></td><td>æ‰“å¼€å®šä¹‰åˆ°è¾¹ Open Definition to the side</td></tr><tr><td><code>Ctrl + .</code></td><td>å¿«é€Ÿè§£å†³ Quick Fix</td></tr><tr><td><code>Shift + F12</code></td><td>æ˜¾ç¤ºå¼•ç”¨ Show References</td></tr><tr><td><code>F2</code></td><td>é‡å‘½åç¬¦å· Rename Symbol</td></tr><tr><td><code>Ctrl + Shift + . /ï¼Œ</code></td><td>æ›¿æ¢ä¸ºä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªå€¼ Replace with next/previous value</td></tr><tr><td><code>Ctrl + K Ctrl + X</code></td><td>ä¿®å‰ªå°¾éšç©ºæ ¼ Trim trailing whitespace</td></tr><tr><td><code>Ctrl + K M</code></td><td>æ›´æ”¹æ–‡ä»¶è¯­è¨€ Change file language</td></tr><tr><td><code>Ctrl + F4, Ctrl + W</code></td><td>å…³é—­ç¼–è¾‘å™¨ Close editor</td></tr><tr><td><code>Ctrl + K F</code></td><td>å…³é—­æ–‡ä»¶å¤¹ Close folder</td></tr><tr><td><code>Ctrl + \</code></td><td>æ‹†åˆ†ç¼–è¾‘å™¨ Split editor</td></tr><tr><td><code>Ctrl + 1 / 2 / 3</code></td><td>èšç„¦åˆ°ç¬¬1ï¼Œç¬¬2æˆ–ç¬¬3ç¼–è¾‘å™¨ç»„ Focus into 1st, 2nd or 3rd editor group</td></tr><tr><td><code>Ctrl + K Ctrl + â†/â†’</code></td><td>èšç„¦åˆ°ä¸Šä¸€ä¸ª/ä¸‹ä¸€ä¸ªç¼–è¾‘å™¨ç»„ Focus into previous/next editor group</td></tr><tr><td><code>Ctrl + Shift + PgUp / PgDown</code></td><td>å‘å·¦/å‘å³ç§»åŠ¨ç¼–è¾‘å™¨ Move editor left/right</td></tr><tr><td><code>Ctrl + K â† / â†’</code></td><td>ç§»åŠ¨æ´»åŠ¨ç¼–è¾‘å™¨ç»„ Move active editor group</td></tr><tr><td><code>Ctrl + N</code></td><td>æ–°æ–‡ä»¶ New File</td></tr><tr><td><code>Ctrl + O</code></td><td>æ‰“å¼€æ–‡ä»¶â€¦ Open Fileâ€¦</td></tr><tr><td><code>Ctrl + S</code></td><td>ä¿å­˜ Save</td></tr><tr><td><code>Ctrl + Shift + S</code></td><td>å¦å­˜ä¸ºâ€¦ Save Asâ€¦</td></tr><tr><td><code>Ctrl + K S</code></td><td>å…¨éƒ¨ä¿å­˜ Save All</td></tr><tr><td><code>Ctrl + F4</code></td><td>å…³é—­ Close</td></tr><tr><td><code>Ctrl + K Ctrl + W</code></td><td>å…³é—­æ‰€æœ‰ Close All</td></tr><tr><td><code>Ctrl + Shift + T</code></td><td>é‡æ–°æ‰“å¼€å…³é—­çš„ç¼–è¾‘å™¨ Reopen closed editor</td></tr><tr><td><code>Ctrl + K</code></td><td>è¾“å…¥ä¿æŒæ‰“å¼€ Enter Keep Open</td></tr><tr><td><code>Ctrl + Tab</code></td><td>æ‰“å¼€ä¸‹ä¸€ä¸ª Open next</td></tr><tr><td><code>Ctrl + Shift + Tab</code></td><td>æ‰“å¼€ä¸Šä¸€ä¸ª Open previous</td></tr><tr><td><code>Ctrl + K P</code></td><td>å¤åˆ¶æ´»åŠ¨æ–‡ä»¶çš„è·¯å¾„ Copy path of active file</td></tr><tr><td><code>Ctrl + K R</code></td><td>æ˜¾ç¤ºèµ„æºç®¡ç†å™¨ä¸­çš„æ´»åŠ¨æ–‡ä»¶ Reveal active file in Explorer</td></tr><tr><td><code>Ctrl + K O</code></td><td>æ˜¾ç¤ºæ–°çª—å£/å®ä¾‹ä¸­çš„æ´»åŠ¨æ–‡ä»¶ Show active file in new window/instance</td></tr><tr><td><code>F11</code></td><td>åˆ‡æ¢å…¨å± Toggle full screen</td></tr><tr><td><code>Shift + Alt + 1</code></td><td>åˆ‡æ¢ç¼–è¾‘å™¨å¸ƒå±€ Toggle editor layout</td></tr><tr><td><code>Ctrl + = / -</code></td><td>æ”¾å¤§/ç¼©å° Zoom in/out</td></tr><tr><td><code>Ctrl + B</code></td><td>åˆ‡æ¢ä¾§æ å¯è§æ€§ Toggle Sidebar visibility</td></tr><tr><td><code>Ctrl + Shift + E</code></td><td>æ˜¾ç¤ºæµè§ˆå™¨/åˆ‡æ¢ç„¦ç‚¹ Show Explorer / Toggle focus</td></tr><tr><td><code>Ctrl + Shift + F</code></td><td>æ˜¾ç¤ºæœç´¢ Show Search</td></tr><tr><td><code>Ctrl + Shift + G</code></td><td>æ˜¾ç¤ºGit Show Git</td></tr><tr><td><code>Ctrl + Shift + D</code></td><td>æ˜¾ç¤ºè°ƒè¯• Show Debug</td></tr><tr><td><code>Ctrl + Shift + X</code></td><td>æ˜¾ç¤ºæ‰©å±• Show Extensions</td></tr><tr><td><code>Ctrl + Shift + H</code></td><td>æ›¿æ¢æ–‡ä»¶ Replace in files</td></tr><tr><td><code>Ctrl + Shift + J</code></td><td>åˆ‡æ¢æœç´¢è¯¦ç»†ä¿¡æ¯ Toggle Search details</td></tr><tr><td><code>Ctrl + Shift + C</code></td><td>æ‰“å¼€æ–°å‘½ä»¤æç¤ºç¬¦/ç»ˆç«¯ Open new command prompt/terminal</td></tr><tr><td><code>Ctrl + Shift + U</code></td><td>æ˜¾ç¤ºè¾“å‡ºé¢æ¿ Show Output panel</td></tr><tr><td><code>Ctrl + Shift + V</code></td><td>åˆ‡æ¢Markdowné¢„è§ˆ Toggle Markdown preview</td></tr><tr><td><code>Ctrl + K V</code></td><td>ä»æ—è¾¹æ‰“å¼€Markdowné¢„è§ˆ Open Markdown preview to the side</td></tr><tr><td><code>F9</code></td><td>åˆ‡æ¢æ–­ç‚¹ Toggle breakpoint</td></tr><tr><td><code>F5</code></td><td>å¼€å§‹/ç»§ç»­ Start/Continue</td></tr><tr><td><code>Shift + F5</code></td><td>åœæ­¢ Stop</td></tr><tr><td><code>F11 / Shift + F11</code></td><td>ä¸‹ä¸€æ­¥/ä¸Šä¸€æ­¥ Step into/out</td></tr><tr><td><code>F10</code></td><td>è·³è¿‡ Step over</td></tr><tr><td><code>Ctrl + K Ctrl + I</code></td><td>æ˜¾ç¤ºæ‚¬åœ Show hover</td></tr><tr><td><code>Ctrl + `</code></td><td>æ˜¾ç¤ºé›†æˆç»ˆç«¯ Show integrated terminal</td></tr><tr><td><code>Ctrl + Shift + `</code></td><td>åˆ›å»ºæ–°ç»ˆç«¯ Create new terminal</td></tr><tr><td><code>Ctrl + Shift + C</code></td><td>å¤åˆ¶é€‰å®š Copy selection</td></tr><tr><td><code>Ctrl + Shift + V</code></td><td>ç²˜è´´åˆ°æ´»åŠ¨ç«¯å­ Paste into active terminal</td></tr><tr><td><code>Ctrl + â†‘ / â†“</code></td><td>å‘ä¸Š/å‘ä¸‹æ»šåŠ¨ Scroll up/down</td></tr><tr><td><code>Shift + PgUp / PgDown</code></td><td>å‘ä¸Š/å‘ä¸‹æ»šåŠ¨é¡µé¢ Scroll page up/down</td></tr><tr><td><code>Ctrl + Home / End</code></td><td>æ»šåŠ¨åˆ°é¡¶éƒ¨/åº•éƒ¨ Scroll to top/bottom</td></tr></tbody></table><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;VscodeæŸ¥çœ‹æ‰€æœ‰çš„å¿«æ·é”®&quot;&gt;&lt;a href=&quot;#VscodeæŸ¥çœ‹æ‰€æœ‰çš„å¿«æ·é”®&quot; class=&quot;headerlink&quot; title=&quot;VscodeæŸ¥çœ‹æ‰€æœ‰çš„å¿«æ·é”®&quot;&gt;&lt;/a&gt;VscodeæŸ¥çœ‹æ‰€æœ‰çš„å¿«æ·é”®&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/images/2018-11-24-16-44-37.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;h1 id=&quot;æŸ¥çœ‹ä¿®æ”¹è¿‡çš„å¿«æ·é”®&quot;&gt;&lt;a href=&quot;#æŸ¥çœ‹ä¿®æ”¹è¿‡çš„å¿«æ·é”®&quot; class=&quot;headerlink&quot; title=&quot;æŸ¥çœ‹ä¿®æ”¹è¿‡çš„å¿«æ·é”®&quot;&gt;&lt;/a&gt;æŸ¥çœ‹ä¿®æ”¹è¿‡çš„å¿«æ·é”®&lt;/h1&gt;&lt;p&gt;Vscodeå¯ä»¥æŸ¥çœ‹ç”¨æˆ·è‡ªå·±ä¿®æ”¹è¿‡çš„å¿«æ·é”®, åœ¨æœç´¢æ¡†é”®å…¥&lt;code&gt;@source:user&lt;/code&gt;å³å¯&lt;/p&gt;
    
    </summary>
    
      <category term="Vscode" scheme="https://vonsdite.cn/categories/Vscode/"/>
    
    
      <category term="Vscode" scheme="https://vonsdite.cn/tags/Vscode/"/>
    
  </entry>
  
  <entry>
    <title>vscode pythonç¯å¢ƒé…ç½®</title>
    <link href="https://vonsdite.cn/posts/8caab64.html"/>
    <id>https://vonsdite.cn/posts/8caab64.html</id>
    <published>2018-11-24T08:04:38.000Z</published>
    <updated>2018-11-24T08:36:37.894Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>Vscode Python <strong>Windows</strong>ç¯å¢ƒé…ç½®</p><ol><li><p>å®‰è£…<strong>Vscode</strong></p></li><li><p>å®‰è£…Vscodeæ’ä»¶<strong>Python</strong><br><img src="/images/2018-11-24-16-09-13.png" alt=""></p></li><li><p>å®‰è£…<a href="https://www.python.org/" target="_blank" rel="noopener">Python3</a></p></li></ol><a id="more"></a><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><p>å¯åŠ¨Pythoné¡¹ç›®çš„<strong>å·¥ä½œåŒº</strong>, ä¾‹å¦‚<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir hello</span><br><span class="line"><span class="built_in">cd</span> hello</span><br><span class="line">code .</span><br></pre></td></tr></table></figure><p></p><h2 id="é€‰æ‹©Pythonè§£æå™¨"><a href="#é€‰æ‹©Pythonè§£æå™¨" class="headerlink" title="é€‰æ‹©Pythonè§£æå™¨"></a>é€‰æ‹©Pythonè§£æå™¨</h2><p>æŒ‰ä¸‹<code>ctrl</code>+<code>shift</code>+<code>p</code> è°ƒå‡ºå‘½ä»¤é¢æ¿, é”®å…¥<code>python: select interpreter</code>, é€‰æ‹©è¯¥Pythoné¡¹ç›®çš„Pythonè§£æå™¨</p><p>ä¸åœ¨<code>settings.json</code>çš„å·¥ä½œåŒºä¸­è®¾ç½®<code>python.pythonPath</code>ç›¸åŒ<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"python.pythonPath"</span>: <span class="string">"E:\\python\\python.exe"</span>,</span><br></pre></td></tr></table></figure><p></p><h2 id="è¿è¡ŒPythonç¨‹åº"><a href="#è¿è¡ŒPythonç¨‹åº" class="headerlink" title="è¿è¡ŒPythonç¨‹åº"></a>è¿è¡ŒPythonç¨‹åº</h2><p><img src="/images/2018-11-24-16-17-14.png" alt=""></p><p><img src="/images/2018-11-24-16-17-28.png" alt=""></p><h2 id="é…ç½®Pythonè°ƒè¯•å™¨"><a href="#é…ç½®Pythonè°ƒè¯•å™¨" class="headerlink" title="é…ç½®Pythonè°ƒè¯•å™¨"></a>é…ç½®Pythonè°ƒè¯•å™¨</h2><ol><li><p>å…ˆè®¾ç½®æ–­ç‚¹<br><img src="/images/2018-11-24-16-20-10.png" alt=""></p></li><li><p>ç‚¹å‡»å·¦ä¾§çš„<strong>è°ƒè¯•</strong><br><img src="/images/2018-11-24-16-20-46.png" alt=""></p></li><li><p>ç‚¹å‡»å°é½¿è½®è®¾ç½®<code>launch.json</code>(ä¼šè‡ªåŠ¨ç”Ÿæˆ<code>launch.json</code>æ¨¡æ¿, ä¸‹æ‹‰æ¡†é€‰ç¬¬ä¸€ä¸ª<code>Python: Current File (Integrated Terminal)</code>å°±å¥½äº†)</p></li></ol><p><img src="/images/2018-11-24-16-21-12.png" alt=""></p><p><img src="/images/2018-11-24-16-21-32.png" alt=""></p><p>å¦‚æœæƒ³åœ¨è°ƒè¯•çš„æ—¶å€™, è®©ç¨‹åºåœåœ¨ç¨‹åºè¿è¡Œå‰, å¯ä»¥å†<code>launch.json</code>ä¸­åŠ å…¥<code>stopOnEntry: true</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"Python: Current File (Integrated Terminal)"</span>,</span><br><span class="line">    <span class="string">"type"</span>: <span class="string">"python"</span>,</span><br><span class="line">    <span class="string">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">    <span class="string">"program"</span>: <span class="string">"$&#123;file&#125;"</span>,</span><br><span class="line">    <span class="string">"console"</span>: <span class="string">"integratedTerminal"</span>,</span><br><span class="line">    <span class="string">"stopOnEntry"</span>: true</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ol start="4"><li>ç„¶åæŒ‰<code>f5</code>å³å¯è¿›è¡Œ<strong>è°ƒè¯•</strong>(å¯ä»¥å•æ­¥è°ƒè¯•ç­‰ç­‰, æ›´å¤šç»†èŠ‚å¯ä»¥çœ‹ <a href="https://code.visualstudio.com/docs/python/debugging" target="_blank" rel="noopener">pythonè°ƒè¯•</a>)</li></ol><p><img src="/images/2018-11-24-16-25-18.png" alt=""></p><h2 id="å®‰è£…linting"><a href="#å®‰è£…linting" class="headerlink" title="å®‰è£…linting"></a>å®‰è£…linting</h2><p>Lintingçªå‡ºäº†Pythonæºä»£ç ä¸­çš„è¯­æ³•å’Œé£æ ¼é”™è¯¯</p><ol><li><p>å…ˆä½¿ç”¨å‘½ä»¤è¡Œ, é”®å…¥å¦‚ä¸‹å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pylint</span><br></pre></td></tr></table></figure></li><li><p>ç„¶ååœ¨å·¥ä½œåŒºçš„<code>settings.json</code>åŠ å…¥å¦‚ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"python.linting.pylintEnabled"</span>: true,</span><br><span class="line"><span class="string">"python.linting.enabled"</span>: true,</span><br></pre></td></tr></table></figure></li><li><p>æ•ˆæœå›¾<br><img src="/images/2018-11-24-16-29-40.png" alt=""></p></li></ol><p>æ›´å¤šç»†èŠ‚æŸ¥çœ‹<a href="https://code.visualstudio.com/docs/python/linting" target="_blank" rel="noopener">Linting Python in Visual Studio Code</a></p><h2 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h2><p>å¯ä»¥ä½¿ç”¨pythonå†…å»ºçš„<code>unittest</code>, æˆ–è€…<code>pytest</code>æˆ–è€…<code>nose</code>(è‡ªè¡Œå®‰è£…å³å¯)</p><p><strong>ä¾‹å­:</strong><br>æ¯”å¦‚ä½¿ç”¨<code>unittest</code>, åˆ™åœ¨å·¥ä½œåŒºçš„<code>settings.json</code>åŠ å…¥å¦‚ä¸‹:<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"python.unitTest.unittestEnabled"</span>: true,</span><br><span class="line"><span class="string">"python.unitTest.pyTestEnabled"</span>: false,</span><br><span class="line"><span class="string">"python.unitTest.nosetestsEnabled"</span>: false,</span><br></pre></td></tr></table></figure><p></p><ol><li><p>åˆ›å»º<code>inc_dec.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">increment</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decrement</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> x - <span class="number">1</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»º<code>test1.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">import</span> inc_dec</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test_TestIncrementDecrement</span><span class="params">(unittest.TestCase)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_increment</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.assertEquals(inc_dec.increment(<span class="number">3</span>), <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_decrement</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.assertEquals(inc_dec.decrement(<span class="number">3</span>), <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure></li><li><p>å½“ä½¿ç”¨<code>unittest</code>æ—¶, vscodeçœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·çš„(emmm, å•çº§å·¥ä½œåŒºæ‰èƒ½è¿™æ ·çœ‹åˆ°, å¤ªå¤šæ–‡ä»¶å¤¹è²Œä¼¼ä¸è¡Œâ€¦)</p></li></ol><p><img src="/images/2018-11-24-16-34-14.png" alt=""></p><p>æ›´å¤šå•å…ƒæµ‹è¯•ç»†èŠ‚å¯æŸ¥çœ‹<a href="https://code.visualstudio.com/docs/python/unit-testing" target="_blank" rel="noopener">Python unit tests in Visual Studio Code</a></p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;Vscode Python &lt;strong&gt;Windows&lt;/strong&gt;ç¯å¢ƒé…ç½®&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;å®‰è£…&lt;strong&gt;Vscode&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;å®‰è£…Vscodeæ’ä»¶&lt;strong&gt;Python&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/images/2018-11-24-16-09-13.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;å®‰è£…&lt;a href=&quot;https://www.python.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Python3&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;
    
    </summary>
    
      <category term="Vscode" scheme="https://vonsdite.cn/categories/Vscode/"/>
    
      <category term="Pythoné…ç½®" scheme="https://vonsdite.cn/categories/Vscode/Python%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="Vscode" scheme="https://vonsdite.cn/tags/Vscode/"/>
    
  </entry>
  
  <entry>
    <title>vscode C/C++ç¼–è¯‘è¿è¡Œç¯å¢ƒæ­å»º</title>
    <link href="https://vonsdite.cn/posts/7552b9cf.html"/>
    <id>https://vonsdite.cn/posts/7552b9cf.html</id>
    <published>2018-11-24T03:46:38.000Z</published>
    <updated>2018-11-24T07:36:52.591Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡å°†ä»‹ç»<strong>Vscode</strong><code>C/C++</code>ç¼–è¯‘è¿è¡Œç¯å¢ƒçš„åœ¨<code>Windows</code>ä¸‹çš„æ­å»º, å…±ä»‹ç»<strong>2ç§æ–¹æ¡ˆ</strong><br>æ¨èä½¿ç”¨å‰ä¸¤ç§, å³å¯å®Œæˆç¼–è¯‘è¿è¡Œè°ƒè¯•åŠŸèƒ½</p><ol><li>ä½¿ç”¨<strong>Vscode</strong>çš„<code>Tasks</code>åŠŸèƒ½æ¥ç¼–è¯‘è¿è¡Œ, å¹¶ä½¿ç”¨<code>GDB</code>è°ƒè¯•</li><li>ä½¿ç”¨<code>CodeRunner</code></li></ol><h1 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h1><a id="more"></a><ol><li><p>å®‰è£…<strong>Vscode</strong></p></li><li><p>å®‰è£…<code>MinGW-w64</code>å’Œ<code>Clang</code></p></li></ol><p><a href="http://releases.llvm.org/download.html" target="_blank" rel="noopener">LLVM Download Page</a> åœ¨æ­¤é¡µé¢ä¸‹è½½Clang:<br>é€‰<strong>Pre-Built Binaries</strong>ä¸­çš„<strong>Clang for Windows (64-bit)</strong>, ä¸éœ€è¦ä¸‹.sigæ–‡ä»¶</p><p><a href="https://sourceforge.net/projects/mingw-w64/" target="_blank" rel="noopener">MinGW-w64 - for 32 and 64 bit Windows</a> åœ¨æ­¤é¡µé¢ä¸‹è½½MinGW-w64</p><p><code>LLVM</code>ä¸‹è½½å¥½äº†ä»¥åå®‰è£…, æ·»åŠ ç¯å¢ƒå˜é‡æ—¶ï¼šé€‰<strong>Add LLVM to the system PATH for all users</strong></p><p><code>MinGW</code> å®‰è£…æ—¶, <strong>Architecture</strong>é€‰<strong>x86_64</strong>, è£…å¥½ä»¥åæŠŠä¸œè¥¿å…¨éƒ¨å¤åˆ¶åˆ°Clangçš„æ–‡ä»¶å¤¹é‡Œå», å®ƒä»¬ä¼š<strong>æ— å†²çªåˆå¹¶</strong>ã€‚</p><p><strong>PS:</strong><br>ä¸ºä»€ä¹ˆæ—¢è¦è£…Clangåˆè¦è£…MinGW, æ˜¯å› ä¸ºClangæ²¡æœ‰å¤´æ–‡ä»¶ã€‚<br>å¦‚æœä½ å®‰è£…äº†å…¶ä»–IDEéœ€è¦æ³¨æ„æŠŠå…¶ä»–çš„MinGWä»ç¯å¢ƒå˜é‡ä¸­å»æ‰; ä¹Ÿå¯ä»¥è‡ªå·±æŠŠå®ƒä»¬çš„ç¼–è¯‘å™¨è®¾ä¸ºClang</p><ol start="3"><li>å®‰è£…Vscodeæ’ä»¶<br>é€šè¿‡Vscodeçš„<strong>æ‰©å±•</strong>æœç´¢å¹¶ä¸‹è½½ä»¥ä¸‹ä¸¤ä¸ªæ’ä»¶</li></ol><ul><li><strong>C/C++</strong> (ç¬¬ä¸€ä¸ªæ–¹æ¡ˆéœ€è¦)</li><li><strong>Code Runner</strong> (ç¬¬äºŒä¸ªæ–¹æ¡ˆéœ€è¦)</li></ul><ol start="4"><li>åœ¨<code>settings.json</code>ä¸­æ·»åŠ å¦‚ä¸‹çš„é…ç½®:<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"editor.formatOnType"</span>: true,</span><br><span class="line"><span class="string">"editor.snippetSuggestions"</span>: <span class="string">"top"</span>,</span><br><span class="line"><span class="string">"C_Cpp.clang_format_sortIncludes"</span>: true,</span><br><span class="line"><span class="string">"C_Cpp.errorSquiggles"</span>: <span class="string">"Disabled"</span>,</span><br><span class="line"><span class="string">"C_Cpp.autocomplete"</span>: <span class="string">"Disabled"</span>,</span><br><span class="line"><span class="string">"clang.cflags"</span>: [</span><br><span class="line">    <span class="string">"--target=x86_64-w64-mingw"</span>,</span><br><span class="line">    <span class="string">"-std=c11"</span>,</span><br><span class="line">    <span class="string">"-Wall"</span></span><br><span class="line">],</span><br><span class="line"><span class="string">"clang.cxxflags"</span>: [</span><br><span class="line">    <span class="string">"--target=x86_64-w64-mingw"</span>,</span><br><span class="line">    <span class="string">"-std=c++17"</span>,</span><br><span class="line">    <span class="string">"-Wall"</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure></li></ol><h1 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h1><h2 id="ä½¿ç”¨-Vscode-ä¼˜ç§€çš„-Tasks-åŠŸèƒ½å¯ç”¨ç¼–è¯‘è¿è¡Œå‘½ä»¤"><a href="#ä½¿ç”¨-Vscode-ä¼˜ç§€çš„-Tasks-åŠŸèƒ½å¯ç”¨ç¼–è¯‘è¿è¡Œå‘½ä»¤" class="headerlink" title="ä½¿ç”¨ Vscode ä¼˜ç§€çš„ Tasks åŠŸèƒ½å¯ç”¨ç¼–è¯‘è¿è¡Œå‘½ä»¤"></a>ä½¿ç”¨ Vscode ä¼˜ç§€çš„ Tasks åŠŸèƒ½å¯ç”¨ç¼–è¯‘è¿è¡Œå‘½ä»¤</h2><ol><li>æ‰“å¼€Cæˆ–è€…C/C++çš„å·¥ä½œåŒº, ä½¿ç”¨å¿«æ·é”®<code>ctrl</code>+<code>shift</code>+<code>p</code>, é”®å…¥<code>c/cpp: edit configurations</code>, æŒ‰<code>Enter</code>æ‰“å¼€<code>c_cpp_properties.json</code><br>å°†ä»¥ä¸‹çš„å†…å®¹<strong>è¦†ç›–</strong>åˆ°<code>c_cpp_properties.json</code>ä¸­</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"configurations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"MinGW"</span>,</span><br><span class="line">            <span class="string">"includePath"</span>: [</span><br><span class="line">                <span class="string">"$&#123;workspaceFolder&#125;"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="string">"browse"</span>: &#123;</span><br><span class="line">                <span class="string">"path"</span>: [</span><br><span class="line">                    <span class="string">"$&#123;workspaceFolder&#125;"</span></span><br><span class="line">                ],</span><br><span class="line">                <span class="string">"limitSymbolsToIncludedHeaders"</span>: true,</span><br><span class="line">                <span class="string">"databaseFilename"</span>: <span class="string">""</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"defines"</span>: [</span><br><span class="line">                <span class="string">"_DEBUG"</span>,</span><br><span class="line">                <span class="string">"UNICODE"</span>,</span><br><span class="line">                <span class="string">"_UNICODE"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="string">"compilerPath"</span>: <span class="string">"E:/LLVM/bin/gcc.exe"</span>,</span><br><span class="line">            <span class="string">"cStandard"</span>: <span class="string">"c11"</span>,</span><br><span class="line">            <span class="string">"cppStandard"</span>: <span class="string">"c++17"</span>,</span><br><span class="line">            <span class="string">"intelliSenseMode"</span>: <span class="string">"clang-x64"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"version"</span>: <span class="number">4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨å¿«æ·é”®<code>ctrl</code>+<code>shift</code>+<code>p</code>, é”®å…¥<code>tasks: configure task</code>, æŒ‰<code>Enter</code>æ‰“å¼€<code>task.json</code></li></ol><p>å°†ä»¥ä¸‹çš„å†…å®¹<strong>è¦†ç›–</strong>åˆ°<code>task.json</code>ä¸­<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">// https://code.visualstudio.com/docs/editor/tasks</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"version"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">    <span class="string">"tasks"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"label"</span>: <span class="string">"Build"</span>, // ä»»åŠ¡åç§°, ä¸launch.jsonçš„preLaunchTaskç›¸å¯¹åº”</span><br><span class="line">            // å¦‚æœä½¿ç”¨Clangç¼–å†™Cè¯­è¨€, æŠŠcommandçš„å€¼æ”¹æˆclangã€‚</span><br><span class="line">            // <span class="string">"command"</span>: <span class="string">"clang"</span>,      // ç¼–è¯‘cè¯­è¨€</span><br><span class="line">            // å¦‚æœä½¿ç”¨MinGW, ç¼–è¯‘Cç”¨gcc, ç¼–è¯‘c++ç”¨g++, å¹¶æŠŠ-targetå’Œ-fcoloré‚£ä¸¤æ¡åˆ å»</span><br><span class="line">            <span class="string">"command"</span>: <span class="string">"clang++"</span>, // è¦ä½¿ç”¨çš„ç¼–è¯‘å™¨</span><br><span class="line">            <span class="string">"args"</span>: [</span><br><span class="line">                <span class="string">"$&#123;file&#125;"</span>,</span><br><span class="line">                <span class="string">"-o"</span>, // æŒ‡å®šè¾“å‡ºæ–‡ä»¶å, ä¸åŠ è¯¥å‚æ•°åˆ™é»˜è®¤è¾“å‡ºa.exe, Linuxä¸‹é»˜è®¤a.out</span><br><span class="line">                <span class="string">"$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;.exe"</span>,</span><br><span class="line">                <span class="string">"-g"</span>, // ç”Ÿæˆå’Œè°ƒè¯•æœ‰å…³çš„ä¿¡æ¯</span><br><span class="line">                <span class="string">"-Wall"</span>, // å¼€å¯é¢å¤–è­¦å‘Š</span><br><span class="line">                <span class="string">"-static-libgcc"</span>, // é™æ€é“¾æ¥</span><br><span class="line">                <span class="string">"-fcolor-diagnostics"</span>, // å½©è‰²çš„é”™è¯¯ä¿¡æ¯ï¼Ÿä½†è²Œä¼¼clangé»˜è®¤å¼€å¯è€Œgccä¸æ¥å—æ­¤å‚æ•°</span><br><span class="line">                <span class="string">"--target=x86_64-w64-mingw"</span>, // clangçš„é»˜è®¤targetä¸ºmsvc, ä¸åŠ è¿™ä¸€æ¡å°±ä¼šæ‰¾ä¸åˆ°å¤´æ–‡ä»¶ï¼›Linuxä¸‹å»æ‰è¿™ä¸€æ¡</span><br><span class="line">                <span class="string">"-std=c++17"</span> // Cè¯­è¨€æœ€æ–°æ ‡å‡†ä¸ºc11, æˆ–æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œä¿®æ”¹</span><br><span class="line">            ], // ç¼–è¯‘å‘½ä»¤å‚æ•°</span><br><span class="line">            <span class="string">"windows"</span>: &#123;</span><br><span class="line">                <span class="string">"args"</span>: [</span><br><span class="line">                    <span class="string">"$&#123;file&#125;"</span>,</span><br><span class="line">                    <span class="string">"-o"</span>, // æŒ‡å®šè¾“å‡ºæ–‡ä»¶å, ä¸åŠ è¯¥å‚æ•°åˆ™é»˜è®¤è¾“å‡ºa.exe, Linuxä¸‹é»˜è®¤a.out</span><br><span class="line">                    <span class="string">"$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;.exe"</span>,</span><br><span class="line">                    <span class="string">"-g"</span>, // ç”Ÿæˆå’Œè°ƒè¯•æœ‰å…³çš„ä¿¡æ¯</span><br><span class="line">                    <span class="string">"-Wall"</span>, // å¼€å¯é¢å¤–è­¦å‘Š</span><br><span class="line">                    <span class="string">"-static-libgcc"</span>, // é™æ€é“¾æ¥</span><br><span class="line">                    <span class="string">"-fcolor-diagnostics"</span>, // å½©è‰²çš„é”™è¯¯ä¿¡æ¯ï¼Ÿä½†è²Œä¼¼clangé»˜è®¤å¼€å¯è€Œgccä¸æ¥å—æ­¤å‚æ•°</span><br><span class="line">                    <span class="string">"--target=x86_64-w64-mingw"</span>, // clangçš„é»˜è®¤targetä¸ºmsvc, ä¸åŠ è¿™ä¸€æ¡å°±ä¼šæ‰¾ä¸åˆ°å¤´æ–‡ä»¶ï¼›Linuxä¸‹å»æ‰è¿™ä¸€æ¡</span><br><span class="line">                    <span class="string">"-std=c++17"</span> // Cè¯­è¨€æœ€æ–°æ ‡å‡†ä¸ºc11, æˆ–æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œä¿®æ”¹</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"presentation"</span>: &#123;</span><br><span class="line">                <span class="string">"echo"</span>: false,</span><br><span class="line">                <span class="string">"reveal"</span>: <span class="string">"always"</span>, // åœ¨â€œç»ˆç«¯â€ä¸­æ˜¾ç¤ºç¼–è¯‘ä¿¡æ¯çš„ç­–ç•¥, å¯ä»¥ä¸ºalways, silent, neverã€‚å…·ä½“å‚è§VSCçš„æ–‡æ¡£</span><br><span class="line">                <span class="string">"focus"</span>: true,     // è®¾ä¸ºtrueåå¯ä»¥ä½¿æ‰§è¡Œtaskæ—¶ç„¦ç‚¹èšé›†åœ¨ç»ˆç«¯, ä½†å¯¹ç¼–è¯‘cå’Œc++æ¥è¯´, è®¾ä¸ºtrueæ²¡æœ‰æ„ä¹‰</span><br><span class="line">                <span class="string">"panel"</span>: <span class="string">"shared"</span> // ä¸åŒçš„æ–‡ä»¶çš„ç¼–è¯‘ä¿¡æ¯å…±äº«ä¸€ä¸ªç»ˆç«¯é¢æ¿</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"problemMatcher"</span>: &#123;</span><br><span class="line">                <span class="string">"owner"</span>: <span class="string">"cpp"</span>,</span><br><span class="line">                <span class="string">"fileLocation"</span>: <span class="string">"absolute"</span>,</span><br><span class="line">                <span class="string">"pattern"</span>: &#123;</span><br><span class="line">                    <span class="string">"regexp"</span>: <span class="string">"^(.*):(\\d+):(\\d+):\\s+(error):\\s+(.*)$"</span>,</span><br><span class="line">                    <span class="string">"file"</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="string">"line"</span>: <span class="number">2</span>,</span><br><span class="line">                    <span class="string">"column"</span>: <span class="number">3</span>,</span><br><span class="line">                    <span class="string">"severity"</span>: <span class="number">4</span>,</span><br><span class="line">                    <span class="string">"message"</span>: <span class="number">5</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"label"</span>: <span class="string">"Run"</span>,</span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"shell"</span>,</span><br><span class="line">            <span class="string">"dependsOn"</span>: <span class="string">"Build"</span>,</span><br><span class="line">            <span class="string">"command"</span>: <span class="string">"$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;.o"</span>,</span><br><span class="line">            <span class="string">"windows"</span>: &#123;</span><br><span class="line">                <span class="string">"command"</span>: <span class="string">"$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;.exe"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"args"</span>: [],</span><br><span class="line">            <span class="string">"presentation"</span>: &#123;</span><br><span class="line">                <span class="string">"reveal"</span>: <span class="string">"always"</span>,</span><br><span class="line">                <span class="string">"focus"</span>: true</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"problemMatcher"</span>: [],</span><br><span class="line">            <span class="string">"group"</span>: &#123;</span><br><span class="line">                <span class="string">"kind"</span>: <span class="string">"test"</span>,</span><br><span class="line">                <span class="string">"isDefault"</span>: true</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>è¿™ä¸ªjsoné‡Œå†™äº†ä¸¤ä¸ªé…ç½®, ä¸€ä¸ª<code>Build</code>, ä¸€ä¸ª<code>Run</code>ã€‚</p><ul><li><p><code>Build</code> é…ç½®ï¼š</p><ul><li><code>&quot;command&quot;</code> é€‰ç¼–è¯‘å™¨ç”¨çš„ã€‚å†™ C++ å°±å¡« <code>clang++</code> , å†™ C å°±å¡« <code>clang</code></li><li><code>&quot;args&quot;</code> ç¼–è¯‘å‚æ•°ã€‚åƒæ˜¯<code>${fileDirname}</code>å’Œ <code>${fileBasenameNoExtension}</code>ä¹‹ç±»çš„æ˜¯VS Codeçš„<strong>é¢„å®šä¹‰å˜é‡</strong>, è¯¦è§ <a href="https://code.visualstudio.com/docs/editor/variables-reference" target="_blank" rel="noopener">Variables Reference</a>ã€‚</li><li><code>&quot;presentation&quot;</code>è¯¦è§<a href="https://code.visualstudio.com/docs/editor/tasks#_output-behavior" target="_blank" rel="noopener"> Tasks - Output behavior</a> ã€‚</li><li><code>&quot;reveal&quot;</code> æ§åˆ¶å†…ç½®ç»ˆç«¯é¢æ¿æ˜¯å¦è·³å‡ºåˆ°å‰ç«¯ã€‚</li><li><code>&quot;focus&quot;</code> ç„¦ç‚¹æ˜¯å¦è·³åˆ°é¢æ¿ã€‚</li><li><code>&quot;echo&quot;</code>æ§åˆ¶æ‰§è¡Œçš„å‘½ä»¤æ˜¯å¦è¾“å‡ºã€‚</li><li><code>&quot;problemMatcher&quot;</code>å°± C è¯­è¨€æ¥è¯´, åŠŸèƒ½æ˜¯å°†ç¼–è¯‘å™¨è¾“å‡ºçš„é”™è¯¯æ•æ‰åˆ°VS Codeçš„<strong> Problem Panel</strong> ä¸Š, è¿™ä¸ªé¢æ¿ä¸Šçš„é”™è¯¯å¹¶ä¸ä¼šåŠæ—¶æ›´æ–°, æ¯ç¼–è¯‘ä¸€æ¬¡å°±æ›´æ–°ä¸€æ¬¡ã€‚è¯¦è§ <a href="https://code.visualstudio.com/docs/editor/tasks#_processing-task-output-with-problem-matchers" target="_blank" rel="noopener">Tasks - problem-matchers</a>ã€‚</li></ul></li><li><p><code>Run</code> é…ç½®ï¼š</p><ul><li><code>&quot;dependsOn&quot;</code>å…ˆè¿è¡Œå“ªä¸ªä»»åŠ¡, è¿™é‡Œå°±æ˜¯å…ˆè¿è¡Œ <code>Build</code> ä»»åŠ¡ï¼ˆå…ˆç¼–è¯‘åè¿è¡Œï¼‰ã€‚</li><li><code>&quot;group&quot;</code>è®¾ç½®ç»„, è¿™é‡Œè®¾ç½®ä¸ºé»˜è®¤çš„testç»„ã€‚è¯¦è§ <a href="https://code.visualstudio.com/docs/editor/tasks#_custom-tasks" target="_blank" rel="noopener">Tasks - custom-tasks</a>ã€‚</li></ul></li></ul><p>é”®ä½ç»‘å®š<br>åˆ°çª—å£å·¦ä¸‹è§’ç‚¹é½¿è½®å†ç‚¹ ã€Œé”®ç›˜å¿«æ·æ–¹å¼ã€<br><img src="/images/2018-11-24-15-19-11.png" alt=""></p><p>è®¾ç½®æˆ<code>alt</code>+<code>f2</code>, åç»­å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå¿«æ·é”®æ¥è¿è¡Œ<code>c/c++</code>ä»£ç äº†<br><img src="/images/2018-11-24-15-19-38.png" alt=""></p><h2 id="é…ç½®GDBè¿›è¡Œè°ƒè¯•"><a href="#é…ç½®GDBè¿›è¡Œè°ƒè¯•" class="headerlink" title="é…ç½®GDBè¿›è¡Œè°ƒè¯•"></a>é…ç½®GDBè¿›è¡Œè°ƒè¯•</h2><p>å› ä¸ºå®‰è£…äº†<code>c/c++</code>æ’ä»¶, æ‰€ä»¥æŒ‰<code>f5</code>å³å¯è¿›è¡Œè°ƒè¯•</p><p>éœ€é…ç½®<code>launch.json</code><br>ä½¿ç”¨å¿«æ·é”®<code>ctrl</code>+<code>shift</code>+<code>p</code>, é”®å…¥<code>debug: open launch.json</code>, æŒ‰<code>Enter</code>æ‰“å¼€<code>launch.json</code></p><p>å°†ä»¥ä¸‹çš„å†…å®¹<strong>è¦†ç›–</strong>åˆ°<code>launch.json</code>ä¸­<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// https://github.com/Microsoft/vscode-cpptools/blob/master/launch.md</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">    <span class="string">"configurations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"name"</span>: <span class="string">"(gdb) Launch"</span>, // é…ç½®åç§°ï¼Œå°†ä¼šåœ¨å¯åŠ¨é…ç½®çš„ä¸‹æ‹‰èœå•ä¸­æ˜¾ç¤º</span><br><span class="line">            <span class="string">"type"</span>: <span class="string">"cppdbg"</span>,       // é…ç½®ç±»å‹ï¼Œè¿™é‡Œåªèƒ½ä¸ºcppdbg</span><br><span class="line">            <span class="string">"request"</span>: <span class="string">"launch"</span>,    // è¯·æ±‚é…ç½®ç±»å‹ï¼Œå¯ä»¥ä¸ºlaunchï¼ˆå¯åŠ¨ï¼‰æˆ–attachï¼ˆé™„åŠ ï¼‰</span><br><span class="line">            <span class="string">"program"</span>: <span class="string">"$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;.o"</span>,   // å°†è¦è¿›è¡Œè°ƒè¯•çš„ç¨‹åºçš„è·¯å¾„</span><br><span class="line">            // <span class="string">"program"</span>: <span class="string">"$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;.exe"</span>, </span><br><span class="line">            <span class="string">"args"</span>: [],             // ç¨‹åºè°ƒè¯•æ—¶ä¼ é€’ç»™ç¨‹åºçš„å‘½ä»¤è¡Œå‚æ•°ï¼Œä¸€èˆ¬è®¾ä¸ºç©ºå³å¯</span><br><span class="line">            <span class="string">"stopAtEntry"</span>: true,   // è®¾ä¸ºtrueæ—¶ç¨‹åºå°†æš‚åœåœ¨ç¨‹åºå…¥å£å¤„ï¼Œæˆ‘ä¸€èˆ¬è®¾ç½®ä¸ºtrue</span><br><span class="line">            <span class="string">"cwd"</span>: <span class="string">"$&#123;workspaceFolder&#125;"</span>, // è°ƒè¯•ç¨‹åºæ—¶çš„å·¥ä½œç›®å½•</span><br><span class="line">            <span class="string">"environment"</span>: [],     </span><br><span class="line">            //<span class="string">"externalConsole"</span>: true,    // è°ƒè¯•æ—¶æ˜¯å¦æ˜¾ç¤ºæ§åˆ¶å°çª—å£ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºtrueæ˜¾ç¤ºæ§åˆ¶å°</span><br><span class="line">            <span class="string">"internalConsoleOptions"</span>: <span class="string">"neverOpen"</span>, // å¦‚æœä¸è®¾ä¸ºneverOpenï¼Œè°ƒè¯•æ—¶ä¼šè·³åˆ°â€œè°ƒè¯•æ§åˆ¶å°â€é€‰é¡¹å¡ï¼Œä½ åº”è¯¥ä¸éœ€è¦å¯¹gdbæ‰‹åŠ¨è¾“å‘½ä»¤å§ï¼Ÿ</span><br><span class="line">            <span class="string">"MIMode"</span>: <span class="string">"gdb"</span>,        // æŒ‡å®šè¿æ¥çš„è°ƒè¯•å™¨ï¼Œå¯ä»¥ä¸ºgdbæˆ–lldbã€‚ä½†ç›®å‰lldbåœ¨windowsä¸‹æ²¡æœ‰é¢„ç¼–è¯‘å¥½çš„ç‰ˆæœ¬ã€‚</span><br><span class="line">            <span class="string">"windows"</span>: &#123;</span><br><span class="line">                <span class="string">"program"</span>: <span class="string">"$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;.exe"</span>,</span><br><span class="line">                <span class="string">"miDebuggerPath"</span>: <span class="string">"E:/LLVM/bin/gdb.exe"</span> // è°ƒè¯•å™¨è·¯å¾„ï¼ŒWindowsä¸‹åç¼€ä¸èƒ½çœç•¥</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"setupCommands"</span>: [      </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"description"</span>: <span class="string">"Enable pretty-printing for gdb"</span>,</span><br><span class="line">                    <span class="string">"text"</span>: <span class="string">"-enable-pretty-printing"</span>,</span><br><span class="line">                    <span class="string">"ignoreFailures"</span>: true</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="string">"preLaunchTask"</span>: <span class="string">"Build"</span> // è°ƒè¯•ä¼šè¯å¼€å§‹å‰æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¸€èˆ¬ä¸ºç¼–è¯‘ç¨‹åºã€‚ä¸tasks.jsonçš„labelç›¸å¯¹åº”</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><ul><li>é…ç½®ç®€è¦è¯´æ˜ï¼š<ul><li>æ³¨æ„<code>&quot;windows&quot;</code>:ä¸‹çš„ <code>&quot;miDebuggerPath&quot;</code>ã€‚è¦å°†å…¶ä¸­çš„è·¯å¾„æ”¹ä¸º<strong>æœ¬æœºçš„GDBè·¯å¾„</strong>, æ”¾åœ¨äº†å‰æ–‡<strong>åˆå¹¶åçš„clang</strong>çš„<strong>binç›®å½•</strong>ä¸‹ã€‚</li><li><code>&quot;preLaunchTask&quot;</code> è¿è¡Œè°ƒè¯•å‰å…ˆè¿è¡ŒæŸä¸ªä»»åŠ¡ï¼Œè¿™ä¸ª<code>Build</code>ä»»åŠ¡å°±æ˜¯å‰é¢<code>tasks.josn</code>é‡Œçš„é‚£ä¸ªã€‚</li></ul></li></ul><h1 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h1><p>ä½¿ç”¨<strong>code runner</strong>(<strong>ä¸æ¨è</strong>)</p><p><strong>ç¼ºé™·:</strong></p><ol><li>ä¸èƒ½è¿›è¡Œè°ƒè¯•</li><li>ç»ˆç«¯è¾“å…¥ä¼šæº¢å‡ºåˆ°ç¨‹åºå¤–</li></ol><p><strong>ä½¿ç”¨:</strong><br>å®‰è£…å®Œ<strong>Code Runner</strong>æ’ä»¶å, åœ¨<code>settings.json</code>æ·»åŠ å¦‚ä¸‹çš„é…ç½®:<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"code-runner.runInTerminal"</span>: true,</span><br><span class="line"><span class="string">"code-runner.executorMap"</span>: &#123;</span><br><span class="line">    <span class="string">"javascript"</span>: <span class="string">"node"</span>,</span><br><span class="line">    <span class="string">"java"</span>: <span class="string">"cd $dir &amp;&amp; javac \"$fileName\" &amp;&amp; java \"$fileNameWithoutExt\""</span>,</span><br><span class="line">    <span class="string">"c"</span>: <span class="string">"cd $dir &amp;&amp; clang \"$fileName\" -o \"$fileNameWithoutExt.exe\" -Wall -g -Og -static-libgcc -fcolor-diagnostics --target=x86_64-w64-mingw -std=c11 &amp;&amp; &amp;\"$dir$fileNameWithoutExt\""</span>,</span><br><span class="line">    <span class="string">"cpp"</span>: <span class="string">"cd $dir &amp;&amp; clang++ \"$fileName\" -o \"$fileNameWithoutExt.exe\" -Wall -g -Og -static-libgcc -fcolor-diagnostics --target=x86_64-w64-mingw -std=c++17 &amp;&amp; &amp;\"$dir$fileNameWithoutExt\""</span>,</span><br><span class="line">    <span class="string">"objective-c"</span>: <span class="string">"cd $dir &amp;&amp; gcc -framework Cocoa \"$fileName\" -o $fileNameWithoutExt &amp;&amp; &amp;\"$dir$fileNameWithoutExt\""</span>,</span><br><span class="line">    <span class="string">"php"</span>: <span class="string">"php"</span>,</span><br><span class="line">    <span class="string">"python"</span>: <span class="string">"python -u"</span>,</span><br><span class="line">    <span class="string">"perl"</span>: <span class="string">"perl"</span>,</span><br><span class="line">    <span class="string">"perl6"</span>: <span class="string">"perl6"</span>,</span><br><span class="line">    <span class="string">"ruby"</span>: <span class="string">"ruby"</span>,</span><br><span class="line">    <span class="string">"go"</span>: <span class="string">"go run"</span>,</span><br><span class="line">    <span class="string">"lua"</span>: <span class="string">"lua"</span>,</span><br><span class="line">    <span class="string">"groovy"</span>: <span class="string">"groovy"</span>,</span><br><span class="line">    <span class="string">"powershell"</span>: <span class="string">"powershell -ExecutionPolicy ByPass -File"</span>,</span><br><span class="line">    <span class="string">"bat"</span>: <span class="string">"cmd /c"</span>,</span><br><span class="line">    <span class="string">"shellscript"</span>: <span class="string">"bash"</span>,</span><br><span class="line">    <span class="string">"fsharp"</span>: <span class="string">"fsi"</span>,</span><br><span class="line">    <span class="string">"csharp"</span>: <span class="string">"scriptcs"</span>,</span><br><span class="line">    <span class="string">"vbscript"</span>: <span class="string">"cscript //Nologo"</span>,</span><br><span class="line">    <span class="string">"typescript"</span>: <span class="string">"ts-node"</span>,</span><br><span class="line">    <span class="string">"coffeescript"</span>: <span class="string">"coffee"</span>,</span><br><span class="line">    <span class="string">"scala"</span>: <span class="string">"scala"</span>,</span><br><span class="line">    <span class="string">"swift"</span>: <span class="string">"swift"</span>,</span><br><span class="line">    <span class="string">"julia"</span>: <span class="string">"julia"</span>,</span><br><span class="line">    <span class="string">"crystal"</span>: <span class="string">"crystal"</span>,</span><br><span class="line">    <span class="string">"ocaml"</span>: <span class="string">"ocaml"</span>,</span><br><span class="line">    <span class="string">"r"</span>: <span class="string">"Rscript"</span>,</span><br><span class="line">    <span class="string">"applescript"</span>: <span class="string">"osascript"</span>,</span><br><span class="line">    <span class="string">"clojure"</span>: <span class="string">"lein exec"</span>,</span><br><span class="line">    <span class="string">"haxe"</span>: <span class="string">"haxe --cwd $dirWithoutTrailingSlash --run $fileNameWithoutExt"</span>,</span><br><span class="line">    <span class="string">"rust"</span>: <span class="string">"cd $dir &amp;&amp; rustc \"$fileName\" &amp;&amp; &amp;\"$dir$fileNameWithoutExt\""</span>,</span><br><span class="line">    <span class="string">"racket"</span>: <span class="string">"racket"</span>,</span><br><span class="line">    <span class="string">"ahk"</span>: <span class="string">"autohotkey"</span>,</span><br><span class="line">    <span class="string">"autoit"</span>: <span class="string">"autoit3"</span>,</span><br><span class="line">    <span class="string">"dart"</span>: <span class="string">"dart"</span>,</span><br><span class="line">    <span class="string">"pascal"</span>: <span class="string">"cd $dir &amp;&amp; fpc \"$fileName\" &amp;&amp; &amp;\"$dir$fileNameWithoutExt\""</span>,</span><br><span class="line">    <span class="string">"d"</span>: <span class="string">"cd $dir &amp;&amp; dmd \"$fileName\" &amp;&amp; &amp;\"$dir$fileNameWithoutExt\""</span>,</span><br><span class="line">    <span class="string">"haskell"</span>: <span class="string">"runhaskell"</span>,</span><br><span class="line">    <span class="string">"nim"</span>: <span class="string">"nim compile --verbosity:0 --hints:off --run"</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"code-runner.saveFileBeforeRun"</span>: true,</span><br><span class="line"><span class="string">"code-runner.preserveFocus"</span>: true,</span><br><span class="line"><span class="string">"code-runner.ignoreSelection"</span>: true</span><br></pre></td></tr></table></figure><p></p><p>ç„¶åä½¿ç”¨<code>ctrl</code>+<code>alt</code>+<code>n</code>å³å¯è¿è¡Œä»£ç </p><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»&lt;strong&gt;Vscode&lt;/strong&gt;&lt;code&gt;C/C++&lt;/code&gt;ç¼–è¯‘è¿è¡Œç¯å¢ƒçš„åœ¨&lt;code&gt;Windows&lt;/code&gt;ä¸‹çš„æ­å»º, å…±ä»‹ç»&lt;strong&gt;2ç§æ–¹æ¡ˆ&lt;/strong&gt;&lt;br&gt;æ¨èä½¿ç”¨å‰ä¸¤ç§, å³å¯å®Œæˆç¼–è¯‘è¿è¡Œè°ƒè¯•åŠŸèƒ½&lt;/p&gt;&lt;ol&gt;&lt;li&gt;ä½¿ç”¨&lt;strong&gt;Vscode&lt;/strong&gt;çš„&lt;code&gt;Tasks&lt;/code&gt;åŠŸèƒ½æ¥ç¼–è¯‘è¿è¡Œ, å¹¶ä½¿ç”¨&lt;code&gt;GDB&lt;/code&gt;è°ƒè¯•&lt;/li&gt;&lt;li&gt;ä½¿ç”¨&lt;code&gt;CodeRunner&lt;/code&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h1 id=&quot;ç¯å¢ƒé…ç½®&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒé…ç½®&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒé…ç½®&quot;&gt;&lt;/a&gt;ç¯å¢ƒé…ç½®&lt;/h1&gt;
    
    </summary>
    
      <category term="Vscode" scheme="https://vonsdite.cn/categories/Vscode/"/>
    
      <category term="C/C++é…ç½®" scheme="https://vonsdite.cn/categories/Vscode/C-C-%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="Vscode" scheme="https://vonsdite.cn/tags/Vscode/"/>
    
  </entry>
  
  <entry>
    <title>python è¿è¡Œç¨‹åºçš„è¿‡ç¨‹</title>
    <link href="https://vonsdite.cn/posts/4d1f60ac.html"/>
    <id>https://vonsdite.cn/posts/4d1f60ac.html</id>
    <published>2018-11-22T00:27:50.000Z</published>
    <updated>2018-11-22T02:50:02.318Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p><strong>Python</strong>ç¨‹åºæ‰§è¡Œæ—¶,</p><ol><li><p>ç¬¬ä¸€æ­¥æ˜¯å°†<strong>Pythonç¨‹åº</strong>ç¼–è¯‘æˆ<strong>å­—èŠ‚ç </strong>(å­—èŠ‚ç æ˜¯<strong>æºä»£ç åº•å±‚</strong>çš„, ä¸å¹³å°æ— å…³çš„è¡¨ç°å½¢å¼, å®ç°è·¨å¹³å°çš„é‡è¦ç‰¹æ€§; å­—èŠ‚ç å¯ä»¥æé«˜æ‰§è¡Œé€Ÿåº¦, æ¯”èµ·æ–‡æœ¬æ–‡ä»¶ä¸­çš„æºä»£ç è¯­å¥, å­—èŠ‚ç çš„è¿è¡Œé€Ÿåº¦è¦å¿«å¾—å¤š)ã€‚æ³¨æ„, å­—èŠ‚ç <strong>ä¸æ˜¯</strong>æœºå™¨çš„äºŒè¿›åˆ¶ä»£ç (ä¾‹å¦‚, IntelèŠ¯ç‰‡çš„æŒ‡ä»¤), å­—èŠ‚ç æ˜¯<strong>ç‰¹å®šäº</strong>Pythonçš„ä¸€ç§è¡¨ç°å½¢å¼</p></li><li><p>ç¬¬äºŒæ­¥æ˜¯å­—èŠ‚ç è½¬å‘åˆ°<strong>Pythonè™šæ‹Ÿæœº(PVM)</strong>ä¸­è¿è¡Œ(ç±»ä¼¼<strong>Javaè™šæ‹Ÿæœº(JVM)</strong>), <strong>PVM</strong>å°±æ˜¯è¿­ä»£è¿è¡Œ<strong>å­—èŠ‚ç </strong>æŒ‡ä»¤çš„ä¸€ä¸ªå¤§å¾ªç¯, ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å®Œæˆæ“ä½œ (PVMä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åº, åªæ˜¯Pythonç³»ç»Ÿçš„ä¸€éƒ¨åˆ†)ã€‚å®é™…ä¸Š, PVMå¾ªç¯ä»éœ€<strong>è§£é‡Š</strong>å­—èŠ‚ç </p></li></ol><p><img src="/images/2018-11-22-09-06-42.png" alt=""></p><a id="more"></a><p><strong>Ps:</strong> <strong>å­—èŠ‚ç </strong>ç¼–è¯‘è¿‡ç¨‹æ˜¯å¯¹ç”¨æˆ·å®Œå…¨éšè—çš„, å¦‚æœPythonè¿›ç¨‹åœ¨æœºå™¨ä¸Šæ‹¥æœ‰<strong>å†™å…¥æƒé™</strong>, é‚£ä¹ˆå®ƒå°†æŠŠç¨‹åºçš„å­—èŠ‚ç ä¿å­˜ä¸ºä¸€ä¸ªä»¥<code>.pyc</code>ä¸ºæ‰©å±•åçš„æ–‡ä»¶(<code>.pyc</code>è¡¨ç¤ºçš„æ˜¯ç¼–è¯‘è¿‡çš„<code>.py</code>æºä»£ç  -&gt; <code>python complied</code>)ã€‚å¦‚æœPython<strong>æ²¡æœ‰å†™å…¥æƒé™</strong>, ç¨‹åºä»ç„¶å¯ä»¥å·¥ä½œ, åªæ˜¯å­—èŠ‚ç ä¼šåœ¨<strong>å†…å­˜</strong>ä¸­ç”Ÿæˆ, å¹¶åœ¨ç¨‹åºç»“æŸæ—¶ç®€å•åœ°ä¸¢å¼ƒã€‚</p><h1 id="å­—èŠ‚ç çš„å¥½å¤„"><a href="#å­—èŠ‚ç çš„å¥½å¤„" class="headerlink" title="å­—èŠ‚ç çš„å¥½å¤„"></a>å­—èŠ‚ç çš„å¥½å¤„</h1><ol><li><p><strong>Python</strong>ä¿å­˜<strong>å­—èŠ‚ç </strong>å¯ä»¥ä½œä¸ºä¸€ç§<strong>å¯åŠ¨é€Ÿåº¦</strong>çš„ä¼˜åŒ–<br>å¦‚æœä½ åœ¨ä¸Šæ¬¡ä¿å­˜<strong>å­—èŠ‚ç </strong>ä¹‹åæ²¡æœ‰ä¿®æ”¹è¿‡æºä»£ç , <strong>Python</strong>å°†ä¼šåŠ è½½<code>.pyc</code>æ–‡ä»¶å¹¶è·³è¿‡ç¼–è¯‘è¿™ä¸ªæ­¥éª¤ã€‚å½“<code>Python</code>å¿…é¡»é‡ç¼–è¯‘æ—¶, å®ƒä¼šè‡ªåŠ¨æ£€æŸ¥æºæ–‡ä»¶å’Œå­—èŠ‚ç çš„æ—¶é—´æˆ³, å³å½“ä½ ä¿®æ”¹å¹¶ä¿å­˜äº†æºä»£ç , ä¸‹æ¬¡ç¨‹åºè¿è¡Œæ—¶, å­—èŠ‚ç å°†<strong>è‡ªåŠ¨é‡æ–°åˆ›å»º</strong></p></li><li><p>å­—èŠ‚ç æ˜¯æºä»£ç åº•å±‚çš„, ä¸å¹³å°æ— å…³çš„è¡¨ç°å½¢å¼, <strong>å®ç°è·¨å¹³å°çš„é‡è¦ç‰¹æ€§</strong></p></li><li><p>å¯ä»¥éšè—<strong>æºä»£ç </strong></p></li></ol><!-- rebuild by neat -->]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Fri Dec 14 2018 21:02:56 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --&gt;&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;Python&lt;/strong&gt;ç¨‹åºæ‰§è¡Œæ—¶,&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;ç¬¬ä¸€æ­¥æ˜¯å°†&lt;strong&gt;Pythonç¨‹åº&lt;/strong&gt;ç¼–è¯‘æˆ&lt;strong&gt;å­—èŠ‚ç &lt;/strong&gt;(å­—èŠ‚ç æ˜¯&lt;strong&gt;æºä»£ç åº•å±‚&lt;/strong&gt;çš„, ä¸å¹³å°æ— å…³çš„è¡¨ç°å½¢å¼, å®ç°è·¨å¹³å°çš„é‡è¦ç‰¹æ€§; å­—èŠ‚ç å¯ä»¥æé«˜æ‰§è¡Œé€Ÿåº¦, æ¯”èµ·æ–‡æœ¬æ–‡ä»¶ä¸­çš„æºä»£ç è¯­å¥, å­—èŠ‚ç çš„è¿è¡Œé€Ÿåº¦è¦å¿«å¾—å¤š)ã€‚æ³¨æ„, å­—èŠ‚ç &lt;strong&gt;ä¸æ˜¯&lt;/strong&gt;æœºå™¨çš„äºŒè¿›åˆ¶ä»£ç (ä¾‹å¦‚, IntelèŠ¯ç‰‡çš„æŒ‡ä»¤), å­—èŠ‚ç æ˜¯&lt;strong&gt;ç‰¹å®šäº&lt;/strong&gt;Pythonçš„ä¸€ç§è¡¨ç°å½¢å¼&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ç¬¬äºŒæ­¥æ˜¯å­—èŠ‚ç è½¬å‘åˆ°&lt;strong&gt;Pythonè™šæ‹Ÿæœº(PVM)&lt;/strong&gt;ä¸­è¿è¡Œ(ç±»ä¼¼&lt;strong&gt;Javaè™šæ‹Ÿæœº(JVM)&lt;/strong&gt;), &lt;strong&gt;PVM&lt;/strong&gt;å°±æ˜¯è¿­ä»£è¿è¡Œ&lt;strong&gt;å­—èŠ‚ç &lt;/strong&gt;æŒ‡ä»¤çš„ä¸€ä¸ªå¤§å¾ªç¯, ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å®Œæˆæ“ä½œ (PVMä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åº, åªæ˜¯Pythonç³»ç»Ÿçš„ä¸€éƒ¨åˆ†)ã€‚å®é™…ä¸Š, PVMå¾ªç¯ä»éœ€&lt;strong&gt;è§£é‡Š&lt;/strong&gt;å­—èŠ‚ç &lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;img src=&quot;/images/2018-11-22-09-06-42.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Python" scheme="https://vonsdite.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="https://vonsdite.cn/tags/Python/"/>
    
  </entry>
  
</feed>
